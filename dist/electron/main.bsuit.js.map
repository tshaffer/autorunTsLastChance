{"version":3,"sources":["../webpack/universalModuleDefinition","../webpack/bootstrap","../external \"lodash\"","../external \"@brightsign/bsdatamodel\"","../external \"react\"","../external \"@brightsign/bscore\"","../../../../../../webpack/universalModuleDefinition","../webpack:/webpack/bootstrap 4e90465e936ecc2b3ee8","../../../../../../~/process/browser.js","../../../../../../lib/path.browser.ts","../../../../../../~/inherits/inherits_browser.js","../../../../../../~/node-libs-browser/~/util/support/isBufferBrowser.js","../../../../../../~/node-libs-browser/~/util/util.js","../../../../../../~/path/path.js","../../../../../../lib/index.ts","../../../../../../lib/noop.ts","../../../../../../lib/platform.ts","../node_modules/graceful-fs/graceful-fs.js","../external \"path\"","../node_modules/fs-extra/node_modules/universalify/index.js","../node_modules/fs-extra/lib/mkdirs/index.js","../external \"react-redux\"","../external \"redux\"","../node_modules/fs-extra/lib/index.js","../node_modules/fs-extra/lib/path-exists/index.js","../external \"fs\"","../node_modules/fs-extra/lib/fs/index.js","../node_modules/fs-extra/lib/util/stat.js","../node_modules/fs-extra/lib/remove/index.js","../node_modules/@babel/runtime/regenerator/index.js","../node_modules/@babel/runtime/helpers/asyncToGenerator.js","../node_modules/fs-extra/node_modules/jsonfile/utils.js","../node_modules/fs-extra/lib/output/index.js","../node_modules/@babel/runtime/helpers/objectSpread2.js","../external \"util\"","../external \"assert\"","../node_modules/fs-extra/lib/copy-sync/index.js","../node_modules/at-least-node/index.js","../node_modules/fs-extra/lib/util/utimes.js","../node_modules/fs-extra/lib/copy/index.js","../node_modules/image-size/lib/types.js","../node_modules/image-size/lib/types/ico.js","../node_modules/image-size/lib/index.js","../node_modules/@babel/runtime/helpers/defineProperty.js","../node_modules/graceful-fs/polyfills.js","../external \"constants\"","../node_modules/graceful-fs/legacy-streams.js","../external \"stream\"","../node_modules/graceful-fs/clone.js","../node_modules/fs-extra/lib/copy-sync/copy-sync.js","../node_modules/fs-extra/lib/mkdirs/make-dir.js","../node_modules/regenerator-runtime/runtime.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/fs-extra/lib/copy/copy.js","../node_modules/fs-extra/lib/empty/index.js","../node_modules/fs-extra/lib/remove/rimraf.js","../node_modules/fs-extra/lib/ensure/index.js","../node_modules/fs-extra/lib/ensure/file.js","../node_modules/fs-extra/lib/ensure/link.js","../node_modules/fs-extra/lib/ensure/symlink.js","../node_modules/fs-extra/lib/ensure/symlink-paths.js","../node_modules/fs-extra/lib/ensure/symlink-type.js","../node_modules/fs-extra/lib/json/index.js","../node_modules/fs-extra/lib/json/jsonfile.js","../node_modules/fs-extra/node_modules/jsonfile/index.js","../node_modules/fs-extra/lib/json/output-json.js","../node_modules/fs-extra/lib/json/output-json-sync.js","../node_modules/fs-extra/lib/move-sync/index.js","../node_modules/fs-extra/lib/move-sync/move-sync.js","../node_modules/fs-extra/lib/move/index.js","../node_modules/fs-extra/lib/move/move.js","../external \"process\"","../node_modules/dotenv/lib/main.js","../node_modules/image-size/lib/types/bmp.js","../node_modules/image-size/lib/types/cur.js","../node_modules/image-size/lib/types/dds.js","../node_modules/image-size/lib/types/gif.js","../node_modules/image-size/lib/types/icns.js","../node_modules/image-size/lib/types/jpg.js","../node_modules/image-size/lib/types/png.js","../node_modules/image-size/lib/types/psd.js","../node_modules/image-size/lib/types/svg.js","../node_modules/image-size/lib/types/tiff.js","../node_modules/image-size/lib/readUInt.js","../node_modules/image-size/lib/types/webp.js","../node_modules/image-size/lib/detector.js","type/base.ts","type/hsmTypes.ts","type/hState.ts","model/hsm.ts","model/presentation.ts","model/playback.ts","model/baseReducer.ts","selector/hsm.ts","selector/presentation.ts","../node_modules/uuid/dist/esm-browser/rng.js","../node_modules/uuid/dist/esm-browser/regex.js","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/validate.js","../node_modules/uuid/dist/esm-browser/v4.js","utility/utilities.ts","controller/hsm/hState.ts","controller/hsm/zoneHsm.ts","controller/hsm/imageState.ts","controller/hsm/videoState.ts","controller/hsm/mediaZoneHsm.ts","controller/hsm/playerHsm.ts","controller/hsm/eventHandler.ts","controller/hsm/hsm.ts","controller/hsm/mediaHState.ts","controller/hsmController.ts","controller/appController.ts","component/image.tsx","controller/device/player.ts","component/video.tsx","component/mediaZone.tsx","component/sign.tsx","component/BsPp.tsx"],"names":["root","factory","exports","module","define","amd","a","i","this","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","fun","cachedSetTimeout","setTimeout","defaultSetTimout","cachedClearTimeout","clearTimeout","defaultClearTimeout","currentQueue","marker","process","args","arguments","Item","unsupportedMethods","resolve","noop","relative","win32Runtime","assign","win32","posixRuntime","posix","normalizeRuntime","joinRuntime","resolveRuntime","isAbsoluteRuntime","relativeRuntime","dirnameRuntime","basenameRuntime","extnameRuntime","sepRuntime","delimiterRuntime","parseRuntime","formatRuntime","defaultExport","isWin","normalize","join","isAbsolute","dirname","basename","extname","sep","delimiter","parse","format","inspect","from","to","Error","isMac","platform","toLowerCase","navigator","indexOf","isBrowser","window","isNode","gracefulQueue","previousSymbol","fs","polyfills","legacy","clone","util","publishQueue","context","queue","for","debug","debuglog","test","NODE_DEBUG","apply","split","console","error","global","close","fs$close","fd","cb","err","retry","closeSync","fs$closeSync","on","equal","length","patch","gracefulify","createReadStream","path","options","ReadStream","createWriteStream","WriteStream","fs$readFile","readFile","go$readFile","code","enqueue","fs$writeFile","writeFile","data","go$writeFile","fs$appendFile","appendFile","go$appendFile","fs$readdir","readdir","go$readdir","push","files","sort","version","substr","legStreams","fs$ReadStream","open","that","flags","autoClose","destroy","emit","read","fs$WriteStream","set","val","configurable","FileReadStream","FileWriteStream","fs$open","go$open","elem","shift","TEST_GRACEFUL_FS_GLOBAL_PATCH","__patched","fromCallback","fn","Promise","reject","concat","res","fromPromise","slice","then","u","_makeDir","makeDir","makeDirSync","mkdirs","mkdirsSync","mkdirp","mkdirpSync","ensureDir","ensureDirSync","getOwnPropertyDescriptor","promises","pathExists","access","catch","pathExistsSync","existsSync","api","filter","keys","forEach","method","exists","filename","callback","buffer","offset","position","bytesRead","write","bytesWritten","writev","buffers","realpath","native","nodeSupportsBigInt","atLeastNode","stat","file","bigint","statSync","getStats","src","dest","all","srcStat","destStat","areIdentical","ino","dev","Number","MAX_SAFE_INTEGER","size","nlink","atimeMs","mtimeMs","ctimeMs","birthtimeMs","isSrcSubdir","srcArr","destArr","reduce","acc","cur","errMsg","funcName","checkPaths","callbackify","stats","isDirectory","checkPathsSync","getStatsSync","checkParentPaths","srcParent","destParent","checkParentPathsSync","rimraf","remove","removeSync","sync","asyncGeneratorStep","gen","_next","_throw","arg","info","done","self","undefined","stringify","obj","EOL","str","JSON","replacer","spaces","replace","stripBom","content","Buffer","isBuffer","toString","mkdir","outputFile","encoding","dir","itDoes","outputFileSync","writeFileSync","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","target","source","getOwnPropertyDescriptors","defineProperties","copySync","versions","node","map","x","parseInt","utimesMillis","atime","mtime","futimes","futimesErr","closeErr","utimesMillisSync","openSync","futimesSync","copy","typeHandlers","bmp","dds","gif","icns","ico","jpg","png","psd","svg","tiff","webp","getSizeFromOffset","readUInt8","getImageSize","imageIndex","readUInt16LE","nbImages","result","images","width","height","detector","MaxBufferSize","lookup","filepath","type","calculate","TypeError","input","descriptor","fstatSync","bufferSize","Math","min","readSync","syncFileToBuffer","fstat","asyncFileToBuffer","dimensions","e","types","writable","constants","origCwd","cwd","GRACEFUL_FS_PLATFORM","er","chdir","match","lchmod","O_WRONLY","O_SYMLINK","fchmod","err2","lchmodSync","ret","threw","fchmodSync","patchLchmod","lutimes","at","mt","er2","lutimesSync","_a","_b","_c","nextTick","patchLutimes","chown","chownFix","fchown","lchown","chmod","chmodFix","chownSync","chownFixSync","fchownSync","lchownSync","chmodSync","chmodFixSync","statFix","lstat","statFixSync","lstatSync","uid","gid","rename","fs$rename","start","Date","now","backoff","CB","stater","st","orig","chownErOk","getuid","fs$read","callback_","eagCounter","_","__","__proto__","fs$readSync","Stream","readable","paused","index","setEncoding","end","Infinity","pos","_read","busy","_queue","_open","flush","getOwnPropertyNames","startCopy","opts","dereference","srcMode","mkdirSync","copyDir","setDestMode","mkDirAndCopy","onDir","isFile","isCharacterDevice","isBlockDevice","overwrite","unlinkSync","copyFile","errorOnExist","mayCopyFile","onFile","isSymbolicLink","resolvedSrc","readlinkSync","resolvedDest","symlinkSync","copyLink","onLink","copyFileSync","preserveTimestamps","fileIsNotWritable","makeFileWritable","updatedSrcStat","setDestTimestamps","handleTimestamps","readdirSync","item","srcItem","destItem","copyDirItem","clobber","arch","warn","handleFilterAndCopy","useNativeRecursiveOption","checkPath","pth","processOptions","permissionError","errno","syscall","recursive","make","message","includes","runtime","Op","hasOwn","$Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","state","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","constructor","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","awrap","async","iter","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","arr","Array","isArray","_arr","_n","_d","_e","_s","_i","arrayLikeToArray","minLen","len","arr2","checkParentDir","dirExists","handleFilter","onInclude","include","unlink","setDestTimestampsAndMode","handleTimestampsAndMode","items","copyDirItems","readlink","symlink","emptyDir","deleteItem","emptyDirSync","emptydirSync","emptydir","assert","isWindows","defaults","maxBusyTries","busyTries","strictEqual","rimraf_","fixWinEPERM","rmdir","er3","fixWinEPERMSync","rmdirSync","originalEr","errState","f","rmkids","rimrafSync","startTime","rmkidsSync","link","createFile","createFileSync","ensureFile","ensureFileSync","createLink","createLinkSync","ensureLink","ensureLinkSync","createSymlink","createSymlinkSync","ensureSymlink","ensureSymlinkSync","makeFile","srcpath","dstpath","makeLink","destinationExists","linkSync","_mkdirs","_symlinkPaths","symlinkPaths","symlinkPathsSync","_symlinkType","symlinkType","symlinkTypeSync","toDst","toCwd","dstdir","relativeToDst","jsonFile","outputJson","outputJsonSync","outputJSON","outputJSONSync","writeJSON","writeJson","writeJSONSync","writeJsonSync","readJSON","readJson","readJSONSync","readJsonSync","readFileSync","_fs","universalify","shouldThrow","throws","reviver","jsonfile","moveSync","renameSync","moveAcrossDevice","doRename","move","destExists","log","RE_INI_KEY_VAL","RE_NEWLINES","NEWLINES_MATCH","Boolean","line","idx","keyValueArr","isDoubleQuoted","substring","trim","config","dotenvPath","parsed","readUInt32LE","abs","readInt32LE","gifRegexp","signature","ICON_TYPE_SIZE","ICON","icm4","icm8","ics4","ics8","is32","s8mk","icp4","icl4","icl8","il32","l8mk","icp5","ic11","ich4","ich8","ih32","h8mk","icp6","ic12","it32","t8mk","ic07","ic08","ic13","ic09","ic14","ic10","readImageHeader","imageOffset","imageLengthOffset","readUInt32BE","imageHeader","imageSize","bufferLength","fileLength","extractSize","readUInt16BE","validateBuffer","pngFriedChunkName","chunkName","svgReg","extractorRegExps","parseViewbox","viewbox","bounds","attrs","parseAttributes","calculateByDimensions","ratio","floor","calculateByViewbox","readUInt","readValue","isBigEndian","low","nextTag","hex4","determineEndianness","tags","extractTags","ifdOffset","fileSize","endBuffer","readIFD","bits","riffHeader","webpHeader","vp8Header","chunkHeader","extendedHeader","readUIntLE","calculateExtended","readInt16LE","calculateLossy","calculateLossless","detect","BrightSign","BaconPreview","Dev","freeze","RuntimeEnvironment","bsPpStateFromState","bsPpModelState","bspp","bsdm","bacdm","bsPlayer","playback","presentationData","hsmState","Player","VideoOrImages","HsmType","MediaHState","MrssState","Top","Playing","Waiting","Image","Mrss","Video","SuperState","HStateType","ADD_HSM","UPDATE_HSM_PROPERTIES","SET_HSM_TOP","SET_HSM_INITIALIZED","ADD_HSTATE","SET_MEDIA_H_STATE_TIMEOUT_ID","SET_MEDIA_H_STATE_PARAMETER_DATA","SET_ACTIVE_HSTATE","QUEUE_HSM_EVENT","DEQUEUE_HSM_EVENT","addHsm","hsm","payload","updateHsmProperties","params","setHsmTop","hsmId","topStateId","setHsmInitialized","id","initialized","setActiveHState","activeState","addHState","hStateSpecification","superStateId","setMediaHStateTimeoutId","hStateId","timeoutId","setMediaHStateParameter","parameterName","parameterValue","queueHsmEvent","event","dequeueHsmEvent","initialHsmByIdState","initialHStateByIdState","initialHsmEventQueue","hsmReducer","hsmById","action","mediaStateIdToHState","updatedHsm","properties","newState","activeStateId","hStateById","updatedHState","mediaHState","newMediaHState","newMediaHStateData","mediaStateData","newMediaHStateParamsData","hsmEventQueue","isValidHsmState","UPDATE_PRESENTATION_DATA","UPDATE_RUNTIME_ENVIRONMENT","UPDATE_PRESENTATION_SRC_DIRECTORY","UPDATE_SYNC_SPEC_FILE_MAP","UPDATE_AUTOSCHEDULE","UPDATE_SCREEN_DIMENSIONS","updatePresentationData","presentationDataState","isValidPresentationDataState","updateRuntimeEnvironment","runtimeEnvironment","updatePresentationSrcDirectory","srcDirectory","updatePresentationSyncSpecFileMap","syncSpecFileMap","updatePresentationAutoschedule","autoSchedule","updateScreenDimensions","screenDimensions","presentationDataDefaults","presentationDataReducer","SET_VIDEO_ELEMENT_REF","setVideoElementRef","videoElementRef","playbackDefaults","playbackReducer","enableBatching","bsPpReducer","isValidBsPpModelState","isValidBsPpModelStateShallow","getHsmMap","getHsmById","getHsmByName","hsmName","bsPpState","hsmMap","getActiveHStateIdByHsmId","getHStateById","hState","getHStateByName","hStateMap","getHStateByMediaStateId","mediaStateId","getHsmInitialized","getZoneHsmList","hsmList","getZoneHsmFromZoneId","zoneId","zoneHsm","getActiveMediaStateId","activeHState","getActiveMrssDisplayIndex","mediaState","contentItem","MrssFeed","mrssState","displayIndex","getEvents","getIsHsmInitialized","getRuntimeEnvironment","getSrcDirectory","getScreenDimensions","getSyncSpecFileMap","getAutoschedule","getPathFromAssetName","assetName","assetItems","assetItem","getAssetPath","getPoolFilePath","fileName","poolAssetFiles","rootDirectory","syncSpecDownload","getPoolAssetFiles","getSyncSpecFile","syncSpecFile","filePath","fileStr","getSyncSpecReferencedFile","rootPath","getFeedPoolDirectory","getFeedPoolFilePath","hashValue","feedPoolDirectory","hashValueLength","dir1","dir2","feedFileName","feedPoolFileExists","feedPoolPath","getFeedCacheRoot","getRandomValues","crypto","msCrypto","rnds8","Uint8Array","rng","validate","uuid","REGEX","byteToHex","v4","buf","rnds","random","newBsPpId","calculateAspectRatioFit","srcWidth","srcHeight","maxWidth","maxHeight","createHState","dispatch","createHStateSpecification","createZoneHsm","hsmType","hsmData","getState","createHsm","stTop","createImageState","STImageStateEventHandler","stateData","EventType","launchTimer","mediaHStateExitHandler","nextStateId","mediaHStateEventHandler","createVideoState","STVideoStateEventHandler","createMediaZoneHsm","bsdmZone","y","initialMediaStateId","bsdmMediaState","createMediaHState","imageHStateId","imageHState","imageStateIdToHState","videoHStateId","videoHState","videoStateIdToHState","initializeVideoOrImagesZoneHsm","initialMediaState","videoOrImagesZoneHsmGetInitialState","initialState","createPlayerHsm","playerHsmId","stTopId","stPlayerId","initializePlayerHsm","playerHsm","initializeHsm","playerHsmGetInitialState","launchSchedulePlayback","STPlayerEventHandler","STPlayingEventHandler","launchPresentationPlayback","STWaitingEventHandler","stPlayingState","presentationName","openSign","hsmConstructorFunction","addHsmEvent","HStateEventHandler","retVal","STTopEventHandler","hsmInitialPseudoStateHandler","topState","emptyEvent","entryEvent","initEvent","tmpActiveState","sourceState","entryStates","entryStateIndex","entryState","completeHsmInitialization","constructorFunction","constructorHandler","hsmDispatch","status","exitEvent","ip","iq","aState","bState","cState","dState","_bsPpStore","dmState","matchedEvent","getMatchedEvent","executeEventMatchAction","transitionList","None","ReturnToPriorState","targetMediaStateId","mediaZoneHsmData","targetHState","targetMediaState","dispatchedEvent","eventList","mediaStateEvent","eventId","Timer","interval","timeoutHandler","callbackParams","EventData","HsmTimerType","initPlayer","store","launchHsm","events","dispatchHsmEvent","initPresentation","loadPresentationData","setRuntimeEnvironment","setSrcDirectory","setSyncSpec","setAutoschedule","env","SCREEN_WIDTH","SCREEN_HEIGHT","SOURCE_DIRECTORY","getLocalSyncSpecFilePath","getLocalSyncSpec","localSyncSpecFilePath","getNetworkedSyncSpecFilePath","getNetworkedSyncSpec","getSyncSpecFilePath","syncSpecFilePath","syncSpecStr","syncSpec","readSyncSpec","download","autoplayFileName","scheduledPresentations","presentationToSchedule","bpfxState","signState","render","props","scaledDimensions","zoneWidth","zoneHeight","left","top","style","alt","ownProps","postVideoEnd","MediaEnd","handleSetVideoElementRef","onSetVideoElementRef","autoPlay","ref","onEnded","onVideoEnd","renderMediaItem","mediaType","MediaZone","zone","mrssDisplayIndex","renderMediaZone","absolutePosition","renderTickerZone","renderZone","zoneIds","Sign","componentDidMount","onInitPresentation","initializationComplete","zones","allZones","BsPp","autoschedule"],"mappings":"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,gBACA,SAeA,kBAGA,oBACA,GACA,cAEA,yBAEA,6CACA,qBAIA,OAHA,OACA,YAEA,EAIA,MA+FA,cACA,QACA,0CACA,SACA,iDACA,oBACA,wBACA,6BAEA,YACA,yBACA,KACA,0BAEA,KACA,8BADA,EA7GA,MACA,KACA,SAIA,qBACA,EApCA,YACA,SAMA,OAJA,yBACA,WAGA,EA6BA,IAQA,GANA,eACA,iCAKA,OACA,sDACA,YAIA,iBACA,SACA,4BACA,8CAEA,QACA,6DAEA,QACA,yDAEA,QACA,YAIA,IA2CA,EA3CA,iBAA4C,KA6B5C,OA1BA,OACA,KACA,aAIA,OAEA,gBADA,uBACA,KAIA,OACA,yCAIA,OACA,0CAIA,OACA,YAGA,6BAIA,IACA,KACA,sDAEA,iCAIA,eAIA,EADA,EAsCA,oBAEA,IADA,SACA,eAAmC,MAAO,EAC1C,eACA,iBACA,eAEA,WASA,OANA,uBACA,kBACA,iBACA,UAGA,EArDA,YAEA,mBACA,yBAIA,aA6GA,gBAQA,OANA,wBAGA,OADA,gBACA,6CACG,GAEH,GACA,MACA,mBACA,IACA,gBACA,IACA,KAGA,iCA5HA,SAxBA,YA+CA,cACA,+CAwBA,wBACA,UAsCA,IArCA,yCAAyD,aACzD,IAEA,EADA,MACA,uCAEA,gCAGA,QACA,mCAGA,SACA,aAEA,IACA,2BAEA,EADA,KACA,kBAEA,kBAEA,mBAEA,EADA,EACA,+BACA,gBACW,qBAEX,oCACA,iBACW,YAIX,qCAGA,MACA,uBACA,UAEA,wBACA,uCACA,yBACA,wBAEA,wBACA,oBACA,wBACA,yBAIA,gBA2BA,cACA,wBAIA,cACA,2BAIA,cACA,gBASA,cACA,0BAIA,cACA,0BASA,cACA,kBAIA,cACA,sCAIA,cACA,oCAIA,cACA,oCAIA,cACA,cACA,6CAIA,cACA,4BAgBA,cACA,yCAIA,cACA,8CApbAA,EAAA,qBAIA,GAHA,OACA,wBACA,mBACA,KACA,0CACA,YACA,gBACA,kCACA,uCAGA,kBAGA,aAoCAA,EAAA,UAIAwF,EAAA,QACA,YACA,cACA,iBACA,eACA,cACA,aACA,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","file":"main.bsuit.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 79);\n","module.exports = require(\"lodash\");","module.exports = require(\"@brightsign/bsdatamodel\");","module.exports = require(\"react\");","module.exports = require(\"@brightsign/bscore\");","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"isomorphic-path.browser\"] = factory();\n\telse\n\t\troot[\"isomorphic-path.browser\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4e90465e936ecc2b3ee8","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/process/browser.js\n// module id = 0\n// module chunks = 0","import { win32 as win32Base, posix as posixBase } from 'path/path';\nimport { isWin, isBrowser } from './platform';\nimport { noop } from './noop';\n\nconst unsupportedMethods = {\n  resolve: noop,\n  relative: noop,\n};\n\nconst win32Runtime = Object.assign({}, win32Base, unsupportedMethods);\nconst posixRuntime = Object.assign({}, posixBase, unsupportedMethods);\n\nlet defaultExport = {win32: win32Runtime, posix: posixRuntime};\nif (isWin()) {\n  defaultExport = Object.assign({}, defaultExport, win32Runtime);\n} else {\n  defaultExport = Object.assign({}, defaultExport, posixRuntime);\n}\n\nlet normalizeRuntime;\nlet joinRuntime;\nlet resolveRuntime;\nlet isAbsoluteRuntime;\nlet relativeRuntime;\nlet dirnameRuntime;\nlet basenameRuntime;\nlet extnameRuntime;\nlet sepRuntime;\nlet delimiterRuntime;\nlet parseRuntime;\nlet formatRuntime;\n\nif (isWin()) {\n  normalizeRuntime = win32Runtime.normalize;\n  joinRuntime = win32Runtime.join;\n  resolveRuntime = win32Runtime.resolve;\n  isAbsoluteRuntime = win32Runtime.isAbsolute;\n  relativeRuntime = win32Runtime.relative;\n  dirnameRuntime = win32Runtime.dirname;\n  basenameRuntime = win32Runtime.basename;\n  extnameRuntime = win32Runtime.extname;\n  sepRuntime = win32Runtime.sep;\n  delimiterRuntime = win32Runtime.delimiter;\n  parseRuntime = win32Runtime.parse;\n  formatRuntime = win32Runtime.format;\n} else {\n  normalizeRuntime = posixRuntime.normalize;\n  joinRuntime = posixRuntime.join;\n  resolveRuntime = posixRuntime.resolve;\n  isAbsoluteRuntime = posixRuntime.isAbsolute;\n  relativeRuntime = posixRuntime.relative;\n  dirnameRuntime = posixRuntime.dirname;\n  basenameRuntime = posixRuntime.basename;\n  extnameRuntime = posixRuntime.extname;\n  sepRuntime = posixRuntime.sep;\n  delimiterRuntime = posixRuntime.delimiter;\n  parseRuntime = posixRuntime.parse;\n  formatRuntime = posixRuntime.format;\n}\n\nexport default defaultExport;\nexport {\n  normalizeRuntime as normalize,\n  joinRuntime as join,\n  resolveRuntime as resolve,\n  isAbsoluteRuntime as isAbsolute,\n  relativeRuntime as relative,\n  dirnameRuntime as dirname,\n  basenameRuntime as basename,\n  extnameRuntime as extname,\n  sepRuntime as sep,\n  delimiterRuntime as delimiter,\n  parseRuntime as parse,\n  formatRuntime as format,\n  posixRuntime as posix,\n  win32Runtime as win32,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/path.browser.ts","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/inherits/inherits_browser.js\n// module id = 2\n// module chunks = 0","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/node-libs-browser/~/util/support/isBufferBrowser.js\n// module id = 3\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/node-libs-browser/~/util/util.js\n// module id = 4\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n'use strict';\r\n\r\n\r\nvar isWindows = process.platform === 'win32';\r\nvar util = require('util');\r\n\r\n\r\n// resolves . and .. elements in a path array with directory names there\r\n// must be no slashes or device names (c:\\) in the array\r\n// (so also no leading and trailing slashes - it does not distinguish\r\n// relative and absolute paths)\r\nfunction normalizeArray(parts, allowAboveRoot) {\r\n  var res = [];\r\n  for (var i = 0; i < parts.length; i++) {\r\n    var p = parts[i];\r\n\r\n    // ignore empty parts\r\n    if (!p || p === '.')\r\n      continue;\r\n\r\n    if (p === '..') {\r\n      if (res.length && res[res.length - 1] !== '..') {\r\n        res.pop();\r\n      } else if (allowAboveRoot) {\r\n        res.push('..');\r\n      }\r\n    } else {\r\n      res.push(p);\r\n    }\r\n  }\r\n\r\n  return res;\r\n}\r\n\r\n// returns an array with empty elements removed from either end of the input\r\n// array or the original array if no elements need to be removed\r\nfunction trimArray(arr) {\r\n  var lastIndex = arr.length - 1;\r\n  var start = 0;\r\n  for (; start <= lastIndex; start++) {\r\n    if (arr[start])\r\n      break;\r\n  }\r\n\r\n  var end = lastIndex;\r\n  for (; end >= 0; end--) {\r\n    if (arr[end])\r\n      break;\r\n  }\r\n\r\n  if (start === 0 && end === lastIndex)\r\n    return arr;\r\n  if (start > end)\r\n    return [];\r\n  return arr.slice(start, end + 1);\r\n}\r\n\r\n// Regex to split a windows path into three parts: [*, device, slash,\r\n// tail] windows-only\r\nvar splitDeviceRe =\r\n    /^([a-zA-Z]:|[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/]+[^\\\\\\/]+)?([\\\\\\/])?([\\s\\S]*?)$/;\r\n\r\n// Regex to split the tail part of the above into [*, dir, basename, ext]\r\nvar splitTailRe =\r\n    /^([\\s\\S]*?)((?:\\.{1,2}|[^\\\\\\/]+?|)(\\.[^.\\/\\\\]*|))(?:[\\\\\\/]*)$/;\r\n\r\nvar win32 = {};\r\n\r\n// Function to split a filename into [root, dir, basename, ext]\r\nfunction win32SplitPath(filename) {\r\n  // Separate device+slash from tail\r\n  var result = splitDeviceRe.exec(filename),\r\n      device = (result[1] || '') + (result[2] || ''),\r\n      tail = result[3] || '';\r\n  // Split the tail into dir, basename and extension\r\n  var result2 = splitTailRe.exec(tail),\r\n      dir = result2[1],\r\n      basename = result2[2],\r\n      ext = result2[3];\r\n  return [device, dir, basename, ext];\r\n}\r\n\r\nfunction win32StatPath(path) {\r\n  var result = splitDeviceRe.exec(path),\r\n      device = result[1] || '',\r\n      isUnc = !!device && device[1] !== ':';\r\n  return {\r\n    device: device,\r\n    isUnc: isUnc,\r\n    isAbsolute: isUnc || !!result[2], // UNC paths are always absolute\r\n    tail: result[3]\r\n  };\r\n}\r\n\r\nfunction normalizeUNCRoot(device) {\r\n  return '\\\\\\\\' + device.replace(/^[\\\\\\/]+/, '').replace(/[\\\\\\/]+/g, '\\\\');\r\n}\r\n\r\n// path.resolve([from ...], to)\r\nwin32.resolve = function() {\r\n  var resolvedDevice = '',\r\n      resolvedTail = '',\r\n      resolvedAbsolute = false;\r\n\r\n  for (var i = arguments.length - 1; i >= -1; i--) {\r\n    var path;\r\n    if (i >= 0) {\r\n      path = arguments[i];\r\n    } else if (!resolvedDevice) {\r\n      path = process.cwd();\r\n    } else {\r\n      // Windows has the concept of drive-specific current working\r\n      // directories. If we've resolved a drive letter but not yet an\r\n      // absolute path, get cwd for that drive. We're sure the device is not\r\n      // an unc path at this points, because unc paths are always absolute.\r\n      path = process.env['=' + resolvedDevice];\r\n      // Verify that a drive-local cwd was found and that it actually points\r\n      // to our drive. If not, default to the drive's root.\r\n      if (!path || path.substr(0, 3).toLowerCase() !==\r\n          resolvedDevice.toLowerCase() + '\\\\') {\r\n        path = resolvedDevice + '\\\\';\r\n      }\r\n    }\r\n\r\n    // Skip empty and invalid entries\r\n    if (!util.isString(path)) {\r\n      throw new TypeError('Arguments to path.resolve must be strings');\r\n    } else if (!path) {\r\n      continue;\r\n    }\r\n\r\n    var result = win32StatPath(path),\r\n        device = result.device,\r\n        isUnc = result.isUnc,\r\n        isAbsolute = result.isAbsolute,\r\n        tail = result.tail;\r\n\r\n    if (device &&\r\n        resolvedDevice &&\r\n        device.toLowerCase() !== resolvedDevice.toLowerCase()) {\r\n      // This path points to another device so it is not applicable\r\n      continue;\r\n    }\r\n\r\n    if (!resolvedDevice) {\r\n      resolvedDevice = device;\r\n    }\r\n    if (!resolvedAbsolute) {\r\n      resolvedTail = tail + '\\\\' + resolvedTail;\r\n      resolvedAbsolute = isAbsolute;\r\n    }\r\n\r\n    if (resolvedDevice && resolvedAbsolute) {\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Convert slashes to backslashes when `resolvedDevice` points to an UNC\r\n  // root. Also squash multiple slashes into a single one where appropriate.\r\n  if (isUnc) {\r\n    resolvedDevice = normalizeUNCRoot(resolvedDevice);\r\n  }\r\n\r\n  // At this point the path should be resolved to a full absolute path,\r\n  // but handle relative paths to be safe (might happen when process.cwd()\r\n  // fails)\r\n\r\n  // Normalize the tail path\r\n  resolvedTail = normalizeArray(resolvedTail.split(/[\\\\\\/]+/),\r\n                                !resolvedAbsolute).join('\\\\');\r\n\r\n  return (resolvedDevice + (resolvedAbsolute ? '\\\\' : '') + resolvedTail) ||\r\n         '.';\r\n};\r\n\r\n\r\nwin32.normalize = function(path) {\r\n  var result = win32StatPath(path),\r\n      device = result.device,\r\n      isUnc = result.isUnc,\r\n      isAbsolute = result.isAbsolute,\r\n      tail = result.tail,\r\n      trailingSlash = /[\\\\\\/]$/.test(tail);\r\n\r\n  // Normalize the tail path\r\n  tail = normalizeArray(tail.split(/[\\\\\\/]+/), !isAbsolute).join('\\\\');\r\n\r\n  if (!tail && !isAbsolute) {\r\n    tail = '.';\r\n  }\r\n  if (tail && trailingSlash) {\r\n    tail += '\\\\';\r\n  }\r\n\r\n  // Convert slashes to backslashes when `device` points to an UNC root.\r\n  // Also squash multiple slashes into a single one where appropriate.\r\n  if (isUnc) {\r\n    device = normalizeUNCRoot(device);\r\n  }\r\n\r\n  return device + (isAbsolute ? '\\\\' : '') + tail;\r\n};\r\n\r\n\r\nwin32.isAbsolute = function(path) {\r\n  return win32StatPath(path).isAbsolute;\r\n};\r\n\r\nwin32.join = function() {\r\n  var paths = [];\r\n  for (var i = 0; i < arguments.length; i++) {\r\n    var arg = arguments[i];\r\n    if (!util.isString(arg)) {\r\n      throw new TypeError('Arguments to path.join must be strings');\r\n    }\r\n    if (arg) {\r\n      paths.push(arg);\r\n    }\r\n  }\r\n\r\n  var joined = paths.join('\\\\');\r\n\r\n  // Make sure that the joined path doesn't start with two slashes, because\r\n  // normalize() will mistake it for an UNC path then.\r\n  //\r\n  // This step is skipped when it is very clear that the user actually\r\n  // intended to point at an UNC path. This is assumed when the first\r\n  // non-empty string arguments starts with exactly two slashes followed by\r\n  // at least one more non-slash character.\r\n  //\r\n  // Note that for normalize() to treat a path as an UNC path it needs to\r\n  // have at least 2 components, so we don't filter for that here.\r\n  // This means that the user can use join to construct UNC paths from\r\n  // a server name and a share name; for example:\r\n  //   path.join('//server', 'share') -> '\\\\\\\\server\\\\share\\')\r\n  if (!/^[\\\\\\/]{2}[^\\\\\\/]/.test(paths[0])) {\r\n    joined = joined.replace(/^[\\\\\\/]{2,}/, '\\\\');\r\n  }\r\n\r\n  return win32.normalize(joined);\r\n};\r\n\r\n\r\n// path.relative(from, to)\r\n// it will solve the relative path from 'from' to 'to', for instance:\r\n// from = 'C:\\\\orandea\\\\test\\\\aaa'\r\n// to = 'C:\\\\orandea\\\\impl\\\\bbb'\r\n// The output of the function should be: '..\\\\..\\\\impl\\\\bbb'\r\nwin32.relative = function(from, to) {\r\n  from = win32.resolve(from);\r\n  to = win32.resolve(to);\r\n\r\n  // windows is not case sensitive\r\n  var lowerFrom = from.toLowerCase();\r\n  var lowerTo = to.toLowerCase();\r\n\r\n  var toParts = trimArray(to.split('\\\\'));\r\n\r\n  var lowerFromParts = trimArray(lowerFrom.split('\\\\'));\r\n  var lowerToParts = trimArray(lowerTo.split('\\\\'));\r\n\r\n  var length = Math.min(lowerFromParts.length, lowerToParts.length);\r\n  var samePartsLength = length;\r\n  for (var i = 0; i < length; i++) {\r\n    if (lowerFromParts[i] !== lowerToParts[i]) {\r\n      samePartsLength = i;\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (samePartsLength == 0) {\r\n    return to;\r\n  }\r\n\r\n  var outputParts = [];\r\n  for (var i = samePartsLength; i < lowerFromParts.length; i++) {\r\n    outputParts.push('..');\r\n  }\r\n\r\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\r\n\r\n  return outputParts.join('\\\\');\r\n};\r\n\r\n\r\nwin32._makeLong = function(path) {\r\n  // Note: this will *probably* throw somewhere.\r\n  if (!util.isString(path))\r\n    return path;\r\n\r\n  if (!path) {\r\n    return '';\r\n  }\r\n\r\n  var resolvedPath = win32.resolve(path);\r\n\r\n  if (/^[a-zA-Z]\\:\\\\/.test(resolvedPath)) {\r\n    // path is local filesystem path, which needs to be converted\r\n    // to long UNC path.\r\n    return '\\\\\\\\?\\\\' + resolvedPath;\r\n  } else if (/^\\\\\\\\[^?.]/.test(resolvedPath)) {\r\n    // path is network UNC path, which needs to be converted\r\n    // to long UNC path.\r\n    return '\\\\\\\\?\\\\UNC\\\\' + resolvedPath.substring(2);\r\n  }\r\n\r\n  return path;\r\n};\r\n\r\n\r\nwin32.dirname = function(path) {\r\n  var result = win32SplitPath(path),\r\n      root = result[0],\r\n      dir = result[1];\r\n\r\n  if (!root && !dir) {\r\n    // No dirname whatsoever\r\n    return '.';\r\n  }\r\n\r\n  if (dir) {\r\n    // It has a dirname, strip trailing slash\r\n    dir = dir.substr(0, dir.length - 1);\r\n  }\r\n\r\n  return root + dir;\r\n};\r\n\r\n\r\nwin32.basename = function(path, ext) {\r\n  var f = win32SplitPath(path)[2];\r\n  // TODO: make this comparison case-insensitive on windows?\r\n  if (ext && f.substr(-1 * ext.length) === ext) {\r\n    f = f.substr(0, f.length - ext.length);\r\n  }\r\n  return f;\r\n};\r\n\r\n\r\nwin32.extname = function(path) {\r\n  return win32SplitPath(path)[3];\r\n};\r\n\r\n\r\nwin32.format = function(pathObject) {\r\n  if (!util.isObject(pathObject)) {\r\n    throw new TypeError(\r\n        \"Parameter 'pathObject' must be an object, not \" + typeof pathObject\r\n    );\r\n  }\r\n\r\n  var root = pathObject.root || '';\r\n\r\n  if (!util.isString(root)) {\r\n    throw new TypeError(\r\n        \"'pathObject.root' must be a string or undefined, not \" +\r\n        typeof pathObject.root\r\n    );\r\n  }\r\n\r\n  var dir = pathObject.dir;\r\n  var base = pathObject.base || '';\r\n  if (!dir) {\r\n    return base;\r\n  }\r\n  if (dir[dir.length - 1] === win32.sep) {\r\n    return dir + base;\r\n  }\r\n  return dir + win32.sep + base;\r\n};\r\n\r\n\r\nwin32.parse = function(pathString) {\r\n  if (!util.isString(pathString)) {\r\n    throw new TypeError(\r\n        \"Parameter 'pathString' must be a string, not \" + typeof pathString\r\n    );\r\n  }\r\n  var allParts = win32SplitPath(pathString);\r\n  if (!allParts || allParts.length !== 4) {\r\n    throw new TypeError(\"Invalid path '\" + pathString + \"'\");\r\n  }\r\n  return {\r\n    root: allParts[0],\r\n    dir: allParts[0] + allParts[1].slice(0, -1),\r\n    base: allParts[2],\r\n    ext: allParts[3],\r\n    name: allParts[2].slice(0, allParts[2].length - allParts[3].length)\r\n  };\r\n};\r\n\r\n\r\nwin32.sep = '\\\\';\r\nwin32.delimiter = ';';\r\n\r\n\r\n// Split a filename into [root, dir, basename, ext], unix version\r\n// 'root' is just a slash, or nothing.\r\nvar splitPathRe =\r\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\r\nvar posix = {};\r\n\r\n\r\nfunction posixSplitPath(filename) {\r\n  return splitPathRe.exec(filename).slice(1);\r\n}\r\n\r\n\r\n// path.resolve([from ...], to)\r\n// posix version\r\nposix.resolve = function() {\r\n  var resolvedPath = '',\r\n      resolvedAbsolute = false;\r\n\r\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\r\n    var path = (i >= 0) ? arguments[i] : process.cwd();\r\n\r\n    // Skip empty and invalid entries\r\n    if (!util.isString(path)) {\r\n      throw new TypeError('Arguments to path.resolve must be strings');\r\n    } else if (!path) {\r\n      continue;\r\n    }\r\n\r\n    resolvedPath = path + '/' + resolvedPath;\r\n    resolvedAbsolute = path[0] === '/';\r\n  }\r\n\r\n  // At this point the path should be resolved to a full absolute path, but\r\n  // handle relative paths to be safe (might happen when process.cwd() fails)\r\n\r\n  // Normalize the path\r\n  resolvedPath = normalizeArray(resolvedPath.split('/'),\r\n                                !resolvedAbsolute).join('/');\r\n\r\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\r\n};\r\n\r\n// path.normalize(path)\r\n// posix version\r\nposix.normalize = function(path) {\r\n  var isAbsolute = posix.isAbsolute(path),\r\n      trailingSlash = path && path[path.length - 1] === '/';\r\n\r\n  // Normalize the path\r\n  path = normalizeArray(path.split('/'), !isAbsolute).join('/');\r\n\r\n  if (!path && !isAbsolute) {\r\n    path = '.';\r\n  }\r\n  if (path && trailingSlash) {\r\n    path += '/';\r\n  }\r\n\r\n  return (isAbsolute ? '/' : '') + path;\r\n};\r\n\r\n// posix version\r\nposix.isAbsolute = function(path) {\r\n  return path.charAt(0) === '/';\r\n};\r\n\r\n// posix version\r\nposix.join = function() {\r\n  var path = '';\r\n  for (var i = 0; i < arguments.length; i++) {\r\n    var segment = arguments[i];\r\n    if (!util.isString(segment)) {\r\n      throw new TypeError('Arguments to path.join must be strings');\r\n    }\r\n    if (segment) {\r\n      if (!path) {\r\n        path += segment;\r\n      } else {\r\n        path += '/' + segment;\r\n      }\r\n    }\r\n  }\r\n  return posix.normalize(path);\r\n};\r\n\r\n\r\n// path.relative(from, to)\r\n// posix version\r\nposix.relative = function(from, to) {\r\n  from = posix.resolve(from).substr(1);\r\n  to = posix.resolve(to).substr(1);\r\n\r\n  var fromParts = trimArray(from.split('/'));\r\n  var toParts = trimArray(to.split('/'));\r\n\r\n  var length = Math.min(fromParts.length, toParts.length);\r\n  var samePartsLength = length;\r\n  for (var i = 0; i < length; i++) {\r\n    if (fromParts[i] !== toParts[i]) {\r\n      samePartsLength = i;\r\n      break;\r\n    }\r\n  }\r\n\r\n  var outputParts = [];\r\n  for (var i = samePartsLength; i < fromParts.length; i++) {\r\n    outputParts.push('..');\r\n  }\r\n\r\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\r\n\r\n  return outputParts.join('/');\r\n};\r\n\r\n\r\nposix._makeLong = function(path) {\r\n  return path;\r\n};\r\n\r\n\r\nposix.dirname = function(path) {\r\n  var result = posixSplitPath(path),\r\n      root = result[0],\r\n      dir = result[1];\r\n\r\n  if (!root && !dir) {\r\n    // No dirname whatsoever\r\n    return '.';\r\n  }\r\n\r\n  if (dir) {\r\n    // It has a dirname, strip trailing slash\r\n    dir = dir.substr(0, dir.length - 1);\r\n  }\r\n\r\n  return root + dir;\r\n};\r\n\r\n\r\nposix.basename = function(path, ext) {\r\n  var f = posixSplitPath(path)[2];\r\n  // TODO: make this comparison case-insensitive on windows?\r\n  if (ext && f.substr(-1 * ext.length) === ext) {\r\n    f = f.substr(0, f.length - ext.length);\r\n  }\r\n  return f;\r\n};\r\n\r\n\r\nposix.extname = function(path) {\r\n  return posixSplitPath(path)[3];\r\n};\r\n\r\n\r\nposix.format = function(pathObject) {\r\n  if (!util.isObject(pathObject)) {\r\n    throw new TypeError(\r\n        \"Parameter 'pathObject' must be an object, not \" + typeof pathObject\r\n    );\r\n  }\r\n\r\n  var root = pathObject.root || '';\r\n\r\n  if (!util.isString(root)) {\r\n    throw new TypeError(\r\n        \"'pathObject.root' must be a string or undefined, not \" +\r\n        typeof pathObject.root\r\n    );\r\n  }\r\n\r\n  var dir = pathObject.dir ? pathObject.dir + posix.sep : '';\r\n  var base = pathObject.base || '';\r\n  return dir + base;\r\n};\r\n\r\n\r\nposix.parse = function(pathString) {\r\n  if (!util.isString(pathString)) {\r\n    throw new TypeError(\r\n        \"Parameter 'pathString' must be a string, not \" + typeof pathString\r\n    );\r\n  }\r\n  var allParts = posixSplitPath(pathString);\r\n  if (!allParts || allParts.length !== 4) {\r\n    throw new TypeError(\"Invalid path '\" + pathString + \"'\");\r\n  }\r\n  allParts[1] = allParts[1] || '';\r\n  allParts[2] = allParts[2] || '';\r\n  allParts[3] = allParts[3] || '';\r\n\r\n  return {\r\n    root: allParts[0],\r\n    dir: allParts[0] + allParts[1].slice(0, -1),\r\n    base: allParts[2],\r\n    ext: allParts[3],\r\n    name: allParts[2].slice(0, allParts[2].length - allParts[3].length)\r\n  };\r\n};\r\n\r\n\r\nposix.sep = '/';\r\nposix.delimiter = ':';\r\n\r\n\r\nif (isWindows)\r\n  module.exports = win32;\r\nelse /* posix */\r\n  module.exports = posix;\r\n\r\nmodule.exports.posix = posix;\r\nmodule.exports.win32 = win32;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/path/path.js\n// module id = 5\n// module chunks = 0","export * from './path';\n\n\n\n// WEBPACK FOOTER //\n// ./lib/index.ts","export const noop = (from: string, to: string): string => {\n  throw Error('method unsupported in isomorphic-path');\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/noop.ts","export const isMac = (): boolean => {\n  if (process\n  && typeof process.platform === 'string'\n  && process.platform.toLowerCase() === 'darwin') {\n    return true;\n  } else if (typeof navigator !== 'undefined'\n  && typeof navigator.platform === 'string'\n  && navigator.platform.toLowerCase().indexOf('mac') > -1) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\nexport const isWin = (): boolean => {\n  if (process\n  && typeof process.platform === 'string'\n  && process.platform.toLowerCase() === 'win32') {\n    return true;\n  } else if (typeof navigator !== 'undefined'\n    && typeof navigator.platform === 'string'\n    && navigator.platform.toLowerCase().indexOf('win') > -1) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\nexport const isBrowser = (): boolean => {\n  return typeof window !== 'undefined';\n};\n\nexport const isNode = (): boolean => {\n  return typeof window === 'undefined' && typeof process !== 'undefined';\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/platform.ts","var fs = require('fs')\nvar polyfills = require('./polyfills.js')\nvar legacy = require('./legacy-streams.js')\nvar clone = require('./clone.js')\n\nvar util = require('util')\n\n/* istanbul ignore next - node 0.x polyfill */\nvar gracefulQueue\nvar previousSymbol\n\n/* istanbul ignore else - node 0.x polyfill */\nif (typeof Symbol === 'function' && typeof Symbol.for === 'function') {\n  gracefulQueue = Symbol.for('graceful-fs.queue')\n  // This is used in testing by future versions\n  previousSymbol = Symbol.for('graceful-fs.previous')\n} else {\n  gracefulQueue = '___graceful-fs.queue'\n  previousSymbol = '___graceful-fs.previous'\n}\n\nfunction noop () {}\n\nfunction publishQueue(context, queue) {\n  Object.defineProperty(context, gracefulQueue, {\n    get: function() {\n      return queue\n    }\n  })\n}\n\nvar debug = noop\nif (util.debuglog)\n  debug = util.debuglog('gfs4')\nelse if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || ''))\n  debug = function() {\n    var m = util.format.apply(util, arguments)\n    m = 'GFS4: ' + m.split(/\\n/).join('\\nGFS4: ')\n    console.error(m)\n  }\n\n// Once time initialization\nif (!fs[gracefulQueue]) {\n  // This queue can be shared by multiple loaded instances\n  var queue = global[gracefulQueue] || []\n  publishQueue(fs, queue)\n\n  // Patch fs.close/closeSync to shared queue version, because we need\n  // to retry() whenever a close happens *anywhere* in the program.\n  // This is essential when multiple graceful-fs instances are\n  // in play at the same time.\n  fs.close = (function (fs$close) {\n    function close (fd, cb) {\n      return fs$close.call(fs, fd, function (err) {\n        // This function uses the graceful-fs shared queue\n        if (!err) {\n          retry()\n        }\n\n        if (typeof cb === 'function')\n          cb.apply(this, arguments)\n      })\n    }\n\n    Object.defineProperty(close, previousSymbol, {\n      value: fs$close\n    })\n    return close\n  })(fs.close)\n\n  fs.closeSync = (function (fs$closeSync) {\n    function closeSync (fd) {\n      // This function uses the graceful-fs shared queue\n      fs$closeSync.apply(fs, arguments)\n      retry()\n    }\n\n    Object.defineProperty(closeSync, previousSymbol, {\n      value: fs$closeSync\n    })\n    return closeSync\n  })(fs.closeSync)\n\n  if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || '')) {\n    process.on('exit', function() {\n      debug(fs[gracefulQueue])\n      require('assert').equal(fs[gracefulQueue].length, 0)\n    })\n  }\n}\n\nif (!global[gracefulQueue]) {\n  publishQueue(global, fs[gracefulQueue]);\n}\n\nmodule.exports = patch(clone(fs))\nif (process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH && !fs.__patched) {\n    module.exports = patch(fs)\n    fs.__patched = true;\n}\n\nfunction patch (fs) {\n  // Everything that references the open() function needs to be in here\n  polyfills(fs)\n  fs.gracefulify = patch\n\n  fs.createReadStream = createReadStream\n  fs.createWriteStream = createWriteStream\n  var fs$readFile = fs.readFile\n  fs.readFile = readFile\n  function readFile (path, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$readFile(path, options, cb)\n\n    function go$readFile (path, options, cb) {\n      return fs$readFile(path, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$readFile, [path, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$writeFile = fs.writeFile\n  fs.writeFile = writeFile\n  function writeFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$writeFile(path, data, options, cb)\n\n    function go$writeFile (path, data, options, cb) {\n      return fs$writeFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$writeFile, [path, data, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$appendFile = fs.appendFile\n  if (fs$appendFile)\n    fs.appendFile = appendFile\n  function appendFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$appendFile(path, data, options, cb)\n\n    function go$appendFile (path, data, options, cb) {\n      return fs$appendFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$appendFile, [path, data, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$readdir = fs.readdir\n  fs.readdir = readdir\n  function readdir (path, options, cb) {\n    var args = [path]\n    if (typeof options !== 'function') {\n      args.push(options)\n    } else {\n      cb = options\n    }\n    args.push(go$readdir$cb)\n\n    return go$readdir(args)\n\n    function go$readdir$cb (err, files) {\n      if (files && files.sort)\n        files.sort()\n\n      if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n        enqueue([go$readdir, [args]])\n\n      else {\n        if (typeof cb === 'function')\n          cb.apply(this, arguments)\n        retry()\n      }\n    }\n  }\n\n  function go$readdir (args) {\n    return fs$readdir.apply(fs, args)\n  }\n\n  if (process.version.substr(0, 4) === 'v0.8') {\n    var legStreams = legacy(fs)\n    ReadStream = legStreams.ReadStream\n    WriteStream = legStreams.WriteStream\n  }\n\n  var fs$ReadStream = fs.ReadStream\n  if (fs$ReadStream) {\n    ReadStream.prototype = Object.create(fs$ReadStream.prototype)\n    ReadStream.prototype.open = ReadStream$open\n  }\n\n  var fs$WriteStream = fs.WriteStream\n  if (fs$WriteStream) {\n    WriteStream.prototype = Object.create(fs$WriteStream.prototype)\n    WriteStream.prototype.open = WriteStream$open\n  }\n\n  Object.defineProperty(fs, 'ReadStream', {\n    get: function () {\n      return ReadStream\n    },\n    set: function (val) {\n      ReadStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n  Object.defineProperty(fs, 'WriteStream', {\n    get: function () {\n      return WriteStream\n    },\n    set: function (val) {\n      WriteStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n\n  // legacy names\n  var FileReadStream = ReadStream\n  Object.defineProperty(fs, 'FileReadStream', {\n    get: function () {\n      return FileReadStream\n    },\n    set: function (val) {\n      FileReadStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n  var FileWriteStream = WriteStream\n  Object.defineProperty(fs, 'FileWriteStream', {\n    get: function () {\n      return FileWriteStream\n    },\n    set: function (val) {\n      FileWriteStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n\n  function ReadStream (path, options) {\n    if (this instanceof ReadStream)\n      return fs$ReadStream.apply(this, arguments), this\n    else\n      return ReadStream.apply(Object.create(ReadStream.prototype), arguments)\n  }\n\n  function ReadStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        if (that.autoClose)\n          that.destroy()\n\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n        that.read()\n      }\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (this instanceof WriteStream)\n      return fs$WriteStream.apply(this, arguments), this\n    else\n      return WriteStream.apply(Object.create(WriteStream.prototype), arguments)\n  }\n\n  function WriteStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        that.destroy()\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n      }\n    })\n  }\n\n  function createReadStream (path, options) {\n    return new fs.ReadStream(path, options)\n  }\n\n  function createWriteStream (path, options) {\n    return new fs.WriteStream(path, options)\n  }\n\n  var fs$open = fs.open\n  fs.open = open\n  function open (path, flags, mode, cb) {\n    if (typeof mode === 'function')\n      cb = mode, mode = null\n\n    return go$open(path, flags, mode, cb)\n\n    function go$open (path, flags, mode, cb) {\n      return fs$open(path, flags, mode, function (err, fd) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$open, [path, flags, mode, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  return fs\n}\n\nfunction enqueue (elem) {\n  debug('ENQUEUE', elem[0].name, elem[1])\n  fs[gracefulQueue].push(elem)\n}\n\nfunction retry () {\n  var elem = fs[gracefulQueue].shift()\n  if (elem) {\n    debug('RETRY', elem[0].name, elem[1])\n    elem[0].apply(null, elem[1])\n  }\n}\n","module.exports = require(\"path\");","'use strict'\n\nexports.fromCallback = function (fn) {\n  return Object.defineProperty(function (...args) {\n    if (typeof args[args.length - 1] === 'function') fn.apply(this, args)\n    else {\n      return new Promise((resolve, reject) => {\n        fn.apply(\n          this,\n          args.concat([(err, res) => err ? reject(err) : resolve(res)])\n        )\n      })\n    }\n  }, 'name', { value: fn.name })\n}\n\nexports.fromPromise = function (fn) {\n  return Object.defineProperty(function (...args) {\n    const cb = args[args.length - 1]\n    if (typeof cb !== 'function') return fn.apply(this, args)\n    else fn.apply(this, args.slice(0, -1)).then(r => cb(null, r), cb)\n  }, 'name', { value: fn.name })\n}\n","'use strict'\nconst u = require('universalify').fromPromise\nconst { makeDir: _makeDir, makeDirSync } = require('./make-dir')\nconst makeDir = u(_makeDir)\n\nmodule.exports = {\n  mkdirs: makeDir,\n  mkdirsSync: makeDirSync,\n  // alias\n  mkdirp: makeDir,\n  mkdirpSync: makeDirSync,\n  ensureDir: makeDir,\n  ensureDirSync: makeDirSync\n}\n","module.exports = require(\"react-redux\");","module.exports = require(\"redux\");","'use strict'\n\nmodule.exports = {\n  // Export promiseified graceful-fs:\n  ...require('./fs'),\n  // Export extra methods:\n  ...require('./copy-sync'),\n  ...require('./copy'),\n  ...require('./empty'),\n  ...require('./ensure'),\n  ...require('./json'),\n  ...require('./mkdirs'),\n  ...require('./move-sync'),\n  ...require('./move'),\n  ...require('./output'),\n  ...require('./path-exists'),\n  ...require('./remove')\n}\n\n// Export fs.promises as a getter property so that we don't trigger\n// ExperimentalWarning before fs.promises is actually accessed.\nconst fs = require('fs')\nif (Object.getOwnPropertyDescriptor(fs, 'promises')) {\n  Object.defineProperty(module.exports, 'promises', {\n    get () { return fs.promises }\n  })\n}\n","'use strict'\nconst u = require('universalify').fromPromise\nconst fs = require('../fs')\n\nfunction pathExists (path) {\n  return fs.access(path).then(() => true).catch(() => false)\n}\n\nmodule.exports = {\n  pathExists: u(pathExists),\n  pathExistsSync: fs.existsSync\n}\n","module.exports = require(\"fs\");","'use strict'\n// This is adapted from https://github.com/normalize/mz\n// Copyright (c) 2014-2016 Jonathan Ong me@jongleberry.com and Contributors\nconst u = require('universalify').fromCallback\nconst fs = require('graceful-fs')\n\nconst api = [\n  'access',\n  'appendFile',\n  'chmod',\n  'chown',\n  'close',\n  'copyFile',\n  'fchmod',\n  'fchown',\n  'fdatasync',\n  'fstat',\n  'fsync',\n  'ftruncate',\n  'futimes',\n  'lchmod',\n  'lchown',\n  'link',\n  'lstat',\n  'mkdir',\n  'mkdtemp',\n  'open',\n  'opendir',\n  'readdir',\n  'readFile',\n  'readlink',\n  'realpath',\n  'rename',\n  'rmdir',\n  'stat',\n  'symlink',\n  'truncate',\n  'unlink',\n  'utimes',\n  'writeFile'\n].filter(key => {\n  // Some commands are not available on some systems. Ex:\n  // fs.opendir was added in Node.js v12.12.0\n  // fs.lchown is not available on at least some Linux\n  return typeof fs[key] === 'function'\n})\n\n// Export all keys:\nObject.keys(fs).forEach(key => {\n  if (key === 'promises') {\n    // fs.promises is a getter property that triggers ExperimentalWarning\n    // Don't re-export it here, the getter is defined in \"lib/index.js\"\n    return\n  }\n  exports[key] = fs[key]\n})\n\n// Universalify async methods:\napi.forEach(method => {\n  exports[method] = u(fs[method])\n})\n\n// We differ from mz/fs in that we still ship the old, broken, fs.exists()\n// since we are a drop-in replacement for the native module\nexports.exists = function (filename, callback) {\n  if (typeof callback === 'function') {\n    return fs.exists(filename, callback)\n  }\n  return new Promise(resolve => {\n    return fs.exists(filename, resolve)\n  })\n}\n\n// fs.read(), fs.write(), & fs.writev() need special treatment due to multiple callback args\n\nexports.read = function (fd, buffer, offset, length, position, callback) {\n  if (typeof callback === 'function') {\n    return fs.read(fd, buffer, offset, length, position, callback)\n  }\n  return new Promise((resolve, reject) => {\n    fs.read(fd, buffer, offset, length, position, (err, bytesRead, buffer) => {\n      if (err) return reject(err)\n      resolve({ bytesRead, buffer })\n    })\n  })\n}\n\n// Function signature can be\n// fs.write(fd, buffer[, offset[, length[, position]]], callback)\n// OR\n// fs.write(fd, string[, position[, encoding]], callback)\n// We need to handle both cases, so we use ...args\nexports.write = function (fd, buffer, ...args) {\n  if (typeof args[args.length - 1] === 'function') {\n    return fs.write(fd, buffer, ...args)\n  }\n\n  return new Promise((resolve, reject) => {\n    fs.write(fd, buffer, ...args, (err, bytesWritten, buffer) => {\n      if (err) return reject(err)\n      resolve({ bytesWritten, buffer })\n    })\n  })\n}\n\n// fs.writev only available in Node v12.9.0+\nif (typeof fs.writev === 'function') {\n  // Function signature is\n  // s.writev(fd, buffers[, position], callback)\n  // We need to handle the optional arg, so we use ...args\n  exports.writev = function (fd, buffers, ...args) {\n    if (typeof args[args.length - 1] === 'function') {\n      return fs.writev(fd, buffers, ...args)\n    }\n\n    return new Promise((resolve, reject) => {\n      fs.writev(fd, buffers, ...args, (err, bytesWritten, buffers) => {\n        if (err) return reject(err)\n        resolve({ bytesWritten, buffers })\n      })\n    })\n  }\n}\n\n// fs.realpath.native only available in Node v9.2+\nif (typeof fs.realpath.native === 'function') {\n  exports.realpath.native = u(fs.realpath.native)\n}\n","'use strict'\n\nconst fs = require('../fs')\nconst path = require('path')\nconst util = require('util')\nconst atLeastNode = require('at-least-node')\n\nconst nodeSupportsBigInt = atLeastNode('10.5.0')\nconst stat = (file) => nodeSupportsBigInt ? fs.stat(file, { bigint: true }) : fs.stat(file)\nconst statSync = (file) => nodeSupportsBigInt ? fs.statSync(file, { bigint: true }) : fs.statSync(file)\n\nfunction getStats (src, dest) {\n  return Promise.all([\n    stat(src),\n    stat(dest).catch(err => {\n      if (err.code === 'ENOENT') return null\n      throw err\n    })\n  ]).then(([srcStat, destStat]) => ({ srcStat, destStat }))\n}\n\nfunction getStatsSync (src, dest) {\n  let destStat\n  const srcStat = statSync(src)\n  try {\n    destStat = statSync(dest)\n  } catch (err) {\n    if (err.code === 'ENOENT') return { srcStat, destStat: null }\n    throw err\n  }\n  return { srcStat, destStat }\n}\n\nfunction checkPaths (src, dest, funcName, cb) {\n  util.callbackify(getStats)(src, dest, (err, stats) => {\n    if (err) return cb(err)\n    const { srcStat, destStat } = stats\n    if (destStat && areIdentical(srcStat, destStat)) {\n      return cb(new Error('Source and destination must not be the same.'))\n    }\n    if (srcStat.isDirectory() && isSrcSubdir(src, dest)) {\n      return cb(new Error(errMsg(src, dest, funcName)))\n    }\n    return cb(null, { srcStat, destStat })\n  })\n}\n\nfunction checkPathsSync (src, dest, funcName) {\n  const { srcStat, destStat } = getStatsSync(src, dest)\n  if (destStat && areIdentical(srcStat, destStat)) {\n    throw new Error('Source and destination must not be the same.')\n  }\n  if (srcStat.isDirectory() && isSrcSubdir(src, dest)) {\n    throw new Error(errMsg(src, dest, funcName))\n  }\n  return { srcStat, destStat }\n}\n\n// recursively check if dest parent is a subdirectory of src.\n// It works for all file types including symlinks since it\n// checks the src and dest inodes. It starts from the deepest\n// parent and stops once it reaches the src parent or the root path.\nfunction checkParentPaths (src, srcStat, dest, funcName, cb) {\n  const srcParent = path.resolve(path.dirname(src))\n  const destParent = path.resolve(path.dirname(dest))\n  if (destParent === srcParent || destParent === path.parse(destParent).root) return cb()\n  const callback = (err, destStat) => {\n    if (err) {\n      if (err.code === 'ENOENT') return cb()\n      return cb(err)\n    }\n    if (areIdentical(srcStat, destStat)) {\n      return cb(new Error(errMsg(src, dest, funcName)))\n    }\n    return checkParentPaths(src, srcStat, destParent, funcName, cb)\n  }\n  if (nodeSupportsBigInt) fs.stat(destParent, { bigint: true }, callback)\n  else fs.stat(destParent, callback)\n}\n\nfunction checkParentPathsSync (src, srcStat, dest, funcName) {\n  const srcParent = path.resolve(path.dirname(src))\n  const destParent = path.resolve(path.dirname(dest))\n  if (destParent === srcParent || destParent === path.parse(destParent).root) return\n  let destStat\n  try {\n    destStat = statSync(destParent)\n  } catch (err) {\n    if (err.code === 'ENOENT') return\n    throw err\n  }\n  if (areIdentical(srcStat, destStat)) {\n    throw new Error(errMsg(src, dest, funcName))\n  }\n  return checkParentPathsSync(src, srcStat, destParent, funcName)\n}\n\nfunction areIdentical (srcStat, destStat) {\n  if (destStat.ino && destStat.dev && destStat.ino === srcStat.ino && destStat.dev === srcStat.dev) {\n    if (nodeSupportsBigInt || destStat.ino < Number.MAX_SAFE_INTEGER) {\n      // definitive answer\n      return true\n    }\n    // Use additional heuristics if we can't use 'bigint'.\n    // Different 'ino' could be represented the same if they are >= Number.MAX_SAFE_INTEGER\n    // See issue 657\n    if (destStat.size === srcStat.size &&\n        destStat.mode === srcStat.mode &&\n        destStat.nlink === srcStat.nlink &&\n        destStat.atimeMs === srcStat.atimeMs &&\n        destStat.mtimeMs === srcStat.mtimeMs &&\n        destStat.ctimeMs === srcStat.ctimeMs &&\n        destStat.birthtimeMs === srcStat.birthtimeMs) {\n      // heuristic answer\n      return true\n    }\n  }\n  return false\n}\n\n// return true if dest is a subdir of src, otherwise false.\n// It only checks the path strings.\nfunction isSrcSubdir (src, dest) {\n  const srcArr = path.resolve(src).split(path.sep).filter(i => i)\n  const destArr = path.resolve(dest).split(path.sep).filter(i => i)\n  return srcArr.reduce((acc, cur, i) => acc && destArr[i] === cur, true)\n}\n\nfunction errMsg (src, dest, funcName) {\n  return `Cannot ${funcName} '${src}' to a subdirectory of itself, '${dest}'.`\n}\n\nmodule.exports = {\n  checkPaths,\n  checkPathsSync,\n  checkParentPaths,\n  checkParentPathsSync,\n  isSrcSubdir\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst rimraf = require('./rimraf')\n\nmodule.exports = {\n  remove: u(rimraf),\n  removeSync: rimraf.sync\n}\n","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","function stringify (obj, options = {}) {\n  const EOL = options.EOL || '\\n'\n\n  const str = JSON.stringify(obj, options ? options.replacer : null, options.spaces)\n\n  return str.replace(/\\n/g, EOL) + EOL\n}\n\nfunction stripBom (content) {\n  // we do this because JSON.parse would convert it to a utf8 string if encoding wasn't specified\n  if (Buffer.isBuffer(content)) content = content.toString('utf8')\n  return content.replace(/^\\uFEFF/, '')\n}\n\nmodule.exports = { stringify, stripBom }\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdir = require('../mkdirs')\nconst pathExists = require('../path-exists').pathExists\n\nfunction outputFile (file, data, encoding, callback) {\n  if (typeof encoding === 'function') {\n    callback = encoding\n    encoding = 'utf8'\n  }\n\n  const dir = path.dirname(file)\n  pathExists(dir, (err, itDoes) => {\n    if (err) return callback(err)\n    if (itDoes) return fs.writeFile(file, data, encoding, callback)\n\n    mkdir.mkdirs(dir, err => {\n      if (err) return callback(err)\n\n      fs.writeFile(file, data, encoding, callback)\n    })\n  })\n}\n\nfunction outputFileSync (file, ...args) {\n  const dir = path.dirname(file)\n  if (fs.existsSync(dir)) {\n    return fs.writeFileSync(file, ...args)\n  }\n  mkdir.mkdirsSync(dir)\n  fs.writeFileSync(file, ...args)\n}\n\nmodule.exports = {\n  outputFile: u(outputFile),\n  outputFileSync\n}\n","var defineProperty = require(\"./defineProperty\");\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectSpread2;","module.exports = require(\"util\");","module.exports = require(\"assert\");","'use strict'\n\nmodule.exports = {\n  copySync: require('./copy-sync')\n}\n","module.exports = r => {\n  const n = process.versions.node.split('.').map(x => parseInt(x, 10))\n  r = r.split('.').map(x => parseInt(x, 10))\n  return n[0] > r[0] || (n[0] === r[0] && (n[1] > r[1] || (n[1] === r[1] && n[2] >= r[2])))\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\n\nfunction utimesMillis (path, atime, mtime, callback) {\n  // if (!HAS_MILLIS_RES) return fs.utimes(path, atime, mtime, callback)\n  fs.open(path, 'r+', (err, fd) => {\n    if (err) return callback(err)\n    fs.futimes(fd, atime, mtime, futimesErr => {\n      fs.close(fd, closeErr => {\n        if (callback) callback(futimesErr || closeErr)\n      })\n    })\n  })\n}\n\nfunction utimesMillisSync (path, atime, mtime) {\n  const fd = fs.openSync(path, 'r+')\n  fs.futimesSync(fd, atime, mtime)\n  return fs.closeSync(fd)\n}\n\nmodule.exports = {\n  utimesMillis,\n  utimesMillisSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nmodule.exports = {\n  copy: u(require('./copy'))\n}\n","'use strict';\n\n// load all available handlers for browserify support\nvar typeHandlers = {\n  bmp: require('./types/bmp'),\n  cur: require('./types/cur'),\n  dds: require('./types/dds'),\n  gif: require('./types/gif'),\n  icns: require('./types/icns'),\n  ico: require('./types/ico'),\n  jpg: require('./types/jpg'),\n  png: require('./types/png'),\n  psd: require('./types/psd'),\n  svg: require('./types/svg'),\n  tiff: require('./types/tiff'),\n  webp: require('./types/webp'),\n};\n\nmodule.exports = typeHandlers;\n","'use strict';\n\nvar TYPE_ICON = 1;\n\n/**\n * ICON Header\n *\n * | Offset | Size | Purpose                                                                                   |\n * | 0\t    | 2    | Reserved. Must always be 0.                                                               |\n * | 2      | 2    | Image type: 1 for icon (.ICO) image, 2 for cursor (.CUR) image. Other values are invalid. |\n * | 4      | 2    | Number of images in the file.                                                             |\n *\n **/\nvar SIZE_HEADER = 2 + 2 + 2; // 6\n\n/**\n * Image Entry\n *\n * | Offset | Size | Purpose                                                                                          |\n * | 0\t    | 1    | Image width in pixels. Can be any number between 0 and 255. Value 0 means width is 256 pixels.   |\n * | 1      | 1    | Image height in pixels. Can be any number between 0 and 255. Value 0 means height is 256 pixels. |\n * | 2      | 1    | Number of colors in the color palette. Should be 0 if the image does not use a color palette.    |\n * | 3      | 1    | Reserved. Should be 0.                                                                           |\n * | 4      | 2    | ICO format: Color planes. Should be 0 or 1.                                                      |\n * |        |      | CUR format: The horizontal coordinates of the hotspot in number of pixels from the left.         |\n * | 6      | 2    | ICO format: Bits per pixel.                                                                      |\n * |        |      | CUR format: The vertical coordinates of the hotspot in number of pixels from the top.            |\n * | 8      | 4    | The size of the image's data in bytes                                                            |\n * | 12     | 4    | The offset of BMP or PNG data from the beginning of the ICO/CUR file                             |\n *\n **/\nvar SIZE_IMAGE_ENTRY = 1 + 1 + 1 + 1 + 2 + 2 + 4 + 4; // 16\n\nfunction isICO (buffer) {\n  var type;\n  if (buffer.readUInt16LE(0) !== 0) {\n    return false;\n  }\n  type = buffer.readUInt16LE(2);\n  return type === TYPE_ICON;\n}\n\nfunction getSizeFromOffset(buffer, offset) {\n  var value = buffer.readUInt8(offset);\n  return value === 0 ? 256 : value;\n}\n\nfunction getImageSize(buffer, imageIndex) {\n  var offset = SIZE_HEADER + (imageIndex * SIZE_IMAGE_ENTRY);\n  return {\n    'width': getSizeFromOffset(buffer, offset),\n    'height': getSizeFromOffset(buffer, offset + 1)\n  };\n}\n\nfunction calculate (buffer) {\n  var \n    nbImages = buffer.readUInt16LE(4),\n    result = getImageSize(buffer, 0),\n    imageIndex;\n    \n  if (nbImages === 1) {\n    return result;\n  }\n  \n  result.images = [{\n    width: result.width,\n    height: result.height\n  }];\n  \n  for (imageIndex = 1; imageIndex < nbImages; imageIndex += 1) {\n    result.images.push(getImageSize(buffer, imageIndex));\n  }\n  \n  return result;\n}\n\nmodule.exports = {\n  'detect': isICO,\n  'calculate': calculate\n};\n","'use strict';\n\nvar fs = require('fs');\nvar path = require('path');\n\nvar typeHandlers = require('./types');\nvar detector = require('./detector');\n\n// Maximum buffer size, with a default of 512 kilobytes.\n// TO-DO: make this adaptive based on the initial signature of the image\nvar MaxBufferSize = 512*1024;\n\n/**\n * Return size information based on a buffer\n *\n * @param {Buffer} buffer\n * @param {String} filepath\n * @returns {Object}\n */\nfunction lookup (buffer, filepath) {\n  // detect the file type.. don't rely on the extension\n  var type = detector(buffer, filepath);\n\n  // find an appropriate handler for this file type\n  if (type in typeHandlers) {\n    var size = typeHandlers[type].calculate(buffer, filepath);\n    if (size !== false) {\n      size.type = type;\n      return size;\n    }\n  }\n\n  // throw up, if we don't understand the file\n  throw new TypeError('unsupported file type: ' + type + ' (file: ' + filepath + ')');\n}\n\n/**\n * Reads a file into a buffer.\n *\n * The callback will be called after the process has completed. The\n * callback's first argument will be an error (or null). The second argument\n * will be the Buffer, if the operation was successful.\n *\n * @param {String} filepath\n * @param {Function} callback\n */\nfunction asyncFileToBuffer (filepath, callback) {\n  // open the file in read only mode\n  fs.open(filepath, 'r', function (err, descriptor) {\n    if (err) { return callback(err); }\n    fs.fstat(descriptor, function (err, stats) {\n      if (err) { return callback(err); }\n      var size = stats.size;\n      if (size <= 0) {\n        return callback(new Error('File size is not greater than 0  ' + filepath));\n      }\n      var bufferSize = Math.min(size, MaxBufferSize);\n      var buffer = new Buffer(bufferSize);\n      // read first buffer block from the file, asynchronously\n      fs.read(descriptor, buffer, 0, bufferSize, 0, function (err) {\n        if (err) { return callback(err); }\n        // close the file, we are done\n        fs.close(descriptor, function (err) {\n          callback(err, buffer);\n        });\n      });\n    });\n  });\n}\n\n/**\n * Synchronously reads a file into a buffer, blocking the nodejs process.\n *\n * @param {String} filepath\n * @returns {Buffer}\n */\nfunction syncFileToBuffer (filepath) {\n  // read from the file, synchronously\n  var descriptor = fs.openSync(filepath, 'r');\n  var size = fs.fstatSync(descriptor).size;\n  var bufferSize = Math.min(size, MaxBufferSize);\n  var buffer = new Buffer(bufferSize);\n  fs.readSync(descriptor, buffer, 0, bufferSize, 0);\n  fs.closeSync(descriptor);\n  return buffer;\n}\n\n/**\n * @param {Buffer|string} input - buffer or relative/absolute path of the image file\n * @param {Function} callback - optional function for async detection\n */\nmodule.exports = function (input, callback) {\n\n  // Handle buffer input\n  if (Buffer.isBuffer(input)) {\n    return lookup(input);\n  }\n\n  // input should be a string at this point\n  if (typeof input !== 'string') {\n    throw new TypeError('invalid invocation');\n  }\n\n  // resolve the file path\n  var filepath = path.resolve(input);\n\n  if (typeof callback === 'function') {\n    asyncFileToBuffer(filepath, function (err, buffer) {\n      if (err) { return callback(err); }\n\n      // return the dimensions\n      var dimensions;\n      try {\n        dimensions = lookup(buffer, filepath);\n      } catch (e) {\n        err = e;\n      }\n      callback(err, dimensions);\n    });\n  } else {\n    var buffer = syncFileToBuffer(filepath);\n    return lookup(buffer, filepath);\n  }\n};\n\nmodule.exports.types = Object.keys(typeHandlers);\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","var constants = require('constants')\n\nvar origCwd = process.cwd\nvar cwd = null\n\nvar platform = process.env.GRACEFUL_FS_PLATFORM || process.platform\n\nprocess.cwd = function() {\n  if (!cwd)\n    cwd = origCwd.call(process)\n  return cwd\n}\ntry {\n  process.cwd()\n} catch (er) {}\n\nvar chdir = process.chdir\nprocess.chdir = function(d) {\n  cwd = null\n  chdir.call(process, d)\n}\n\nmodule.exports = patch\n\nfunction patch (fs) {\n  // (re-)implement some things that are known busted or missing.\n\n  // lchmod, broken prior to 0.6.2\n  // back-port the fix here.\n  if (constants.hasOwnProperty('O_SYMLINK') &&\n      process.version.match(/^v0\\.6\\.[0-2]|^v0\\.5\\./)) {\n    patchLchmod(fs)\n  }\n\n  // lutimes implementation, or no-op\n  if (!fs.lutimes) {\n    patchLutimes(fs)\n  }\n\n  // https://github.com/isaacs/node-graceful-fs/issues/4\n  // Chown should not fail on einval or eperm if non-root.\n  // It should not fail on enosys ever, as this just indicates\n  // that a fs doesn't support the intended operation.\n\n  fs.chown = chownFix(fs.chown)\n  fs.fchown = chownFix(fs.fchown)\n  fs.lchown = chownFix(fs.lchown)\n\n  fs.chmod = chmodFix(fs.chmod)\n  fs.fchmod = chmodFix(fs.fchmod)\n  fs.lchmod = chmodFix(fs.lchmod)\n\n  fs.chownSync = chownFixSync(fs.chownSync)\n  fs.fchownSync = chownFixSync(fs.fchownSync)\n  fs.lchownSync = chownFixSync(fs.lchownSync)\n\n  fs.chmodSync = chmodFixSync(fs.chmodSync)\n  fs.fchmodSync = chmodFixSync(fs.fchmodSync)\n  fs.lchmodSync = chmodFixSync(fs.lchmodSync)\n\n  fs.stat = statFix(fs.stat)\n  fs.fstat = statFix(fs.fstat)\n  fs.lstat = statFix(fs.lstat)\n\n  fs.statSync = statFixSync(fs.statSync)\n  fs.fstatSync = statFixSync(fs.fstatSync)\n  fs.lstatSync = statFixSync(fs.lstatSync)\n\n  // if lchmod/lchown do not exist, then make them no-ops\n  if (!fs.lchmod) {\n    fs.lchmod = function (path, mode, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchmodSync = function () {}\n  }\n  if (!fs.lchown) {\n    fs.lchown = function (path, uid, gid, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchownSync = function () {}\n  }\n\n  // on Windows, A/V software can lock the directory, causing this\n  // to fail with an EACCES or EPERM if the directory contains newly\n  // created files.  Try again on failure, for up to 60 seconds.\n\n  // Set the timeout this long because some Windows Anti-Virus, such as Parity\n  // bit9, may lock files for up to a minute, causing npm package install\n  // failures. Also, take care to yield the scheduler. Windows scheduling gives\n  // CPU to a busy looping process, which can cause the program causing the lock\n  // contention to be starved of CPU by node, so the contention doesn't resolve.\n  if (platform === \"win32\") {\n    fs.rename = (function (fs$rename) { return function (from, to, cb) {\n      var start = Date.now()\n      var backoff = 0;\n      fs$rename(from, to, function CB (er) {\n        if (er\n            && (er.code === \"EACCES\" || er.code === \"EPERM\")\n            && Date.now() - start < 60000) {\n          setTimeout(function() {\n            fs.stat(to, function (stater, st) {\n              if (stater && stater.code === \"ENOENT\")\n                fs$rename(from, to, CB);\n              else\n                cb(er)\n            })\n          }, backoff)\n          if (backoff < 100)\n            backoff += 10;\n          return;\n        }\n        if (cb) cb(er)\n      })\n    }})(fs.rename)\n  }\n\n  // if read() returns EAGAIN, then just try it again.\n  fs.read = (function (fs$read) {\n    function read (fd, buffer, offset, length, position, callback_) {\n      var callback\n      if (callback_ && typeof callback_ === 'function') {\n        var eagCounter = 0\n        callback = function (er, _, __) {\n          if (er && er.code === 'EAGAIN' && eagCounter < 10) {\n            eagCounter ++\n            return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n          }\n          callback_.apply(this, arguments)\n        }\n      }\n      return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n    }\n\n    // This ensures `util.promisify` works as it does for native `fs.read`.\n    read.__proto__ = fs$read\n    return read\n  })(fs.read)\n\n  fs.readSync = (function (fs$readSync) { return function (fd, buffer, offset, length, position) {\n    var eagCounter = 0\n    while (true) {\n      try {\n        return fs$readSync.call(fs, fd, buffer, offset, length, position)\n      } catch (er) {\n        if (er.code === 'EAGAIN' && eagCounter < 10) {\n          eagCounter ++\n          continue\n        }\n        throw er\n      }\n    }\n  }})(fs.readSync)\n\n  function patchLchmod (fs) {\n    fs.lchmod = function (path, mode, callback) {\n      fs.open( path\n             , constants.O_WRONLY | constants.O_SYMLINK\n             , mode\n             , function (err, fd) {\n        if (err) {\n          if (callback) callback(err)\n          return\n        }\n        // prefer to return the chmod error, if one occurs,\n        // but still try to close, and report closing errors if they occur.\n        fs.fchmod(fd, mode, function (err) {\n          fs.close(fd, function(err2) {\n            if (callback) callback(err || err2)\n          })\n        })\n      })\n    }\n\n    fs.lchmodSync = function (path, mode) {\n      var fd = fs.openSync(path, constants.O_WRONLY | constants.O_SYMLINK, mode)\n\n      // prefer to return the chmod error, if one occurs,\n      // but still try to close, and report closing errors if they occur.\n      var threw = true\n      var ret\n      try {\n        ret = fs.fchmodSync(fd, mode)\n        threw = false\n      } finally {\n        if (threw) {\n          try {\n            fs.closeSync(fd)\n          } catch (er) {}\n        } else {\n          fs.closeSync(fd)\n        }\n      }\n      return ret\n    }\n  }\n\n  function patchLutimes (fs) {\n    if (constants.hasOwnProperty(\"O_SYMLINK\")) {\n      fs.lutimes = function (path, at, mt, cb) {\n        fs.open(path, constants.O_SYMLINK, function (er, fd) {\n          if (er) {\n            if (cb) cb(er)\n            return\n          }\n          fs.futimes(fd, at, mt, function (er) {\n            fs.close(fd, function (er2) {\n              if (cb) cb(er || er2)\n            })\n          })\n        })\n      }\n\n      fs.lutimesSync = function (path, at, mt) {\n        var fd = fs.openSync(path, constants.O_SYMLINK)\n        var ret\n        var threw = true\n        try {\n          ret = fs.futimesSync(fd, at, mt)\n          threw = false\n        } finally {\n          if (threw) {\n            try {\n              fs.closeSync(fd)\n            } catch (er) {}\n          } else {\n            fs.closeSync(fd)\n          }\n        }\n        return ret\n      }\n\n    } else {\n      fs.lutimes = function (_a, _b, _c, cb) { if (cb) process.nextTick(cb) }\n      fs.lutimesSync = function () {}\n    }\n  }\n\n  function chmodFix (orig) {\n    if (!orig) return orig\n    return function (target, mode, cb) {\n      return orig.call(fs, target, mode, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chmodFixSync (orig) {\n    if (!orig) return orig\n    return function (target, mode) {\n      try {\n        return orig.call(fs, target, mode)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n\n  function chownFix (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid, cb) {\n      return orig.call(fs, target, uid, gid, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chownFixSync (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid) {\n      try {\n        return orig.call(fs, target, uid, gid)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n  function statFix (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target, options, cb) {\n      if (typeof options === 'function') {\n        cb = options\n        options = null\n      }\n      function callback (er, stats) {\n        if (stats) {\n          if (stats.uid < 0) stats.uid += 0x100000000\n          if (stats.gid < 0) stats.gid += 0x100000000\n        }\n        if (cb) cb.apply(this, arguments)\n      }\n      return options ? orig.call(fs, target, options, callback)\n        : orig.call(fs, target, callback)\n    }\n  }\n\n  function statFixSync (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target, options) {\n      var stats = options ? orig.call(fs, target, options)\n        : orig.call(fs, target)\n      if (stats.uid < 0) stats.uid += 0x100000000\n      if (stats.gid < 0) stats.gid += 0x100000000\n      return stats;\n    }\n  }\n\n  // ENOSYS means that the fs doesn't support the op. Just ignore\n  // that, because it doesn't matter.\n  //\n  // if there's no getuid, or if getuid() is something other\n  // than 0, and the error is EINVAL or EPERM, then just ignore\n  // it.\n  //\n  // This specific case is a silent failure in cp, install, tar,\n  // and most other unix tools that manage permissions.\n  //\n  // When running as root, or if other types of errors are\n  // encountered, then it's strict.\n  function chownErOk (er) {\n    if (!er)\n      return true\n\n    if (er.code === \"ENOSYS\")\n      return true\n\n    var nonroot = !process.getuid || process.getuid() !== 0\n    if (nonroot) {\n      if (er.code === \"EINVAL\" || er.code === \"EPERM\")\n        return true\n    }\n\n    return false\n  }\n}\n","module.exports = require(\"constants\");","var Stream = require('stream').Stream\n\nmodule.exports = legacy\n\nfunction legacy (fs) {\n  return {\n    ReadStream: ReadStream,\n    WriteStream: WriteStream\n  }\n\n  function ReadStream (path, options) {\n    if (!(this instanceof ReadStream)) return new ReadStream(path, options);\n\n    Stream.call(this);\n\n    var self = this;\n\n    this.path = path;\n    this.fd = null;\n    this.readable = true;\n    this.paused = false;\n\n    this.flags = 'r';\n    this.mode = 438; /*=0666*/\n    this.bufferSize = 64 * 1024;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.encoding) this.setEncoding(this.encoding);\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.end === undefined) {\n        this.end = Infinity;\n      } else if ('number' !== typeof this.end) {\n        throw TypeError('end must be a Number');\n      }\n\n      if (this.start > this.end) {\n        throw new Error('start must be <= end');\n      }\n\n      this.pos = this.start;\n    }\n\n    if (this.fd !== null) {\n      process.nextTick(function() {\n        self._read();\n      });\n      return;\n    }\n\n    fs.open(this.path, this.flags, this.mode, function (err, fd) {\n      if (err) {\n        self.emit('error', err);\n        self.readable = false;\n        return;\n      }\n\n      self.fd = fd;\n      self.emit('open', fd);\n      self._read();\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (!(this instanceof WriteStream)) return new WriteStream(path, options);\n\n    Stream.call(this);\n\n    this.path = path;\n    this.fd = null;\n    this.writable = true;\n\n    this.flags = 'w';\n    this.encoding = 'binary';\n    this.mode = 438; /*=0666*/\n    this.bytesWritten = 0;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.start < 0) {\n        throw new Error('start must be >= zero');\n      }\n\n      this.pos = this.start;\n    }\n\n    this.busy = false;\n    this._queue = [];\n\n    if (this.fd === null) {\n      this._open = fs.open;\n      this._queue.push([this._open, this.path, this.flags, this.mode, undefined]);\n      this.flush();\n    }\n  }\n}\n","module.exports = require(\"stream\");","'use strict'\n\nmodule.exports = clone\n\nfunction clone (obj) {\n  if (obj === null || typeof obj !== 'object')\n    return obj\n\n  if (obj instanceof Object)\n    var copy = { __proto__: obj.__proto__ }\n  else\n    var copy = Object.create(null)\n\n  Object.getOwnPropertyNames(obj).forEach(function (key) {\n    Object.defineProperty(copy, key, Object.getOwnPropertyDescriptor(obj, key))\n  })\n\n  return copy\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdirsSync = require('../mkdirs').mkdirsSync\nconst utimesMillisSync = require('../util/utimes').utimesMillisSync\nconst stat = require('../util/stat')\n\nfunction copySync (src, dest, opts) {\n  if (typeof opts === 'function') {\n    opts = { filter: opts }\n  }\n\n  opts = opts || {}\n  opts.clobber = 'clobber' in opts ? !!opts.clobber : true // default to true for now\n  opts.overwrite = 'overwrite' in opts ? !!opts.overwrite : opts.clobber // overwrite falls back to clobber\n\n  // Warn about using preserveTimestamps on 32-bit node\n  if (opts.preserveTimestamps && process.arch === 'ia32') {\n    console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269`)\n  }\n\n  const { srcStat, destStat } = stat.checkPathsSync(src, dest, 'copy')\n  stat.checkParentPathsSync(src, srcStat, dest, 'copy')\n  return handleFilterAndCopy(destStat, src, dest, opts)\n}\n\nfunction handleFilterAndCopy (destStat, src, dest, opts) {\n  if (opts.filter && !opts.filter(src, dest)) return\n  const destParent = path.dirname(dest)\n  if (!fs.existsSync(destParent)) mkdirsSync(destParent)\n  return startCopy(destStat, src, dest, opts)\n}\n\nfunction startCopy (destStat, src, dest, opts) {\n  if (opts.filter && !opts.filter(src, dest)) return\n  return getStats(destStat, src, dest, opts)\n}\n\nfunction getStats (destStat, src, dest, opts) {\n  const statSync = opts.dereference ? fs.statSync : fs.lstatSync\n  const srcStat = statSync(src)\n\n  if (srcStat.isDirectory()) return onDir(srcStat, destStat, src, dest, opts)\n  else if (srcStat.isFile() ||\n           srcStat.isCharacterDevice() ||\n           srcStat.isBlockDevice()) return onFile(srcStat, destStat, src, dest, opts)\n  else if (srcStat.isSymbolicLink()) return onLink(destStat, src, dest, opts)\n}\n\nfunction onFile (srcStat, destStat, src, dest, opts) {\n  if (!destStat) return copyFile(srcStat, src, dest, opts)\n  return mayCopyFile(srcStat, src, dest, opts)\n}\n\nfunction mayCopyFile (srcStat, src, dest, opts) {\n  if (opts.overwrite) {\n    fs.unlinkSync(dest)\n    return copyFile(srcStat, src, dest, opts)\n  } else if (opts.errorOnExist) {\n    throw new Error(`'${dest}' already exists`)\n  }\n}\n\nfunction copyFile (srcStat, src, dest, opts) {\n  fs.copyFileSync(src, dest)\n  if (opts.preserveTimestamps) handleTimestamps(srcStat.mode, src, dest)\n  return setDestMode(dest, srcStat.mode)\n}\n\nfunction handleTimestamps (srcMode, src, dest) {\n  // Make sure the file is writable before setting the timestamp\n  // otherwise open fails with EPERM when invoked with 'r+'\n  // (through utimes call)\n  if (fileIsNotWritable(srcMode)) makeFileWritable(dest, srcMode)\n  return setDestTimestamps(src, dest)\n}\n\nfunction fileIsNotWritable (srcMode) {\n  return (srcMode & 0o200) === 0\n}\n\nfunction makeFileWritable (dest, srcMode) {\n  return setDestMode(dest, srcMode | 0o200)\n}\n\nfunction setDestMode (dest, srcMode) {\n  return fs.chmodSync(dest, srcMode)\n}\n\nfunction setDestTimestamps (src, dest) {\n  // The initial srcStat.atime cannot be trusted\n  // because it is modified by the read(2) system call\n  // (See https://nodejs.org/api/fs.html#fs_stat_time_values)\n  const updatedSrcStat = fs.statSync(src)\n  return utimesMillisSync(dest, updatedSrcStat.atime, updatedSrcStat.mtime)\n}\n\nfunction onDir (srcStat, destStat, src, dest, opts) {\n  if (!destStat) return mkDirAndCopy(srcStat.mode, src, dest, opts)\n  if (destStat && !destStat.isDirectory()) {\n    throw new Error(`Cannot overwrite non-directory '${dest}' with directory '${src}'.`)\n  }\n  return copyDir(src, dest, opts)\n}\n\nfunction mkDirAndCopy (srcMode, src, dest, opts) {\n  fs.mkdirSync(dest)\n  copyDir(src, dest, opts)\n  return setDestMode(dest, srcMode)\n}\n\nfunction copyDir (src, dest, opts) {\n  fs.readdirSync(src).forEach(item => copyDirItem(item, src, dest, opts))\n}\n\nfunction copyDirItem (item, src, dest, opts) {\n  const srcItem = path.join(src, item)\n  const destItem = path.join(dest, item)\n  const { destStat } = stat.checkPathsSync(srcItem, destItem, 'copy')\n  return startCopy(destStat, srcItem, destItem, opts)\n}\n\nfunction onLink (destStat, src, dest, opts) {\n  let resolvedSrc = fs.readlinkSync(src)\n  if (opts.dereference) {\n    resolvedSrc = path.resolve(process.cwd(), resolvedSrc)\n  }\n\n  if (!destStat) {\n    return fs.symlinkSync(resolvedSrc, dest)\n  } else {\n    let resolvedDest\n    try {\n      resolvedDest = fs.readlinkSync(dest)\n    } catch (err) {\n      // dest exists and is a regular file or directory,\n      // Windows may throw UNKNOWN error. If dest already exists,\n      // fs throws error anyway, so no need to guard against it here.\n      if (err.code === 'EINVAL' || err.code === 'UNKNOWN') return fs.symlinkSync(resolvedSrc, dest)\n      throw err\n    }\n    if (opts.dereference) {\n      resolvedDest = path.resolve(process.cwd(), resolvedDest)\n    }\n    if (stat.isSrcSubdir(resolvedSrc, resolvedDest)) {\n      throw new Error(`Cannot copy '${resolvedSrc}' to a subdirectory of itself, '${resolvedDest}'.`)\n    }\n\n    // prevent copy if src is a subdir of dest since unlinking\n    // dest in this case would result in removing src contents\n    // and therefore a broken symlink would be created.\n    if (fs.statSync(dest).isDirectory() && stat.isSrcSubdir(resolvedDest, resolvedSrc)) {\n      throw new Error(`Cannot overwrite '${resolvedDest}' with '${resolvedSrc}'.`)\n    }\n    return copyLink(resolvedSrc, dest)\n  }\n}\n\nfunction copyLink (resolvedSrc, dest) {\n  fs.unlinkSync(dest)\n  return fs.symlinkSync(resolvedSrc, dest)\n}\n\nmodule.exports = copySync\n","// Adapted from https://github.com/sindresorhus/make-dir\n// Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)\n// Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n'use strict'\nconst fs = require('../fs')\nconst path = require('path')\nconst atLeastNode = require('at-least-node')\n\nconst useNativeRecursiveOption = atLeastNode('10.12.0')\n\n// https://github.com/nodejs/node/issues/8987\n// https://github.com/libuv/libuv/pull/1088\nconst checkPath = pth => {\n  if (process.platform === 'win32') {\n    const pathHasInvalidWinCharacters = /[<>:\"|?*]/.test(pth.replace(path.parse(pth).root, ''))\n\n    if (pathHasInvalidWinCharacters) {\n      const error = new Error(`Path contains invalid characters: ${pth}`)\n      error.code = 'EINVAL'\n      throw error\n    }\n  }\n}\n\nconst processOptions = options => {\n  const defaults = { mode: 0o777 }\n  if (typeof options === 'number') options = { mode: options }\n  return { ...defaults, ...options }\n}\n\nconst permissionError = pth => {\n  // This replicates the exception of `fs.mkdir` with native the\n  // `recusive` option when run on an invalid drive under Windows.\n  const error = new Error(`operation not permitted, mkdir '${pth}'`)\n  error.code = 'EPERM'\n  error.errno = -4048\n  error.path = pth\n  error.syscall = 'mkdir'\n  return error\n}\n\nmodule.exports.makeDir = async (input, options) => {\n  checkPath(input)\n  options = processOptions(options)\n\n  if (useNativeRecursiveOption) {\n    const pth = path.resolve(input)\n\n    return fs.mkdir(pth, {\n      mode: options.mode,\n      recursive: true\n    })\n  }\n\n  const make = async pth => {\n    try {\n      await fs.mkdir(pth, options.mode)\n    } catch (error) {\n      if (error.code === 'EPERM') {\n        throw error\n      }\n\n      if (error.code === 'ENOENT') {\n        if (path.dirname(pth) === pth) {\n          throw permissionError(pth)\n        }\n\n        if (error.message.includes('null bytes')) {\n          throw error\n        }\n\n        await make(path.dirname(pth))\n        return make(pth)\n      }\n\n      try {\n        const stats = await fs.stat(pth)\n        if (!stats.isDirectory()) {\n          // This error is never exposed to the user\n          // it is caught below, and the original error is thrown\n          throw new Error('The path is not a directory')\n        }\n      } catch {\n        throw error\n      }\n    }\n  }\n\n  return make(path.resolve(input))\n}\n\nmodule.exports.makeDirSync = (input, options) => {\n  checkPath(input)\n  options = processOptions(options)\n\n  if (useNativeRecursiveOption) {\n    const pth = path.resolve(input)\n\n    return fs.mkdirSync(pth, {\n      mode: options.mode,\n      recursive: true\n    })\n  }\n\n  const make = pth => {\n    try {\n      fs.mkdirSync(pth, options.mode)\n    } catch (error) {\n      if (error.code === 'EPERM') {\n        throw error\n      }\n\n      if (error.code === 'ENOENT') {\n        if (path.dirname(pth) === pth) {\n          throw permissionError(pth)\n        }\n\n        if (error.message.includes('null bytes')) {\n          throw error\n        }\n\n        make(path.dirname(pth))\n        return make(pth)\n      }\n\n      try {\n        if (!fs.statSync(pth).isDirectory()) {\n          // This error is never exposed to the user\n          // it is caught below, and the original error is thrown\n          throw new Error('The path is not a directory')\n        }\n      } catch {\n        throw error\n      }\n    }\n  }\n\n  return make(path.resolve(input))\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdirs = require('../mkdirs').mkdirs\nconst pathExists = require('../path-exists').pathExists\nconst utimesMillis = require('../util/utimes').utimesMillis\nconst stat = require('../util/stat')\n\nfunction copy (src, dest, opts, cb) {\n  if (typeof opts === 'function' && !cb) {\n    cb = opts\n    opts = {}\n  } else if (typeof opts === 'function') {\n    opts = { filter: opts }\n  }\n\n  cb = cb || function () {}\n  opts = opts || {}\n\n  opts.clobber = 'clobber' in opts ? !!opts.clobber : true // default to true for now\n  opts.overwrite = 'overwrite' in opts ? !!opts.overwrite : opts.clobber // overwrite falls back to clobber\n\n  // Warn about using preserveTimestamps on 32-bit node\n  if (opts.preserveTimestamps && process.arch === 'ia32') {\n    console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269`)\n  }\n\n  stat.checkPaths(src, dest, 'copy', (err, stats) => {\n    if (err) return cb(err)\n    const { srcStat, destStat } = stats\n    stat.checkParentPaths(src, srcStat, dest, 'copy', err => {\n      if (err) return cb(err)\n      if (opts.filter) return handleFilter(checkParentDir, destStat, src, dest, opts, cb)\n      return checkParentDir(destStat, src, dest, opts, cb)\n    })\n  })\n}\n\nfunction checkParentDir (destStat, src, dest, opts, cb) {\n  const destParent = path.dirname(dest)\n  pathExists(destParent, (err, dirExists) => {\n    if (err) return cb(err)\n    if (dirExists) return startCopy(destStat, src, dest, opts, cb)\n    mkdirs(destParent, err => {\n      if (err) return cb(err)\n      return startCopy(destStat, src, dest, opts, cb)\n    })\n  })\n}\n\nfunction handleFilter (onInclude, destStat, src, dest, opts, cb) {\n  Promise.resolve(opts.filter(src, dest)).then(include => {\n    if (include) return onInclude(destStat, src, dest, opts, cb)\n    return cb()\n  }, error => cb(error))\n}\n\nfunction startCopy (destStat, src, dest, opts, cb) {\n  if (opts.filter) return handleFilter(getStats, destStat, src, dest, opts, cb)\n  return getStats(destStat, src, dest, opts, cb)\n}\n\nfunction getStats (destStat, src, dest, opts, cb) {\n  const stat = opts.dereference ? fs.stat : fs.lstat\n  stat(src, (err, srcStat) => {\n    if (err) return cb(err)\n\n    if (srcStat.isDirectory()) return onDir(srcStat, destStat, src, dest, opts, cb)\n    else if (srcStat.isFile() ||\n             srcStat.isCharacterDevice() ||\n             srcStat.isBlockDevice()) return onFile(srcStat, destStat, src, dest, opts, cb)\n    else if (srcStat.isSymbolicLink()) return onLink(destStat, src, dest, opts, cb)\n  })\n}\n\nfunction onFile (srcStat, destStat, src, dest, opts, cb) {\n  if (!destStat) return copyFile(srcStat, src, dest, opts, cb)\n  return mayCopyFile(srcStat, src, dest, opts, cb)\n}\n\nfunction mayCopyFile (srcStat, src, dest, opts, cb) {\n  if (opts.overwrite) {\n    fs.unlink(dest, err => {\n      if (err) return cb(err)\n      return copyFile(srcStat, src, dest, opts, cb)\n    })\n  } else if (opts.errorOnExist) {\n    return cb(new Error(`'${dest}' already exists`))\n  } else return cb()\n}\n\nfunction copyFile (srcStat, src, dest, opts, cb) {\n  fs.copyFile(src, dest, err => {\n    if (err) return cb(err)\n    if (opts.preserveTimestamps) return handleTimestampsAndMode(srcStat.mode, src, dest, cb)\n    return setDestMode(dest, srcStat.mode, cb)\n  })\n}\n\nfunction handleTimestampsAndMode (srcMode, src, dest, cb) {\n  // Make sure the file is writable before setting the timestamp\n  // otherwise open fails with EPERM when invoked with 'r+'\n  // (through utimes call)\n  if (fileIsNotWritable(srcMode)) {\n    return makeFileWritable(dest, srcMode, err => {\n      if (err) return cb(err)\n      return setDestTimestampsAndMode(srcMode, src, dest, cb)\n    })\n  }\n  return setDestTimestampsAndMode(srcMode, src, dest, cb)\n}\n\nfunction fileIsNotWritable (srcMode) {\n  return (srcMode & 0o200) === 0\n}\n\nfunction makeFileWritable (dest, srcMode, cb) {\n  return setDestMode(dest, srcMode | 0o200, cb)\n}\n\nfunction setDestTimestampsAndMode (srcMode, src, dest, cb) {\n  setDestTimestamps(src, dest, err => {\n    if (err) return cb(err)\n    return setDestMode(dest, srcMode, cb)\n  })\n}\n\nfunction setDestMode (dest, srcMode, cb) {\n  return fs.chmod(dest, srcMode, cb)\n}\n\nfunction setDestTimestamps (src, dest, cb) {\n  // The initial srcStat.atime cannot be trusted\n  // because it is modified by the read(2) system call\n  // (See https://nodejs.org/api/fs.html#fs_stat_time_values)\n  fs.stat(src, (err, updatedSrcStat) => {\n    if (err) return cb(err)\n    return utimesMillis(dest, updatedSrcStat.atime, updatedSrcStat.mtime, cb)\n  })\n}\n\nfunction onDir (srcStat, destStat, src, dest, opts, cb) {\n  if (!destStat) return mkDirAndCopy(srcStat.mode, src, dest, opts, cb)\n  if (destStat && !destStat.isDirectory()) {\n    return cb(new Error(`Cannot overwrite non-directory '${dest}' with directory '${src}'.`))\n  }\n  return copyDir(src, dest, opts, cb)\n}\n\nfunction mkDirAndCopy (srcMode, src, dest, opts, cb) {\n  fs.mkdir(dest, err => {\n    if (err) return cb(err)\n    copyDir(src, dest, opts, err => {\n      if (err) return cb(err)\n      return setDestMode(dest, srcMode, cb)\n    })\n  })\n}\n\nfunction copyDir (src, dest, opts, cb) {\n  fs.readdir(src, (err, items) => {\n    if (err) return cb(err)\n    return copyDirItems(items, src, dest, opts, cb)\n  })\n}\n\nfunction copyDirItems (items, src, dest, opts, cb) {\n  const item = items.pop()\n  if (!item) return cb()\n  return copyDirItem(items, item, src, dest, opts, cb)\n}\n\nfunction copyDirItem (items, item, src, dest, opts, cb) {\n  const srcItem = path.join(src, item)\n  const destItem = path.join(dest, item)\n  stat.checkPaths(srcItem, destItem, 'copy', (err, stats) => {\n    if (err) return cb(err)\n    const { destStat } = stats\n    startCopy(destStat, srcItem, destItem, opts, err => {\n      if (err) return cb(err)\n      return copyDirItems(items, src, dest, opts, cb)\n    })\n  })\n}\n\nfunction onLink (destStat, src, dest, opts, cb) {\n  fs.readlink(src, (err, resolvedSrc) => {\n    if (err) return cb(err)\n    if (opts.dereference) {\n      resolvedSrc = path.resolve(process.cwd(), resolvedSrc)\n    }\n\n    if (!destStat) {\n      return fs.symlink(resolvedSrc, dest, cb)\n    } else {\n      fs.readlink(dest, (err, resolvedDest) => {\n        if (err) {\n          // dest exists and is a regular file or directory,\n          // Windows may throw UNKNOWN error. If dest already exists,\n          // fs throws error anyway, so no need to guard against it here.\n          if (err.code === 'EINVAL' || err.code === 'UNKNOWN') return fs.symlink(resolvedSrc, dest, cb)\n          return cb(err)\n        }\n        if (opts.dereference) {\n          resolvedDest = path.resolve(process.cwd(), resolvedDest)\n        }\n        if (stat.isSrcSubdir(resolvedSrc, resolvedDest)) {\n          return cb(new Error(`Cannot copy '${resolvedSrc}' to a subdirectory of itself, '${resolvedDest}'.`))\n        }\n\n        // do not copy if src is a subdir of dest since unlinking\n        // dest in this case would result in removing src contents\n        // and therefore a broken symlink would be created.\n        if (destStat.isDirectory() && stat.isSrcSubdir(resolvedDest, resolvedSrc)) {\n          return cb(new Error(`Cannot overwrite '${resolvedDest}' with '${resolvedSrc}'.`))\n        }\n        return copyLink(resolvedSrc, dest, cb)\n      })\n    }\n  })\n}\n\nfunction copyLink (resolvedSrc, dest, cb) {\n  fs.unlink(dest, err => {\n    if (err) return cb(err)\n    return fs.symlink(resolvedSrc, dest, cb)\n  })\n}\n\nmodule.exports = copy\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdir = require('../mkdirs')\nconst remove = require('../remove')\n\nconst emptyDir = u(function emptyDir (dir, callback) {\n  callback = callback || function () {}\n  fs.readdir(dir, (err, items) => {\n    if (err) return mkdir.mkdirs(dir, callback)\n\n    items = items.map(item => path.join(dir, item))\n\n    deleteItem()\n\n    function deleteItem () {\n      const item = items.pop()\n      if (!item) return callback()\n      remove.remove(item, err => {\n        if (err) return callback(err)\n        deleteItem()\n      })\n    }\n  })\n})\n\nfunction emptyDirSync (dir) {\n  let items\n  try {\n    items = fs.readdirSync(dir)\n  } catch {\n    return mkdir.mkdirsSync(dir)\n  }\n\n  items.forEach(item => {\n    item = path.join(dir, item)\n    remove.removeSync(item)\n  })\n}\n\nmodule.exports = {\n  emptyDirSync,\n  emptydirSync: emptyDirSync,\n  emptyDir,\n  emptydir: emptyDir\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst assert = require('assert')\n\nconst isWindows = (process.platform === 'win32')\n\nfunction defaults (options) {\n  const methods = [\n    'unlink',\n    'chmod',\n    'stat',\n    'lstat',\n    'rmdir',\n    'readdir'\n  ]\n  methods.forEach(m => {\n    options[m] = options[m] || fs[m]\n    m = m + 'Sync'\n    options[m] = options[m] || fs[m]\n  })\n\n  options.maxBusyTries = options.maxBusyTries || 3\n}\n\nfunction rimraf (p, options, cb) {\n  let busyTries = 0\n\n  if (typeof options === 'function') {\n    cb = options\n    options = {}\n  }\n\n  assert(p, 'rimraf: missing path')\n  assert.strictEqual(typeof p, 'string', 'rimraf: path should be a string')\n  assert.strictEqual(typeof cb, 'function', 'rimraf: callback function required')\n  assert(options, 'rimraf: invalid options argument provided')\n  assert.strictEqual(typeof options, 'object', 'rimraf: options should be object')\n\n  defaults(options)\n\n  rimraf_(p, options, function CB (er) {\n    if (er) {\n      if ((er.code === 'EBUSY' || er.code === 'ENOTEMPTY' || er.code === 'EPERM') &&\n          busyTries < options.maxBusyTries) {\n        busyTries++\n        const time = busyTries * 100\n        // try again, with the same exact callback as this one.\n        return setTimeout(() => rimraf_(p, options, CB), time)\n      }\n\n      // already gone\n      if (er.code === 'ENOENT') er = null\n    }\n\n    cb(er)\n  })\n}\n\n// Two possible strategies.\n// 1. Assume it's a file.  unlink it, then do the dir stuff on EPERM or EISDIR\n// 2. Assume it's a directory.  readdir, then do the file stuff on ENOTDIR\n//\n// Both result in an extra syscall when you guess wrong.  However, there\n// are likely far more normal files in the world than directories.  This\n// is based on the assumption that a the average number of files per\n// directory is >= 1.\n//\n// If anyone ever complains about this, then I guess the strategy could\n// be made configurable somehow.  But until then, YAGNI.\nfunction rimraf_ (p, options, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  // sunos lets the root user unlink directories, which is... weird.\n  // so we have to lstat here and make sure it's not a dir.\n  options.lstat(p, (er, st) => {\n    if (er && er.code === 'ENOENT') {\n      return cb(null)\n    }\n\n    // Windows can EPERM on stat.  Life is suffering.\n    if (er && er.code === 'EPERM' && isWindows) {\n      return fixWinEPERM(p, options, er, cb)\n    }\n\n    if (st && st.isDirectory()) {\n      return rmdir(p, options, er, cb)\n    }\n\n    options.unlink(p, er => {\n      if (er) {\n        if (er.code === 'ENOENT') {\n          return cb(null)\n        }\n        if (er.code === 'EPERM') {\n          return (isWindows)\n            ? fixWinEPERM(p, options, er, cb)\n            : rmdir(p, options, er, cb)\n        }\n        if (er.code === 'EISDIR') {\n          return rmdir(p, options, er, cb)\n        }\n      }\n      return cb(er)\n    })\n  })\n}\n\nfunction fixWinEPERM (p, options, er, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  options.chmod(p, 0o666, er2 => {\n    if (er2) {\n      cb(er2.code === 'ENOENT' ? null : er)\n    } else {\n      options.stat(p, (er3, stats) => {\n        if (er3) {\n          cb(er3.code === 'ENOENT' ? null : er)\n        } else if (stats.isDirectory()) {\n          rmdir(p, options, er, cb)\n        } else {\n          options.unlink(p, cb)\n        }\n      })\n    }\n  })\n}\n\nfunction fixWinEPERMSync (p, options, er) {\n  let stats\n\n  assert(p)\n  assert(options)\n\n  try {\n    options.chmodSync(p, 0o666)\n  } catch (er2) {\n    if (er2.code === 'ENOENT') {\n      return\n    } else {\n      throw er\n    }\n  }\n\n  try {\n    stats = options.statSync(p)\n  } catch (er3) {\n    if (er3.code === 'ENOENT') {\n      return\n    } else {\n      throw er\n    }\n  }\n\n  if (stats.isDirectory()) {\n    rmdirSync(p, options, er)\n  } else {\n    options.unlinkSync(p)\n  }\n}\n\nfunction rmdir (p, options, originalEr, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  // try to rmdir first, and only readdir on ENOTEMPTY or EEXIST (SunOS)\n  // if we guessed wrong, and it's not a directory, then\n  // raise the original error.\n  options.rmdir(p, er => {\n    if (er && (er.code === 'ENOTEMPTY' || er.code === 'EEXIST' || er.code === 'EPERM')) {\n      rmkids(p, options, cb)\n    } else if (er && er.code === 'ENOTDIR') {\n      cb(originalEr)\n    } else {\n      cb(er)\n    }\n  })\n}\n\nfunction rmkids (p, options, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  options.readdir(p, (er, files) => {\n    if (er) return cb(er)\n\n    let n = files.length\n    let errState\n\n    if (n === 0) return options.rmdir(p, cb)\n\n    files.forEach(f => {\n      rimraf(path.join(p, f), options, er => {\n        if (errState) {\n          return\n        }\n        if (er) return cb(errState = er)\n        if (--n === 0) {\n          options.rmdir(p, cb)\n        }\n      })\n    })\n  })\n}\n\n// this looks simpler, and is strictly *faster*, but will\n// tie up the JavaScript thread and fail on excessively\n// deep directory trees.\nfunction rimrafSync (p, options) {\n  let st\n\n  options = options || {}\n  defaults(options)\n\n  assert(p, 'rimraf: missing path')\n  assert.strictEqual(typeof p, 'string', 'rimraf: path should be a string')\n  assert(options, 'rimraf: missing options')\n  assert.strictEqual(typeof options, 'object', 'rimraf: options should be object')\n\n  try {\n    st = options.lstatSync(p)\n  } catch (er) {\n    if (er.code === 'ENOENT') {\n      return\n    }\n\n    // Windows can EPERM on stat.  Life is suffering.\n    if (er.code === 'EPERM' && isWindows) {\n      fixWinEPERMSync(p, options, er)\n    }\n  }\n\n  try {\n    // sunos lets the root user unlink directories, which is... weird.\n    if (st && st.isDirectory()) {\n      rmdirSync(p, options, null)\n    } else {\n      options.unlinkSync(p)\n    }\n  } catch (er) {\n    if (er.code === 'ENOENT') {\n      return\n    } else if (er.code === 'EPERM') {\n      return isWindows ? fixWinEPERMSync(p, options, er) : rmdirSync(p, options, er)\n    } else if (er.code !== 'EISDIR') {\n      throw er\n    }\n    rmdirSync(p, options, er)\n  }\n}\n\nfunction rmdirSync (p, options, originalEr) {\n  assert(p)\n  assert(options)\n\n  try {\n    options.rmdirSync(p)\n  } catch (er) {\n    if (er.code === 'ENOTDIR') {\n      throw originalEr\n    } else if (er.code === 'ENOTEMPTY' || er.code === 'EEXIST' || er.code === 'EPERM') {\n      rmkidsSync(p, options)\n    } else if (er.code !== 'ENOENT') {\n      throw er\n    }\n  }\n}\n\nfunction rmkidsSync (p, options) {\n  assert(p)\n  assert(options)\n  options.readdirSync(p).forEach(f => rimrafSync(path.join(p, f), options))\n\n  if (isWindows) {\n    // We only end up here once we got ENOTEMPTY at least once, and\n    // at this point, we are guaranteed to have removed all the kids.\n    // So, we know that it won't be ENOENT or ENOTDIR or anything else.\n    // try really hard to delete stuff on windows, because it has a\n    // PROFOUNDLY annoying habit of not closing handles promptly when\n    // files are deleted, resulting in spurious ENOTEMPTY errors.\n    const startTime = Date.now()\n    do {\n      try {\n        const ret = options.rmdirSync(p, options)\n        return ret\n      } catch {}\n    } while (Date.now() - startTime < 500) // give up after 500ms\n  } else {\n    const ret = options.rmdirSync(p, options)\n    return ret\n  }\n}\n\nmodule.exports = rimraf\nrimraf.sync = rimrafSync\n","'use strict'\n\nconst file = require('./file')\nconst link = require('./link')\nconst symlink = require('./symlink')\n\nmodule.exports = {\n  // file\n  createFile: file.createFile,\n  createFileSync: file.createFileSync,\n  ensureFile: file.createFile,\n  ensureFileSync: file.createFileSync,\n  // link\n  createLink: link.createLink,\n  createLinkSync: link.createLinkSync,\n  ensureLink: link.createLink,\n  ensureLinkSync: link.createLinkSync,\n  // symlink\n  createSymlink: symlink.createSymlink,\n  createSymlinkSync: symlink.createSymlinkSync,\n  ensureSymlink: symlink.createSymlink,\n  ensureSymlinkSync: symlink.createSymlinkSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst path = require('path')\nconst fs = require('graceful-fs')\nconst mkdir = require('../mkdirs')\n\nfunction createFile (file, callback) {\n  function makeFile () {\n    fs.writeFile(file, '', err => {\n      if (err) return callback(err)\n      callback()\n    })\n  }\n\n  fs.stat(file, (err, stats) => { // eslint-disable-line handle-callback-err\n    if (!err && stats.isFile()) return callback()\n    const dir = path.dirname(file)\n    fs.stat(dir, (err, stats) => {\n      if (err) {\n        // if the directory doesn't exist, make it\n        if (err.code === 'ENOENT') {\n          return mkdir.mkdirs(dir, err => {\n            if (err) return callback(err)\n            makeFile()\n          })\n        }\n        return callback(err)\n      }\n\n      if (stats.isDirectory()) makeFile()\n      else {\n        // parent is not a directory\n        // This is just to cause an internal ENOTDIR error to be thrown\n        fs.readdir(dir, err => {\n          if (err) return callback(err)\n        })\n      }\n    })\n  })\n}\n\nfunction createFileSync (file) {\n  let stats\n  try {\n    stats = fs.statSync(file)\n  } catch {}\n  if (stats && stats.isFile()) return\n\n  const dir = path.dirname(file)\n  try {\n    if (!fs.statSync(dir).isDirectory()) {\n      // parent is not a directory\n      // This is just to cause an internal ENOTDIR error to be thrown\n      fs.readdirSync(dir)\n    }\n  } catch (err) {\n    // If the stat call above failed because the directory doesn't exist, create it\n    if (err && err.code === 'ENOENT') mkdir.mkdirsSync(dir)\n    else throw err\n  }\n\n  fs.writeFileSync(file, '')\n}\n\nmodule.exports = {\n  createFile: u(createFile),\n  createFileSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst path = require('path')\nconst fs = require('graceful-fs')\nconst mkdir = require('../mkdirs')\nconst pathExists = require('../path-exists').pathExists\n\nfunction createLink (srcpath, dstpath, callback) {\n  function makeLink (srcpath, dstpath) {\n    fs.link(srcpath, dstpath, err => {\n      if (err) return callback(err)\n      callback(null)\n    })\n  }\n\n  pathExists(dstpath, (err, destinationExists) => {\n    if (err) return callback(err)\n    if (destinationExists) return callback(null)\n    fs.lstat(srcpath, (err) => {\n      if (err) {\n        err.message = err.message.replace('lstat', 'ensureLink')\n        return callback(err)\n      }\n\n      const dir = path.dirname(dstpath)\n      pathExists(dir, (err, dirExists) => {\n        if (err) return callback(err)\n        if (dirExists) return makeLink(srcpath, dstpath)\n        mkdir.mkdirs(dir, err => {\n          if (err) return callback(err)\n          makeLink(srcpath, dstpath)\n        })\n      })\n    })\n  })\n}\n\nfunction createLinkSync (srcpath, dstpath) {\n  const destinationExists = fs.existsSync(dstpath)\n  if (destinationExists) return undefined\n\n  try {\n    fs.lstatSync(srcpath)\n  } catch (err) {\n    err.message = err.message.replace('lstat', 'ensureLink')\n    throw err\n  }\n\n  const dir = path.dirname(dstpath)\n  const dirExists = fs.existsSync(dir)\n  if (dirExists) return fs.linkSync(srcpath, dstpath)\n  mkdir.mkdirsSync(dir)\n\n  return fs.linkSync(srcpath, dstpath)\n}\n\nmodule.exports = {\n  createLink: u(createLink),\n  createLinkSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst path = require('path')\nconst fs = require('graceful-fs')\nconst _mkdirs = require('../mkdirs')\nconst mkdirs = _mkdirs.mkdirs\nconst mkdirsSync = _mkdirs.mkdirsSync\n\nconst _symlinkPaths = require('./symlink-paths')\nconst symlinkPaths = _symlinkPaths.symlinkPaths\nconst symlinkPathsSync = _symlinkPaths.symlinkPathsSync\n\nconst _symlinkType = require('./symlink-type')\nconst symlinkType = _symlinkType.symlinkType\nconst symlinkTypeSync = _symlinkType.symlinkTypeSync\n\nconst pathExists = require('../path-exists').pathExists\n\nfunction createSymlink (srcpath, dstpath, type, callback) {\n  callback = (typeof type === 'function') ? type : callback\n  type = (typeof type === 'function') ? false : type\n\n  pathExists(dstpath, (err, destinationExists) => {\n    if (err) return callback(err)\n    if (destinationExists) return callback(null)\n    symlinkPaths(srcpath, dstpath, (err, relative) => {\n      if (err) return callback(err)\n      srcpath = relative.toDst\n      symlinkType(relative.toCwd, type, (err, type) => {\n        if (err) return callback(err)\n        const dir = path.dirname(dstpath)\n        pathExists(dir, (err, dirExists) => {\n          if (err) return callback(err)\n          if (dirExists) return fs.symlink(srcpath, dstpath, type, callback)\n          mkdirs(dir, err => {\n            if (err) return callback(err)\n            fs.symlink(srcpath, dstpath, type, callback)\n          })\n        })\n      })\n    })\n  })\n}\n\nfunction createSymlinkSync (srcpath, dstpath, type) {\n  const destinationExists = fs.existsSync(dstpath)\n  if (destinationExists) return undefined\n\n  const relative = symlinkPathsSync(srcpath, dstpath)\n  srcpath = relative.toDst\n  type = symlinkTypeSync(relative.toCwd, type)\n  const dir = path.dirname(dstpath)\n  const exists = fs.existsSync(dir)\n  if (exists) return fs.symlinkSync(srcpath, dstpath, type)\n  mkdirsSync(dir)\n  return fs.symlinkSync(srcpath, dstpath, type)\n}\n\nmodule.exports = {\n  createSymlink: u(createSymlink),\n  createSymlinkSync\n}\n","'use strict'\n\nconst path = require('path')\nconst fs = require('graceful-fs')\nconst pathExists = require('../path-exists').pathExists\n\n/**\n * Function that returns two types of paths, one relative to symlink, and one\n * relative to the current working directory. Checks if path is absolute or\n * relative. If the path is relative, this function checks if the path is\n * relative to symlink or relative to current working directory. This is an\n * initiative to find a smarter `srcpath` to supply when building symlinks.\n * This allows you to determine which path to use out of one of three possible\n * types of source paths. The first is an absolute path. This is detected by\n * `path.isAbsolute()`. When an absolute path is provided, it is checked to\n * see if it exists. If it does it's used, if not an error is returned\n * (callback)/ thrown (sync). The other two options for `srcpath` are a\n * relative url. By default Node's `fs.symlink` works by creating a symlink\n * using `dstpath` and expects the `srcpath` to be relative to the newly\n * created symlink. If you provide a `srcpath` that does not exist on the file\n * system it results in a broken symlink. To minimize this, the function\n * checks to see if the 'relative to symlink' source file exists, and if it\n * does it will use it. If it does not, it checks if there's a file that\n * exists that is relative to the current working directory, if does its used.\n * This preserves the expectations of the original fs.symlink spec and adds\n * the ability to pass in `relative to current working direcotry` paths.\n */\n\nfunction symlinkPaths (srcpath, dstpath, callback) {\n  if (path.isAbsolute(srcpath)) {\n    return fs.lstat(srcpath, (err) => {\n      if (err) {\n        err.message = err.message.replace('lstat', 'ensureSymlink')\n        return callback(err)\n      }\n      return callback(null, {\n        toCwd: srcpath,\n        toDst: srcpath\n      })\n    })\n  } else {\n    const dstdir = path.dirname(dstpath)\n    const relativeToDst = path.join(dstdir, srcpath)\n    return pathExists(relativeToDst, (err, exists) => {\n      if (err) return callback(err)\n      if (exists) {\n        return callback(null, {\n          toCwd: relativeToDst,\n          toDst: srcpath\n        })\n      } else {\n        return fs.lstat(srcpath, (err) => {\n          if (err) {\n            err.message = err.message.replace('lstat', 'ensureSymlink')\n            return callback(err)\n          }\n          return callback(null, {\n            toCwd: srcpath,\n            toDst: path.relative(dstdir, srcpath)\n          })\n        })\n      }\n    })\n  }\n}\n\nfunction symlinkPathsSync (srcpath, dstpath) {\n  let exists\n  if (path.isAbsolute(srcpath)) {\n    exists = fs.existsSync(srcpath)\n    if (!exists) throw new Error('absolute srcpath does not exist')\n    return {\n      toCwd: srcpath,\n      toDst: srcpath\n    }\n  } else {\n    const dstdir = path.dirname(dstpath)\n    const relativeToDst = path.join(dstdir, srcpath)\n    exists = fs.existsSync(relativeToDst)\n    if (exists) {\n      return {\n        toCwd: relativeToDst,\n        toDst: srcpath\n      }\n    } else {\n      exists = fs.existsSync(srcpath)\n      if (!exists) throw new Error('relative srcpath does not exist')\n      return {\n        toCwd: srcpath,\n        toDst: path.relative(dstdir, srcpath)\n      }\n    }\n  }\n}\n\nmodule.exports = {\n  symlinkPaths,\n  symlinkPathsSync\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\n\nfunction symlinkType (srcpath, type, callback) {\n  callback = (typeof type === 'function') ? type : callback\n  type = (typeof type === 'function') ? false : type\n  if (type) return callback(null, type)\n  fs.lstat(srcpath, (err, stats) => {\n    if (err) return callback(null, 'file')\n    type = (stats && stats.isDirectory()) ? 'dir' : 'file'\n    callback(null, type)\n  })\n}\n\nfunction symlinkTypeSync (srcpath, type) {\n  let stats\n\n  if (type) return type\n  try {\n    stats = fs.lstatSync(srcpath)\n  } catch {\n    return 'file'\n  }\n  return (stats && stats.isDirectory()) ? 'dir' : 'file'\n}\n\nmodule.exports = {\n  symlinkType,\n  symlinkTypeSync\n}\n","'use strict'\n\nconst u = require('universalify').fromPromise\nconst jsonFile = require('./jsonfile')\n\njsonFile.outputJson = u(require('./output-json'))\njsonFile.outputJsonSync = require('./output-json-sync')\n// aliases\njsonFile.outputJSON = jsonFile.outputJson\njsonFile.outputJSONSync = jsonFile.outputJsonSync\njsonFile.writeJSON = jsonFile.writeJson\njsonFile.writeJSONSync = jsonFile.writeJsonSync\njsonFile.readJSON = jsonFile.readJson\njsonFile.readJSONSync = jsonFile.readJsonSync\n\nmodule.exports = jsonFile\n","'use strict'\n\nconst jsonFile = require('jsonfile')\n\nmodule.exports = {\n  // jsonfile exports\n  readJson: jsonFile.readFile,\n  readJsonSync: jsonFile.readFileSync,\n  writeJson: jsonFile.writeFile,\n  writeJsonSync: jsonFile.writeFileSync\n}\n","let _fs\ntry {\n  _fs = require('graceful-fs')\n} catch (_) {\n  _fs = require('fs')\n}\nconst universalify = require('universalify')\nconst { stringify, stripBom } = require('./utils')\n\nasync function _readFile (file, options = {}) {\n  if (typeof options === 'string') {\n    options = { encoding: options }\n  }\n\n  const fs = options.fs || _fs\n\n  const shouldThrow = 'throws' in options ? options.throws : true\n\n  let data = await universalify.fromCallback(fs.readFile)(file, options)\n\n  data = stripBom(data)\n\n  let obj\n  try {\n    obj = JSON.parse(data, options ? options.reviver : null)\n  } catch (err) {\n    if (shouldThrow) {\n      err.message = `${file}: ${err.message}`\n      throw err\n    } else {\n      return null\n    }\n  }\n\n  return obj\n}\n\nconst readFile = universalify.fromPromise(_readFile)\n\nfunction readFileSync (file, options = {}) {\n  if (typeof options === 'string') {\n    options = { encoding: options }\n  }\n\n  const fs = options.fs || _fs\n\n  const shouldThrow = 'throws' in options ? options.throws : true\n\n  try {\n    let content = fs.readFileSync(file, options)\n    content = stripBom(content)\n    return JSON.parse(content, options.reviver)\n  } catch (err) {\n    if (shouldThrow) {\n      err.message = `${file}: ${err.message}`\n      throw err\n    } else {\n      return null\n    }\n  }\n}\n\nasync function _writeFile (file, obj, options = {}) {\n  const fs = options.fs || _fs\n\n  const str = stringify(obj, options)\n\n  await universalify.fromCallback(fs.writeFile)(file, str, options)\n}\n\nconst writeFile = universalify.fromPromise(_writeFile)\n\nfunction writeFileSync (file, obj, options = {}) {\n  const fs = options.fs || _fs\n\n  const str = stringify(obj, options)\n  // not sure if fs.writeFileSync returns anything, but just in case\n  return fs.writeFileSync(file, str, options)\n}\n\nconst jsonfile = {\n  readFile,\n  readFileSync,\n  writeFile,\n  writeFileSync\n}\n\nmodule.exports = jsonfile\n","'use strict'\n\nconst { stringify } = require('jsonfile/utils')\nconst { outputFile } = require('../output')\n\nasync function outputJson (file, data, options = {}) {\n  const str = stringify(data, options)\n\n  await outputFile(file, str, options)\n}\n\nmodule.exports = outputJson\n","'use strict'\n\nconst { stringify } = require('jsonfile/utils')\nconst { outputFileSync } = require('../output')\n\nfunction outputJsonSync (file, data, options) {\n  const str = stringify(data, options)\n\n  outputFileSync(file, str, options)\n}\n\nmodule.exports = outputJsonSync\n","'use strict'\n\nmodule.exports = {\n  moveSync: require('./move-sync')\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst copySync = require('../copy-sync').copySync\nconst removeSync = require('../remove').removeSync\nconst mkdirpSync = require('../mkdirs').mkdirpSync\nconst stat = require('../util/stat')\n\nfunction moveSync (src, dest, opts) {\n  opts = opts || {}\n  const overwrite = opts.overwrite || opts.clobber || false\n\n  const { srcStat } = stat.checkPathsSync(src, dest, 'move')\n  stat.checkParentPathsSync(src, srcStat, dest, 'move')\n  mkdirpSync(path.dirname(dest))\n  return doRename(src, dest, overwrite)\n}\n\nfunction doRename (src, dest, overwrite) {\n  if (overwrite) {\n    removeSync(dest)\n    return rename(src, dest, overwrite)\n  }\n  if (fs.existsSync(dest)) throw new Error('dest already exists.')\n  return rename(src, dest, overwrite)\n}\n\nfunction rename (src, dest, overwrite) {\n  try {\n    fs.renameSync(src, dest)\n  } catch (err) {\n    if (err.code !== 'EXDEV') throw err\n    return moveAcrossDevice(src, dest, overwrite)\n  }\n}\n\nfunction moveAcrossDevice (src, dest, overwrite) {\n  const opts = {\n    overwrite,\n    errorOnExist: true\n  }\n  copySync(src, dest, opts)\n  return removeSync(src)\n}\n\nmodule.exports = moveSync\n","'use strict'\n\nconst u = require('universalify').fromCallback\nmodule.exports = {\n  move: u(require('./move'))\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst copy = require('../copy').copy\nconst remove = require('../remove').remove\nconst mkdirp = require('../mkdirs').mkdirp\nconst pathExists = require('../path-exists').pathExists\nconst stat = require('../util/stat')\n\nfunction move (src, dest, opts, cb) {\n  if (typeof opts === 'function') {\n    cb = opts\n    opts = {}\n  }\n\n  const overwrite = opts.overwrite || opts.clobber || false\n\n  stat.checkPaths(src, dest, 'move', (err, stats) => {\n    if (err) return cb(err)\n    const { srcStat } = stats\n    stat.checkParentPaths(src, srcStat, dest, 'move', err => {\n      if (err) return cb(err)\n      mkdirp(path.dirname(dest), err => {\n        if (err) return cb(err)\n        return doRename(src, dest, overwrite, cb)\n      })\n    })\n  })\n}\n\nfunction doRename (src, dest, overwrite, cb) {\n  if (overwrite) {\n    return remove(dest, err => {\n      if (err) return cb(err)\n      return rename(src, dest, overwrite, cb)\n    })\n  }\n  pathExists(dest, (err, destExists) => {\n    if (err) return cb(err)\n    if (destExists) return cb(new Error('dest already exists.'))\n    return rename(src, dest, overwrite, cb)\n  })\n}\n\nfunction rename (src, dest, overwrite, cb) {\n  fs.rename(src, dest, err => {\n    if (!err) return cb()\n    if (err.code !== 'EXDEV') return cb(err)\n    return moveAcrossDevice(src, dest, overwrite, cb)\n  })\n}\n\nfunction moveAcrossDevice (src, dest, overwrite, cb) {\n  const opts = {\n    overwrite,\n    errorOnExist: true\n  }\n  copy(src, dest, opts, err => {\n    if (err) return cb(err)\n    return remove(src, cb)\n  })\n}\n\nmodule.exports = move\n","module.exports = require(\"process\");","/* @flow */\n/*::\n\ntype DotenvParseOptions = {\n  debug?: boolean\n}\n\n// keys and values from src\ntype DotenvParseOutput = { [string]: string }\n\ntype DotenvConfigOptions = {\n  path?: string, // path to .env file\n  encoding?: string, // encoding of .env file\n  debug?: string // turn on logging for debugging purposes\n}\n\ntype DotenvConfigOutput = {\n  parsed?: DotenvParseOutput,\n  error?: Error\n}\n\n*/\n\nconst fs = require('fs')\nconst path = require('path')\n\nfunction log (message /*: string */) {\n  console.log(`[dotenv][DEBUG] ${message}`)\n}\n\nconst NEWLINE = '\\n'\nconst RE_INI_KEY_VAL = /^\\s*([\\w.-]+)\\s*=\\s*(.*)?\\s*$/\nconst RE_NEWLINES = /\\\\n/g\nconst NEWLINES_MATCH = /\\n|\\r|\\r\\n/\n\n// Parses src into an Object\nfunction parse (src /*: string | Buffer */, options /*: ?DotenvParseOptions */) /*: DotenvParseOutput */ {\n  const debug = Boolean(options && options.debug)\n  const obj = {}\n\n  // convert Buffers before splitting into lines and processing\n  src.toString().split(NEWLINES_MATCH).forEach(function (line, idx) {\n    // matching \"KEY' and 'VAL' in 'KEY=VAL'\n    const keyValueArr = line.match(RE_INI_KEY_VAL)\n    // matched?\n    if (keyValueArr != null) {\n      const key = keyValueArr[1]\n      // default undefined or missing values to empty string\n      let val = (keyValueArr[2] || '')\n      const end = val.length - 1\n      const isDoubleQuoted = val[0] === '\"' && val[end] === '\"'\n      const isSingleQuoted = val[0] === \"'\" && val[end] === \"'\"\n\n      // if single or double quoted, remove quotes\n      if (isSingleQuoted || isDoubleQuoted) {\n        val = val.substring(1, end)\n\n        // if double quoted, expand newlines\n        if (isDoubleQuoted) {\n          val = val.replace(RE_NEWLINES, NEWLINE)\n        }\n      } else {\n        // remove surrounding whitespace\n        val = val.trim()\n      }\n\n      obj[key] = val\n    } else if (debug) {\n      log(`did not match key and value when parsing line ${idx + 1}: ${line}`)\n    }\n  })\n\n  return obj\n}\n\n// Populates process.env from .env file\nfunction config (options /*: ?DotenvConfigOptions */) /*: DotenvConfigOutput */ {\n  let dotenvPath = path.resolve(process.cwd(), '.env')\n  let encoding /*: string */ = 'utf8'\n  let debug = false\n\n  if (options) {\n    if (options.path != null) {\n      dotenvPath = options.path\n    }\n    if (options.encoding != null) {\n      encoding = options.encoding\n    }\n    if (options.debug != null) {\n      debug = true\n    }\n  }\n\n  try {\n    // specifying an encoding returns a string instead of a buffer\n    const parsed = parse(fs.readFileSync(dotenvPath, { encoding }), { debug })\n\n    Object.keys(parsed).forEach(function (key) {\n      if (!Object.prototype.hasOwnProperty.call(process.env, key)) {\n        process.env[key] = parsed[key]\n      } else if (debug) {\n        log(`\"${key}\" is already defined in \\`process.env\\` and will not be overwritten`)\n      }\n    })\n\n    return { parsed }\n  } catch (e) {\n    return { error: e }\n  }\n}\n\nmodule.exports.config = config\nmodule.exports.parse = parse\n","'use strict';\n\nfunction isBMP (buffer) {\n  return ('BM' === buffer.toString('ascii', 0, 2));\n}\n\nfunction calculate (buffer) {\n  return {\n    'width': buffer.readUInt32LE(18),\n    'height': Math.abs(buffer.readInt32LE(22))\n  };\n}\n\nmodule.exports = {\n  'detect': isBMP,\n  'calculate': calculate\n};\n","'use strict';\n\nvar TYPE_CURSOR = 2;\n\nfunction isCUR (buffer) {\n  var type;\n  if (buffer.readUInt16LE(0) !== 0) {\n    return false;\n  }\n  type = buffer.readUInt16LE(2);\n  return type === TYPE_CURSOR;\n}\n\nmodule.exports = {\n  'detect': isCUR,\n  'calculate': require('./ico').calculate\n};\n","'use strict';\n\nfunction isDDS(buffer){\n  return buffer.readUInt32LE(0) === 0x20534444;\n}\n\nfunction calculate(buffer){\n  // read file resolution metadata\n  return {\n    'height': buffer.readUInt32LE(12),\n    'width': buffer.readUInt32LE(16)\n  };\n}\n\nmodule.exports = {\n  'detect': isDDS,\n  'calculate': calculate\n};\n","'use strict';\n\nvar gifRegexp = /^GIF8[79]a/;\nfunction isGIF (buffer) {\n  var signature = buffer.toString('ascii', 0, 6);\n  return (gifRegexp.test(signature));\n}\n\nfunction calculate(buffer) {\n  return {\n    'width': buffer.readUInt16LE(6),\n    'height': buffer.readUInt16LE(8)\n  };\n}\n\nmodule.exports = {\n  'detect': isGIF,\n  'calculate': calculate\n};\n","'use strict';\n\n/**\n * ICNS Header\n *\n * | Offset | Size | Purpose                                                |\n * | 0\t    | 4    | Magic literal, must be \"icns\" (0x69, 0x63, 0x6e, 0x73) |\n * | 4      | 4    | Length of file, in bytes, msb first.                   |\n *\n **/\nvar SIZE_HEADER = 4 + 4; // 8\nvar FILE_LENGTH_OFFSET = 4; // MSB => BIG ENDIAN\n\n/**\n * Image Entry\n *\n * | Offset | Size | Purpose                                                          |\n * | 0\t    | 4    | Icon type, see OSType below.                                     |\n * | 4      | 4    | Length of data, in bytes (including type and length), msb first. |\n * | 8      | n    | Icon data                                                        |\n *\n **/\nvar ENTRY_LENGTH_OFFSET = 4; // MSB => BIG ENDIAN\n\nfunction isICNS (buffer) {\n  return ('icns' === buffer.toString('ascii', 0, 4));\n}\n\nvar ICON_TYPE_SIZE = {\n  ICON: 32,\n  'ICN#': 32,\n  // m => 16 x 16\n  'icm#': 16,\n  icm4: 16,\n  icm8: 16,\n  // s => 16 x 16\n  'ics#': 16,\n  ics4: 16,\n  ics8: 16,\n  is32: 16,\n  s8mk: 16,\n  icp4: 16,\n  // l => 32 x 32\n  icl4: 32,\n  icl8: 32,\n  il32: 32,\n  l8mk: 32,\n  icp5: 32,\n  ic11: 32,\n  // h => 48 x 48\n  ich4: 48,\n  ich8: 48,\n  ih32: 48,\n  h8mk: 48,\n  // . => 64 x 64\n  icp6: 64,\n  ic12: 32,\n  // t => 128 x 128\n  it32: 128,\n  t8mk: 128,\n  ic07: 128,\n  // . => 256 x 256\n  ic08: 256,\n  ic13: 256,\n  // . => 512 x 512\n  ic09: 512,\n  ic14: 512,\n  // . => 1024 x 1024\n  ic10: 1024,\n};\n\nfunction readImageHeader(buffer, imageOffset) {\n  var imageLengthOffset = imageOffset + ENTRY_LENGTH_OFFSET;\n  // returns [type, length]\n  return [\n    buffer.toString('ascii', imageOffset, imageLengthOffset),\n    buffer.readUInt32BE(imageLengthOffset)\n  ];\n}\n\nfunction getImageSize(type) {\n  var size = ICON_TYPE_SIZE[type];\n  return { width: size, height: size, type: type };\n}\n\nfunction calculate (buffer) {\n  var\n    bufferLength = buffer.length,\n    imageOffset = SIZE_HEADER,\n    fileLength = buffer.readUInt32BE(FILE_LENGTH_OFFSET),\n    imageHeader,\n    imageSize,\n    result;\n\n  imageHeader = readImageHeader(buffer, imageOffset);\n  imageSize = getImageSize(imageHeader[0]);\n  imageOffset += imageHeader[1];\n\n  if (imageOffset === fileLength) {\n    return imageSize;\n  }\n  \n  result = {\n    width: imageSize.width,\n    height: imageSize.height,\n    images: [imageSize]\n  };\n  \n  while (imageOffset < fileLength && imageOffset < bufferLength) {\n    imageHeader = readImageHeader(buffer, imageOffset);\n    imageSize = getImageSize(imageHeader[0]);\n    imageOffset += imageHeader[1];\n    result.images.push(imageSize);\n  }\n  \n  return result;\n}\n\nmodule.exports = {\n  'detect': isICNS,\n  'calculate': calculate\n};\n","'use strict';\n\n// NOTE: we only support baseline and progressive JPGs here\n// due to the structure of the loader class, we only get a buffer\n// with a maximum size of 4096 bytes. so if the SOF marker is outside\n// if this range we can't detect the file size correctly.\n\nfunction isJPG (buffer) { //, filepath\n  var SOIMarker = buffer.toString('hex', 0, 2);\n  return ('ffd8' === SOIMarker);\n}\n\nfunction extractSize (buffer, i) {\n  return {\n    'height' : buffer.readUInt16BE(i),\n    'width' : buffer.readUInt16BE(i + 2)\n  };\n}\n\nfunction validateBuffer (buffer, i) {\n  // index should be within buffer limits\n  if (i > buffer.length) {\n    throw new TypeError('Corrupt JPG, exceeded buffer limits');\n  }\n  // Every JPEG block must begin with a 0xFF\n  if (buffer[i] !== 0xFF) {\n    throw new TypeError('Invalid JPG, marker table corrupted');\n  }\n}\n\nfunction calculate (buffer) {\n\n  // Skip 4 chars, they are for signature\n  buffer = buffer.slice(4);\n\n  var i, next;\n  while (buffer.length) {\n    // read length of the next block\n    i = buffer.readUInt16BE(0);\n\n    // ensure correct format\n    validateBuffer(buffer, i);\n\n    // 0xFFC0 is baseline standard(SOF)\n    // 0xFFC1 is baseline optimized(SOF)\n    // 0xFFC2 is progressive(SOF2)\n    next = buffer[i + 1];\n    if (next === 0xC0 || next === 0xC1 || next === 0xC2) {\n      return extractSize(buffer, i + 5);\n    }\n\n    // move to the next block\n    buffer = buffer.slice(i + 2);\n  }\n\n  throw new TypeError('Invalid JPG, no size found');\n}\n\nmodule.exports = {\n  'detect': isJPG,\n  'calculate': calculate\n};\n","'use strict';\n\nvar pngSignature = 'PNG\\r\\n\\x1a\\n';\nvar pngImageHeaderChunkName = 'IHDR';\n\n// Used to detect \"fried\" png's: http://www.jongware.com/pngdefry.html\nvar pngFriedChunkName = 'CgBI'; \n\nfunction isPNG (buffer) {\n  if (pngSignature === buffer.toString('ascii', 1, 8)) {\n    var chunkName = buffer.toString('ascii', 12, 16);\n    if (chunkName === pngFriedChunkName) {\n      chunkName = buffer.toString('ascii', 28, 32);\n    }\n    if (chunkName !== pngImageHeaderChunkName) {\n      throw new TypeError('invalid png');\n    }\n    return true;\n  }\n}\n\nfunction calculate (buffer) {\n  if (buffer.toString('ascii', 12, 16) === pngFriedChunkName) {\n    return {\n      'width': buffer.readUInt32BE(32),\n      'height': buffer.readUInt32BE(36)\n    };\n  }\n  return {\n    'width': buffer.readUInt32BE(16),\n    'height': buffer.readUInt32BE(20)\n  };\n}\n\nmodule.exports = {\n  'detect': isPNG,\n  'calculate': calculate\n};\n","'use strict';\n\nfunction isPSD (buffer) {\n  return ('8BPS' === buffer.toString('ascii', 0, 4));\n}\n\nfunction calculate (buffer) {\n  return {\n    'width': buffer.readUInt32BE(18),\n    'height': buffer.readUInt32BE(14)\n  };\n}\n\nmodule.exports = {\n  'detect': isPSD,\n  'calculate': calculate\n};\n","'use strict';\n\nvar svgReg = /<svg[^>]+[^>]*>/;\nfunction isSVG (buffer) {\n  return svgReg.test(buffer);\n}\n\nvar extractorRegExps = {\n  'root': /<svg\\s[^>]+>/,\n  'width': /\\bwidth=(['\"])([^%]+?)\\1/,\n  'height': /\\bheight=(['\"])([^%]+?)\\1/,\n  'viewbox': /\\bviewBox=(['\"])(.+?)\\1/\n};\n\nfunction parseViewbox (viewbox) {\n  var bounds = viewbox.split(' ');\n  return {\n    'width': parseInt(bounds[2], 10),\n    'height': parseInt(bounds[3], 10)\n  };\n}\n\nfunction parseAttributes (root) {\n  var width = root.match(extractorRegExps.width);\n  var height = root.match(extractorRegExps.height);\n  var viewbox = root.match(extractorRegExps.viewbox);\n  return {\n    'width': width && parseInt(width[2], 10),\n    'height': height && parseInt(height[2], 10),\n    'viewbox': viewbox && parseViewbox(viewbox[2])\n  };\n}\n\nfunction calculateByDimensions (attrs) {\n  return {\n    'width': attrs.width,\n    'height': attrs.height\n  };\n}\n\nfunction calculateByViewbox (attrs) {\n  var ratio = attrs.viewbox.width / attrs.viewbox.height;\n  if (attrs.width) {\n    return {\n      'width': attrs.width,\n      'height': Math.floor(attrs.width / ratio)\n    };\n  }\n  if (attrs.height) {\n    return {\n      'width': Math.floor(attrs.height * ratio),\n      'height': attrs.height\n    };\n  }\n  return {\n    'width': attrs.viewbox.width,\n    'height': attrs.viewbox.height\n  };\n}\n\nfunction calculate (buffer) {\n  var root = buffer.toString('utf8').match(extractorRegExps.root);\n  if (root) {\n    var attrs = parseAttributes(root[0]);\n    if (attrs.width && attrs.height) {\n      return calculateByDimensions(attrs);\n    }\n    if (attrs.viewbox) {\n      return calculateByViewbox(attrs);\n    }\n  }\n  throw new TypeError('invalid svg');\n}\n\nmodule.exports = {\n  'detect': isSVG,\n  'calculate': calculate\n};\n","'use strict';\n\n// based on http://www.compix.com/fileformattif.htm\n// TO-DO: support big-endian as well\n\nvar fs = require('fs');\nvar readUInt = require('../readUInt');\n\nfunction isTIFF (buffer) {\n  var hex4 = buffer.toString('hex', 0, 4);\n  return ('49492a00' === hex4 || '4d4d002a' === hex4);\n}\n\n// Read IFD (image-file-directory) into a buffer\nfunction readIFD (buffer, filepath, isBigEndian) {\n\n  var ifdOffset = readUInt(buffer, 32, 4, isBigEndian);\n\n  // read only till the end of the file\n  var bufferSize = 1024;\n  var fileSize = fs.statSync(filepath).size;\n  if (ifdOffset + bufferSize > fileSize) {\n    bufferSize = fileSize - ifdOffset - 10;\n  }\n\n  // populate the buffer\n  var endBuffer = new Buffer(bufferSize);\n  var descriptor = fs.openSync(filepath, 'r');\n  fs.readSync(descriptor, endBuffer, 0, bufferSize, ifdOffset);\n\n  // var ifdLength = readUInt(endBuffer, 16, 0, isBigEndian);\n  var ifdBuffer = endBuffer.slice(2); //, 2 + 12 * ifdLength);\n  return ifdBuffer;\n}\n\n// TIFF values seem to be messed up on Big-Endian, this helps\nfunction readValue (buffer, isBigEndian) {\n  var low = readUInt(buffer, 16, 8, isBigEndian);\n  var high = readUInt(buffer, 16, 10, isBigEndian);\n  return (high << 16) + low;\n}\n\n// move to the next tag\nfunction nextTag (buffer) {\n  if (buffer.length > 24) {\n    return buffer.slice(12);\n  }\n}\n\n// Extract IFD tags from TIFF metadata\n/* eslint-disable complexity */\nfunction extractTags (buffer, isBigEndian) {\n  var tags = {};\n  var code, type, length;\n\n  while (buffer && buffer.length) {\n    code = readUInt(buffer, 16, 0, isBigEndian);\n    type = readUInt(buffer, 16, 2, isBigEndian);\n    length = readUInt(buffer, 32, 4, isBigEndian);\n\n    // 0 means end of IFD\n    if (code === 0) {\n      break;\n    } else {\n      // 256 is width, 257 is height\n      // if (code === 256 || code === 257) {\n      if (length === 1 && (type === 3 || type === 4)) {\n        tags[code] = readValue(buffer, isBigEndian);\n      }\n\n      // move to the next tag\n      buffer = nextTag(buffer);\n    }\n  }\n  return tags;\n}\n/* eslint-enable complexity */\n\n// Test if the TIFF is Big Endian or Little Endian\nfunction determineEndianness (buffer) {\n  var signature = buffer.toString('ascii', 0, 2);\n  if ('II' === signature) {\n    return 'LE';\n  } else if ('MM' === signature) {\n    return 'BE';\n  }\n}\n\nfunction calculate (buffer, filepath) {\n\n  if (!filepath) {\n    throw new TypeError('Tiff doesn\\'t support buffer');\n  }\n\n  // Determine BE/LE\n  var isBigEndian = determineEndianness(buffer) === 'BE';\n\n  // read the IFD\n  var ifdBuffer = readIFD(buffer, filepath, isBigEndian);\n\n  // extract the tags from the IFD\n  var tags = extractTags(ifdBuffer, isBigEndian);\n\n  var width = tags[256];\n  var height = tags[257];\n\n  if (!width || !height) {\n    throw new TypeError('Invalid Tiff, missing tags');\n  }\n\n  return {\n    'width': width,\n    'height': height\n  };\n}\n\nmodule.exports = {\n  'detect': isTIFF,\n  'calculate': calculate\n};\n","'use strict';\n\n// Abstract reading multi-byte unsigned integers\nfunction readUInt (buffer, bits, offset, isBigEndian) {\n  offset = offset || 0;\n  var endian = isBigEndian ? 'BE' : 'LE';\n  var method = buffer['readUInt' + bits + endian];\n  return method.call(buffer, offset);\n}\n\nmodule.exports = readUInt;\n","'use strict';\n\n// based on https://developers.google.com/speed/webp/docs/riff_container\n\nfunction isWebP (buffer) {\n  var riffHeader = 'RIFF' === buffer.toString('ascii', 0, 4);\n  var webpHeader = 'WEBP' === buffer.toString('ascii', 8, 12);\n  var vp8Header  = 'VP8'  === buffer.toString('ascii', 12, 15);\n  return (riffHeader && webpHeader && vp8Header);\n}\n\n/* eslint-disable complexity */\nfunction calculate (buffer) {\n  var chunkHeader = buffer.toString('ascii', 12, 16);\n  buffer = buffer.slice(20, 30);\n\n  // Extended webp stream signature\n  if (chunkHeader === 'VP8X') {\n    var extendedHeader = buffer[0];\n    var validStart = (extendedHeader & 0xc0) === 0;\n    var validEnd = (extendedHeader & 0x01) === 0;\n    if (validStart && validEnd) {\n      return calculateExtended(buffer);\n    } else {\n      return false;\n    }\n  }\n\n  // Lossless webp stream signature\n  if (chunkHeader === 'VP8 ' && buffer[0] !== 0x2f) {\n    return calculateLossy(buffer);\n  }\n\n  // Lossy webp stream signature\n  var signature = buffer.toString('hex', 3, 6);\n  if (chunkHeader === 'VP8L' && signature !== '9d012a') {\n    return calculateLossless(buffer);\n  }\n\n  return false;\n}\n/* eslint-enable complexity */\n\nfunction calculateExtended (buffer) {\n  return {\n    'width': 1 + buffer.readUIntLE(4, 3),\n    'height': 1 + buffer.readUIntLE(7, 3)\n  };\n}\n\nfunction calculateLossless (buffer) {\n  return {\n    'width': 1 + (((buffer[2] & 0x3F) << 8) | buffer[1]),\n    'height': 1 + (((buffer[4] & 0xF) << 10) | (buffer[3] << 2) |\n                  ((buffer[2] & 0xC0) >> 6))\n  };\n}\n\nfunction calculateLossy (buffer) {\n  // `& 0x3fff` returns the last 14 bits\n  // TO-DO: include webp scaling in the calculations\n  return {\n    'width': buffer.readInt16LE(6) & 0x3fff,\n    'height': buffer.readInt16LE(8) & 0x3fff\n  };\n}\n\nmodule.exports = {\n  'detect': isWebP,\n  'calculate': calculate\n};\n","'use strict';\n\nvar typeHandlers = require('./types');\n\nmodule.exports = function (buffer, filepath) {\n  var type, result;\n  for (type in typeHandlers) {\n    result = typeHandlers[type].detect(buffer, filepath);\n    if (result) {\n      return type;\n    }\n  }\n};\n","/** @module Types:base */\n\nimport { DmState } from '@brightsign/bsdatamodel';\nimport { BaContextModelState } from '@brightsign/ba-context-model';\nimport { HsmState } from './hsm';\nimport { PresentationDataState } from './presentation';\nimport { PlaybackState } from './playback';\n// import { ArDataFeedMap } from './dataFeed';\n\nexport class RuntimeEnvironment {\n  static BrightSign = 'BrightSign';\n  static BaconPreview = 'BaconPreview';\n  static Dev = 'Dev';\n}\nObject.freeze(RuntimeEnvironment);\n\n/** @internal */\n/** @private */\nexport type DeepPartial<T> = {\n  [P in keyof T]?: DeepPartial<T[P]>;\n};\n\nexport interface LUT { [key: string]: any; }\n\nexport interface BsPpBaseObject {\n  id: string;\n}\n\nexport interface BsPpMap<T extends BsPpBaseObject> {\n  [id: string]: T;    // really '[id:BsDmId]: T;' -- but Typescript doesn't like that, even though BsDmId = string\n}\n\nexport interface FileLUT { [fileName: string]: string; }\n\nexport interface BsPpState {\n  bsdm: DmState;\n  bacdm: BaContextModelState;\n  bsPlayer: BsPpModelState;\n}\n\nexport interface BsPpModelState {\n  hsmState: HsmState;\n  presentationData: PresentationDataState;\n  playback: PlaybackState;\n  // arDataFeeds: ArDataFeedMap;\n}\n\nexport const bsPpStateFromState = (state: any): BsPpState => {\n  if (state.hasOwnProperty('bspp')) {\n    const bsPpModelState: BsPpModelState = (state as any).bspp;\n    const bsPpState: BsPpState = {\n      bsdm: state.bsdm,\n      bacdm: state.bacdm,\n      bsPlayer: {\n        playback: bsPpModelState.playback,\n        presentationData: bsPpModelState.presentationData,\n        hsmState: bsPpModelState.hsmState,\n        // arDataFeeds: bsPpModelState.arDataFeeds,\n      }\n    };\n    return bsPpState;\n  } else if (state.hasOwnProperty('bsPlayer')) {\n    return state;\n  } else {\n    debugger;\n    return state;\n  }\n};\n\n","export class HsmType {\n  static Player = 'Player';\n  static VideoOrImages = 'VideoOrImages';\n}\nObject.freeze(HsmType);\n\nexport class HsmTimerType {\n  static MediaHState = 'MediaHState';\n  static MrssState = 'MrssState';\n}\nObject.freeze(HsmType);\n","export class HStateType {\n  static Top = 'Top';\n  static Player = 'Player';\n  static Playing = 'Playing';\n  static Waiting = 'Waiting';\n  static Image = 'Image';\n  static Mrss = 'Mrss';\n  static Video = 'Video';\n  static SuperState = 'SuperState';\n}\nObject.freeze(HStateType);\n\nexport interface HState {\n  id: string;\n  type: HStateType;\n  hsmId: string;\n  superStateId: string;\n  name: string;\n}\n\nexport interface MediaHState extends HState {\n  data: MediaHStateData;\n}\n\nexport interface MediaHStateData {\n  mediaStateId: string;\n  mediaStateData?: MediaHStateParamsData | null;\n}\n\n// export type MediaHStateParamsData = (MediaHStateCustomData & MediaHStateTimerData) | null;\nexport type MediaHStateParamsData = MediaHStateCustomData;\n\nexport type MediaHStateCustomData = ImageStateData | VideoStateData | SuperStateData | MrssStateData;\n\n// export interface MediaHStateTimerData {\n//   timeoutId?: number;\n// }\n\nexport interface ImageStateData {\n  timeoutId?: number;\n}\n\nexport interface VideoStateData {\n  timeoutId?: number;\n}\n\nexport interface SuperStateData {\n  timeoutId?: number;\n}\n\nexport interface MrssStateData {\n  timeoutId?: number;\n  dataFeedId: string;\n  currentFeedId: string | null;\n  pendingFeedId: string | null;\n  displayIndex: number;\n  firstItemDisplayed: boolean;\n  waitForContentTimer: any;\n}\n\nexport interface HStateSpecification {\n  type: HStateType;\n  hsmId: string;\n  superStateId: string;\n  name: string;\n}\n\nexport interface HSMStateData {\n  nextStateId: string | null;\n}\n","/** @module Model:template */\n\nimport { combineReducers } from 'redux';\n\nimport {\n  cloneDeep,\n  isObject,\n  isNil,\n} from 'lodash';\n\nimport {\n  HsmState,\n  Hsm,\n  HsmMap,\n  HStateMap,\n  HState,\n  HStateType,\n  HStateSpecification,\n  HsmEventType,\n  LUT,\n  MediaHStateData,\n  MediaHState,\n  MediaHStateParamsData,\n} from '../type';\nimport {\n  BsPpAction, BsPpBaseAction,\n} from './baseAction';\n\n// ------------------------------------\n// Constants\n// ------------------------------------\n\nexport const ADD_HSM: string = 'ADD_HSM';\nexport const UPDATE_HSM_PROPERTIES: string = 'UPDATE_HSM_PROPERTIES';\nexport const SET_HSM_TOP: string = 'SET_HSM_TOP';\nexport const SET_HSM_INITIALIZED: string = 'SET_HSM_INITIALIZED';\nexport const ADD_HSTATE = 'ADD_HSTATE';\nexport const SET_MEDIA_H_STATE_TIMEOUT_ID = 'SET_MEDIA_H_STATE_TIMEOUT_ID';\nexport const SET_MEDIA_H_STATE_PARAMETER_DATA = 'SET_MEDIA_H_STATE_PARAMETER_DATA';\nexport const SET_ACTIVE_HSTATE = 'SET_ACTIVE_HSTATE';\nexport const QUEUE_HSM_EVENT = 'QUEUE_HSM_EVENT';\nexport const DEQUEUE_HSM_EVENT = 'DEQUEUE_HSM_EVENT';\n\nexport type AddHsmAction = BsPpAction<Partial<Hsm>>;\nexport function addHsm(\n  hsm: Hsm,\n): AddHsmAction {\n  return {\n    type: ADD_HSM,\n    payload: hsm,\n  };\n}\n\nexport interface HsmParams {\n  id: string;\n  zoneId?: string;\n  x?: number;\n  y?: number;\n  width?: number;\n  height?: number;\n  initialMediaStateId?: string;\n  mediaStateIdToHState?: LUT;\n}\n\nexport type UpdateHsmPropertiesAction = BsPpAction<HsmParams>;\n\nexport function updateHsmProperties(params: HsmParams): UpdateHsmPropertiesAction {\n  let payload = params;\n  payload = { ...params };\n  return {\n    type: UPDATE_HSM_PROPERTIES,\n    payload,\n  };\n}\n\ninterface SetHsmTopActionParams {\n  hsmId: string;\n  topStateId: string;\n}\nexport type SetHsmTopAction = BsPpAction<{}>;\nexport function setHsmTop(\n  hsmId: string,\n  topStateId: string,\n): SetHsmTopAction {\n  return {\n    type: SET_HSM_TOP,\n    payload: {\n      hsmId,\n      topStateId,\n    }\n  };\n}\n\nexport type SetHsmInitializedAction = BsPpAction<Partial<Hsm>>;\nexport function setHsmInitialized(\n  id: string,\n  initialized: boolean,\n): SetHsmInitializedAction {\n  return {\n    type: SET_HSM_INITIALIZED,\n    payload: {\n      id,\n      initialized,\n    }\n  };\n}\n\nexport type SetActiveHStateAction = BsPpAction<HState | null | any>;\nexport function setActiveHState(\n  hsmId: string,\n  activeState: HState | null,\n): SetActiveHStateAction {\n  return {\n    type: SET_ACTIVE_HSTATE,\n    payload: {\n      id: hsmId,\n      activeState,\n    }\n  };\n}\n\nexport type AddHStateAction = BsPpAction<{\n  id: string;\n  type: HStateType;\n  hsmId: string;\n  superStateId: string;\n  name: string;\n  data?: MediaHStateData | null;\n}>;\n\nexport function addHState(\n  id: string,\n  hStateSpecification: HStateSpecification,\n  data: MediaHStateData | null = null,\n): AddHStateAction {\n\n  const { type, hsmId, superStateId, name } = hStateSpecification;\n\n  return {\n    type: ADD_HSTATE,\n    payload: {\n      id,\n      type,\n      hsmId,\n      superStateId,\n      name,\n      data: cloneDeep(data),\n    },\n  };\n}\n\nexport function setMediaHStateTimeoutId(\n  hStateId: string,\n  timeoutId: number,\n): any {\n  return {\n    // type: SET_MEDIA_H_STATE_TIMEOUT_ID,\n    type: SET_MEDIA_H_STATE_PARAMETER_DATA,\n    payload: {\n      hStateId,\n      timeoutId,\n    },\n  };\n}\n\nexport function setMediaHStateParameter(\n  hStateId: string,\n  parameterName: string,\n  parameterValue: any,\n): any {\n  return {\n    type: SET_MEDIA_H_STATE_PARAMETER_DATA,\n    payload: {\n      hStateId,\n      [parameterName]: parameterValue,\n    },\n  };\n}\n\nexport type HsmEventAction = BsPpAction<HsmEventType>;\n\nexport function queueHsmEvent(\n  event: HsmEventType\n): HsmEventAction {\n  return {\n    type: QUEUE_HSM_EVENT,\n    payload: event,\n  };\n}\n\nexport function dequeueHsmEvent(\n): BsPpBaseAction {\n  return {\n    type: DEQUEUE_HSM_EVENT,\n    payload: null,\n  };\n}\n\n// ------------------------------------\n// Reducer\n// ------------------------------------\nconst initialHsmByIdState: HsmMap = {};\nconst hsmById = (\n  state: HsmMap = initialHsmByIdState,\n  action: AddHsmAction | SetHsmTopAction | SetHsmInitializedAction | AddHStateAction | UpdateHsmPropertiesAction\n): HsmMap => {\n  switch (action.type) {\n    case ADD_HSM: {\n      const id: string = (action.payload as Hsm).id;\n      return { ...state, [id]: (action.payload as Hsm) };\n    }\n    case UPDATE_HSM_PROPERTIES: {\n      const { id, mediaStateIdToHState } = (action as UpdateHsmPropertiesAction).payload;\n      const updatedHsm = { ...state[id], properties: { ...state[id].properties, mediaStateIdToHState } };\n      return { ...state, [id]: updatedHsm };\n    }\n    case SET_HSM_TOP: {\n      const { hsmId, topStateId } = action.payload as SetHsmTopActionParams;\n      const newState = cloneDeep(state) as HsmMap;\n      const hsm: Hsm = newState[hsmId];\n      hsm.topStateId = topStateId;\n      return newState;\n    }\n    case SET_HSM_INITIALIZED: {\n      const id: string = (action as SetHsmInitializedAction).payload.id as string;\n      const initialized: boolean = (action as SetHsmInitializedAction).payload.initialized!;\n      const newState = cloneDeep(state) as HsmMap;\n      const hsm: Hsm = newState[id];\n      hsm.initialized = initialized;\n      return newState;\n    }\n    case SET_ACTIVE_HSTATE: {\n      const newState = Object.assign({}, state);\n      const hsmId: string = (action.payload as any).id;\n      const activeState: HState = (action.payload as any).activeState;\n      if (isNil(activeState)) {\n        newState[hsmId].activeStateId = null;\n      } else {\n        newState[hsmId].activeStateId = activeState.id;\n      }\n      return newState;\n    }\n    default:\n      return state;\n  }\n};\n\nconst initialHStateByIdState: HStateMap = {};\nconst hStateById = (\n  state: HStateMap = initialHStateByIdState,\n  action: AddHStateAction,\n): HStateMap => {\n  switch (action.type) {\n    case ADD_HSTATE: {\n      const id: string = (action.payload as HState).id;\n      return { ...state, [id]: (action.payload as HState) };\n    }\n    case SET_MEDIA_H_STATE_TIMEOUT_ID: {\n      const hStateId: string = (action.payload as any).hStateId;\n      const updatedHState = { ...state[hStateId], ...action.payload };\n      return { ...state, [hStateId]: updatedHState };\n    }\n    case SET_MEDIA_H_STATE_PARAMETER_DATA: {\n      // console.log('SET_MEDIA_H_STATE_PARAMETER_DATA');\n      const hStateId: string = (action.payload as any).hStateId;\n      const hState: HState = state[hStateId];\n      const mediaHState: MediaHState = hState as MediaHState;\n      const newMediaHState: MediaHState = cloneDeep(mediaHState);\n\n      const newMediaHStateData: MediaHStateData = newMediaHState.data;\n      if (isNil(newMediaHStateData.mediaStateData)) {\n        const keys = Object.keys(action.payload);\n        for (const key of keys) {\n          if (key !== 'hStateId') {\n            const newMediaHStateParamsData: MediaHStateParamsData = {\n              [key]: action.payload[key]\n            };\n            newMediaHStateData.mediaStateData = newMediaHStateParamsData;\n            newMediaHState.data = newMediaHStateData;\n          }\n        }\n      } else {\n        const newMediaHStateParamsData: MediaHStateParamsData = newMediaHStateData.mediaStateData;\n        const keys = Object.keys(action.payload);\n        for (const key of keys) {\n          if (key !== 'hStateId') {\n            newMediaHStateParamsData[key] = action.payload[key];\n          }\n        }\n      }\n\n      const newState = cloneDeep(state);\n      newState[hStateId] = newMediaHState;\n      return newState;\n    }\n    default:\n      return state;\n  }\n};\n\nconst initialHsmEventQueue: HsmEventType[] = [];\nconst hsmEventQueue = (\n  state: HsmEventType[] = initialHsmEventQueue,\n  action: HsmEventAction | BsPpBaseAction,\n): HsmEventType[] => {\n  switch (action.type) {\n    case QUEUE_HSM_EVENT: {\n      return [...state, action.payload as HsmEventType];\n    }\n    case DEQUEUE_HSM_EVENT: {\n      return [...state.slice(1)];\n    }\n    default:\n      return state;\n  }\n};\n\nexport const hsmReducer = combineReducers<HsmState>(\n  { hsmById, hStateById, hsmEventQueue });\n\n// -----------------------------------------------------------------------\n// Validators\n// -----------------------------------------------------------------------\n/** @internal */\n/** @private */\nexport const isValidHsmState = (state: any): boolean => {\n  return isObject(state);\n  // TEDTODO\n};\n","import {\n  BsPpAction,\n} from './baseAction';\nimport {\n  PresentationDataState,\n  //  ScheduledPresentation,\n  PpSchedule,\n  SyncSpecFileMap,\n  RuntimeEnvironment,\n} from '../type';\nimport { isObject } from 'lodash';\nimport { Dimensions } from '../utility';\n\nexport const UPDATE_PRESENTATION_DATA = 'UPDATE_PRESENTATION_DATA';\nexport const UPDATE_RUNTIME_ENVIRONMENT = 'UPDATE_RUNTIME_ENVIRONMENT';\nexport const UPDATE_PRESENTATION_SRC_DIRECTORY = 'UPDATE_PRESENTATION_SRC_DIRECTORY';\nexport const UPDATE_SYNC_SPEC_FILE_MAP = 'UPDATE_SYNC_SPEC_FILE_MAP';\nexport const UPDATE_AUTOSCHEDULE = 'UPDATE_AUTOSCHEDULE';\nexport const UPDATE_SCREEN_DIMENSIONS = 'UPDATE_SCREEN_DIMENSIONS';\n\nexport type UpdatePresentationDataAction = BsPpAction<Partial<PresentationDataState>>;\n\nexport type UpdatePresentationStringAction = BsPpAction<Partial<PresentationDataState>>;\n\nexport function updatePresentationData(\n  presentationDataState: PresentationDataState,\n): UpdatePresentationDataAction {\n  if (!isObject(presentationDataState) || !isValidPresentationDataState(presentationDataState)) {\n    debugger;\n  }\n  return {\n    type: UPDATE_PRESENTATION_DATA,\n    payload: presentationDataState\n  };\n}\n\nexport const updateRuntimeEnvironment = (\n  runtimeEnvironment: RuntimeEnvironment,\n): UpdatePresentationDataAction => {\n  return {\n    type: UPDATE_RUNTIME_ENVIRONMENT,\n    payload: {\n      runtimeEnvironment,\n    }\n  };\n};\n\nexport const updatePresentationSrcDirectory = (\n  srcDirectory: string,\n): UpdatePresentationDataAction => {\n  return {\n    type: UPDATE_PRESENTATION_SRC_DIRECTORY,\n    payload: {\n      srcDirectory,\n    }\n  };\n};\n\nexport const updatePresentationSyncSpecFileMap = (\n  syncSpecFileMap: SyncSpecFileMap,\n): UpdatePresentationDataAction => {\n  return {\n    type: UPDATE_SYNC_SPEC_FILE_MAP,\n    payload: {\n      syncSpecFileMap,\n    }\n  };\n};\n\nexport const updatePresentationAutoschedule = (\n  autoSchedule: PpSchedule,\n): UpdatePresentationDataAction => {\n  return {\n    type: UPDATE_AUTOSCHEDULE,\n    payload: {\n      autoSchedule,\n    }\n  };\n};\n\nexport const updateScreenDimensions = (\n  screenDimensions: Dimensions,\n): UpdatePresentationDataAction => {\n  return {\n    type: UPDATE_SCREEN_DIMENSIONS,\n    payload: {\n      screenDimensions,\n    }\n  };\n};\n\nexport const presentationDataDefaults: PresentationDataState = {\n  runtimeEnvironment: RuntimeEnvironment.Dev,\n  srcDirectory: '',\n  syncSpecFileMap: null,\n  autoSchedule: null,\n  screenDimensions: {\n    width: 1920,\n    height: 1080\n  },\n};\nObject.freeze(presentationDataDefaults);\n\nexport const presentationDataReducer = (\n  state: PresentationDataState = presentationDataDefaults,\n  { type, payload }: (\n    UpdatePresentationDataAction\n  ),\n): PresentationDataState => {\n  switch (type) {\n    case UPDATE_PRESENTATION_DATA:\n      return Object.assign({}, state, payload);\n    case UPDATE_RUNTIME_ENVIRONMENT:\n      return {\n        ...state,\n        runtimeEnvironment: payload.runtimeEnvironment as RuntimeEnvironment,\n      };\n    case UPDATE_PRESENTATION_SRC_DIRECTORY:\n      return {\n        ...state,\n        srcDirectory: payload.srcDirectory as string,\n      };\n    case UPDATE_SYNC_SPEC_FILE_MAP:\n      return {\n        ...state,\n        syncSpecFileMap: payload.syncSpecFileMap as SyncSpecFileMap,\n      };\n    case UPDATE_AUTOSCHEDULE:\n      return {\n        ...state,\n        autoSchedule: payload.autoSchedule as any,\n      };\n    case UPDATE_SCREEN_DIMENSIONS:\n      return {\n        ...state,\n        screenDimensions: payload.screenDimensions as any,\n      };\n    default:\n      return state;\n  }\n};\n\nconst isValidPresentationDataState = (state: any): boolean => {\n  // TEDTODO\n  return true;\n};\n","import { BsPpAction } from './baseAction';\nimport { PlaybackState } from '../type';\n\nexport const SET_VIDEO_ELEMENT_REF = 'SET_VIDEO_ELEMENT_REF';\n\n// TEDTODO - why doesn't the following work?\n// export type SetPlaybackAction = BsPpAction<Partial<PlaybackState>>;\nexport type SetPlaybackAction = BsPpAction<PlaybackState>;\n\nexport const setVideoElementRef = (\n  videoElementRef: HTMLVideoElement | null,\n): SetPlaybackAction => {\n  return {\n    type: SET_VIDEO_ELEMENT_REF,\n    payload: {\n      videoElementRef,\n    }\n  };\n};\n\nexport const playbackDefaults: PlaybackState = {\n  videoElementRef: null,\n};\nObject.freeze(playbackDefaults);\n\nexport const playbackReducer = (\n  state: PlaybackState = playbackDefaults,\n  { type, payload }: (\n    SetPlaybackAction\n  ),\n): PlaybackState => {\n  switch (type) {\n    case SET_VIDEO_ELEMENT_REF:\n      const newState: PlaybackState = {\n        videoElementRef: payload.videoElementRef\n      };\n      return newState;\n    default:\n      return state;\n  }\n};\n\n// const isValidPlaybackState = (state: any): boolean => {\n//   // TEDTODO\n//   return true;\n// };\n","/** @module Model:base */\n\nimport {\n  Reducer,\n  combineReducers\n} from 'redux';\nimport { isNil } from 'lodash';\nimport { BsPpModelState } from '../type';\nimport {\n  BsPpModelBaseAction,\n} from './baseAction';\nimport { hsmReducer } from './hsm';\nimport { presentationDataReducer } from './presentation';\nimport { playbackReducer } from './playback';\n\n// -----------------------------------------------------------------------\n// Defaults\n// -----------------------------------------------------------------------\n\n// none\n\n// -----------------------------------------------------------------------\n// Reducers\n// -----------------------------------------------------------------------\n\nexport type BsUiReducer = Reducer<BsPpModelState>;\nexport const enableBatching = (\n  reduce: (state: BsPpModelState, action: BsPpModelBaseAction) => BsPpModelState,\n): BsUiReducer => {\n  return function batchingReducer(\n    state: BsPpModelState,\n    action: BsPpModelBaseAction,\n  ): BsPpModelState {\n    switch (action.type) {\n      default:\n        return reduce(state, action);\n    }\n  };\n};\n\nexport const bsPpReducer = enableBatching(combineReducers<BsPpModelState>({\n  hsmState: hsmReducer,\n  playback: playbackReducer,\n  presentationData: presentationDataReducer,\n}));\n\n// -----------------------------------------------------------------------\n// Validators\n// -----------------------------------------------------------------------\n\n/** @internal */\n/** @private */\n// TEDTODO - requires further development\nexport function isValidBsPpModelState(state: any): boolean {\n  return !isNil(state);\n}\n\n/** @internal */\n/** @private */\n// TEDTODO - requires further development\nexport function isValidBsPpModelStateShallow(state: any): boolean {\n  return !isNil(state);\n}\n","import {\n  BsPpState,\n  Hsm,\n  HState,\n  HStateMap,\n  HsmEventType,\n  MediaZoneHsmProperties,\n  ZoneHsmProperties,\n  bsPpStateFromState,\n  MediaHState,\n  MrssStateData,\n} from '../type';\nimport { find, isNil, isString } from 'lodash';\nimport { HsmMap } from '../type';\nimport { dmGetMediaStateById, dmFilterDmState, DmDerivedContentItem } from '@brightsign/bsdatamodel';\nimport { ContentItemType } from '@brightsign/bscore';\n\n// ------------------------------------\n// Selectors\n// ------------------------------------\nexport function getHsmMap(state: any): HsmMap {\n  const bsPpState: BsPpState = bsPpStateFromState(state);\n  return bsPpState.bsPlayer.hsmState.hsmById;\n}\n\nexport function getHsmById(state: any, hsmId: string): Hsm {\n  const bsPpState: BsPpState = bsPpStateFromState(state);\n  return bsPpState.bsPlayer.hsmState.hsmById[hsmId];\n}\n\nexport function getHsmByName(\n  state: BsPpState,\n  hsmName: string\n): Hsm | null {\n  const bsPpState: BsPpState = bsPpStateFromState(state);\n  const hsmMap: HsmMap = getHsmMap(bsPpState);\n  const hsmId = find(Object.keys(hsmMap), (id) => hsmMap[id].name === hsmName);\n  return hsmId ? getHsmById(bsPpState, hsmId) : null;\n}\n\nexport const getActiveHStateIdByHsmId = (\n  state: BsPpState,\n  hsmId: string\n): HState | null => {\n  const bsPpState: BsPpState = bsPpStateFromState(state);\n  const hsm: Hsm = getHsmById(bsPpState, hsmId);\n  if (!isNil(hsm)) {\n    return getHStateById(bsPpState, hsm.activeStateId);\n  }\n  return null;\n};\n\nexport function getHStateById(state: any, hStateId: string | null): HState | null {\n  const bsPpState: BsPpState = bsPpStateFromState(state);\n  if (isNil(hStateId)) {\n    return null;\n  }\n  const hState = bsPpState.bsPlayer.hsmState.hStateById[hStateId as string];\n  if (isNil(hState)) {\n    debugger;\n  }\n  return hState;\n}\n\nexport function getHStateByName(state: any, name: string | null): HState | null {\n  const bsPpState: BsPpState = bsPpStateFromState(state);\n\n  if (isNil(name)) {\n    return null;\n  }\n\n  const hStateMap: HStateMap = bsPpState.bsPlayer.hsmState.hStateById;\n\n  const hStateId = find(Object.keys(hStateMap), (id) => {\n    if (hStateMap.hasOwnProperty(id)) {\n      const hState = hStateMap[id];\n      return (hState.name === name);\n    }\n    return false;\n  });\n\n  return hStateId ? getHStateById(bsPpState, hStateId) : null;\n}\n\nexport function getHStateByMediaStateId(state: any, hsmId: string, mediaStateId: string | null): HState | null {\n  const bsPpState: BsPpState = bsPpStateFromState(state);\n\n  if (isNil(mediaStateId)) {\n    return null;\n  }\n\n  const hsm: Hsm = getHsmById(bsPpState, hsmId);\n\n  // TEDTODO - near term hack...\n  const staleHState = (hsm.properties as MediaZoneHsmProperties).mediaStateIdToHState[mediaStateId as string];\n  const hStateId = staleHState.id;\n  const hState = getHStateById(state, hStateId);\n  return hState;\n  // the following may return a stale hState. why? after properties are set on hState?\n  // return (hsm.properties as MediaZoneHsmProperties).mediaStateIdToHState[mediaStateId as string];\n}\n\nexport function getHsmInitialized(state: any, hsmId: string): boolean {\n  const bsPpState: BsPpState = bsPpStateFromState(state);\n\n  return bsPpState.bsPlayer.hsmState.hsmById[hsmId].initialized;\n}\n\nexport function getZoneHsmList(state: any): Hsm[] {\n  const bsPpState: BsPpState = bsPpStateFromState(state);\n\n  const hsmList: Hsm[] = [];\n  const hsmById: HsmMap = bsPpState.bsPlayer.hsmState.hsmById;\n  for (const hsmId in hsmById) {\n    if (hsmById.hasOwnProperty(hsmId)) {\n      const hsm: Hsm = hsmById[hsmId];\n      if (hsm.type === 'VideoOrImages') {\n        hsmList.push(hsm);\n      }\n    }\n  }\n  return hsmList;\n}\n\nexport function getZoneHsmFromZoneId(state: any, zoneId: string): Hsm | null {\n  const bsPpState: BsPpState = bsPpStateFromState(state);\n  const zoneHsmList: Hsm[] = getZoneHsmList(bsPpState);\n  for (const zoneHsm of zoneHsmList) {\n    if (!isNil(zoneHsm.properties)) {\n      if (isString((zoneHsm.properties as ZoneHsmProperties).zoneId)) {\n        if ((zoneHsm.properties as ZoneHsmProperties).zoneId === zoneId) {\n          return zoneHsm;\n        }\n      }\n    }\n  }\n  return null;\n}\n\nexport function getActiveMediaStateId(state: any, zoneId: string): string {\n  const bsPpState: BsPpState = bsPpStateFromState(state);\n  const zoneHsm: Hsm | null = getZoneHsmFromZoneId(state, zoneId);\n  if (!isNil(zoneHsm)) {\n    const activeHStateId: string = zoneHsm.activeStateId as string;\n    const activeHState = getHStateById(bsPpState, activeHStateId);\n    if (!isNil(activeHState)) {\n      return (activeHState as MediaHState).data.mediaStateId;\n    }\n    return zoneHsm.activeStateId as string;\n  }\n  return '';\n}\n\nexport function getActiveMrssDisplayIndex(state: any, zoneId: string): number {\n  // TEDTODO - the following is called here and in getActiveMediaStateId - fix this\n  const zoneHsm: Hsm | null = getZoneHsmFromZoneId(state, zoneId);\n  if (!isNil(zoneHsm)) {\n    const mediaStateId = getActiveMediaStateId(state, zoneId);\n    const mediaState = dmGetMediaStateById(dmFilterDmState(state), { id: mediaStateId });\n    if (!isNil(mediaState)) {\n      const contentItem: DmDerivedContentItem = mediaState.contentItem;\n      if (contentItem.type === ContentItemType.MrssFeed) {\n        const mrssState = getHStateByMediaStateId(state, zoneHsm.id, mediaStateId) as MediaHState;\n        if (!isNil(mrssState)) {\n          const mrssStateData: MrssStateData = mrssState.data.mediaStateData! as MrssStateData;\n          const displayIndex: number = mrssStateData.displayIndex;\n          return displayIndex;\n        }\n      }\n    }\n  }\n\n  return -1;\n}\n\nexport function getEvents(state: any): HsmEventType[] {\n  const bsPpState: BsPpState = bsPpStateFromState(state);\n  return bsPpState.bsPlayer.hsmState.hsmEventQueue;\n}\n\nexport const getIsHsmInitialized = (state: any): boolean => {\n  const bsPpState: BsPpState = bsPpStateFromState(state);\n  const hsmMap: HsmMap = getHsmMap(bsPpState);\n  for (const hsmId in hsmMap) {\n    if (hsmMap.hasOwnProperty(hsmId)) {\n      const hsm: Hsm = hsmMap[hsmId];\n      if (!hsm.initialized) {\n        return false;\n      }\n    }\n  }\n\n  // TEDTODO - need to check if the hsm's associated with zones exist yet\n  // console.log('number of hsms:');\n  // console.log(Object.keys(hsmMap).length);\n\n  return true;\n};\n","import { isNil, isString } from 'lodash';\nimport * as fs from 'fs-extra';\nimport isomorphicPath from 'isomorphic-path';\n\nimport {\n  BsPpState, \n  // FileLUT, \n  SyncSpecDownload, \n  PpSchedule, \n  SyncSpecFileMap, \n  bsPpStateFromState, \n  RuntimeEnvironment,\n  FileLUT,\n} from '../type';\nimport { DmState, dmFilterDmState, dmGetAssetItemListForFileName } from '@brightsign/bsdatamodel';\nimport { BsAssetItem } from '@brightsign/bscore';\nimport { Dimensions } from '../utility/utilities';\n// import AssetPool from '@brightsign/assetpool';\n\n// ------------------------------------\n// Selectors\n// ------------------------------------\nexport function getRuntimeEnvironment(state: any): RuntimeEnvironment {\n\n  const bsPpState: BsPpState = bsPpStateFromState(state);\n\n  if (\n    !isNil(bsPpState.bsPlayer)\n    && !isNil(bsPpState.bsPlayer.presentationData)) {\n    return bsPpState.bsPlayer.presentationData.runtimeEnvironment;\n  }\n  return RuntimeEnvironment.Dev;\n}\n\nexport function getSrcDirectory(state: any): string {\n  const bsPpState: BsPpState = bsPpStateFromState(state);\n  if (\n    !isNil(bsPpState.bsPlayer)\n    && !isNil(bsPpState.bsPlayer.presentationData)\n    && !isNil(bsPpState.bsPlayer.presentationData.srcDirectory)) {\n    return bsPpState.bsPlayer.presentationData.srcDirectory;\n  }\n  return '';\n}\n\nexport function getScreenDimensions(state: any): Dimensions {\n  const bsPpState: BsPpState = bsPpStateFromState(state);\n  if (\n    !isNil(bsPpState.bsPlayer)\n    && !isNil(bsPpState.bsPlayer.presentationData)\n    && !isNil(bsPpState.bsPlayer.presentationData.screenDimensions)) {\n    return bsPpState.bsPlayer.presentationData.screenDimensions;\n  }\n  return { width: 1920, height: 1080 };\n}\n\nexport const getSyncSpecFileMap = (state: BsPpState): SyncSpecFileMap | null => {\n  state = bsPpStateFromState(state);\n  if (!isNil(state.bsPlayer)\n    && !isNil(state.bsPlayer.presentationData)) {\n    return state.bsPlayer.presentationData.syncSpecFileMap;\n  }\n  return null;\n};\n\nexport const getAutoschedule = (state: any): PpSchedule | null => {\n\n  const bsPpState: BsPpState = bsPpStateFromState(state);\n\n  if (!isNil(bsPpState.bsPlayer)\n    && !isNil(bsPpState.bsPlayer.presentationData)) {\n    return bsPpState.bsPlayer.presentationData.autoSchedule;\n  }\n  return null;\n};\n\nfunction getPoolAssetFiles(state: BsPpState): FileLUT {\n  state = bsPpStateFromState(state);\n\n  const poolAssetFiles: FileLUT = {};\n\n  const syncSpecFileMap = getSyncSpecFileMap(state);\n\n  const rootDirectory = getSrcDirectory(state);\n\n  if (!isNil(syncSpecFileMap) && isString(rootDirectory)) {\n    for (const fileName in syncSpecFileMap) {\n      if (syncSpecFileMap.hasOwnProperty(fileName)) {\n        const syncSpecDownload: SyncSpecDownload = syncSpecFileMap[fileName];\n        poolAssetFiles[fileName] = isomorphicPath.join(rootDirectory, syncSpecDownload.link);\n      }\n    }\n  }\n\n  return poolAssetFiles;\n}\n\nexport function getPathFromAssetName(state: BsPpState, assetName: string): string {\n  const bsdm: DmState = dmFilterDmState(state);\n  const assetItems: BsAssetItem[] = dmGetAssetItemListForFileName(bsdm, { name: assetName });\n  if (assetItems.length === 1) {\n    const assetItem: BsAssetItem = assetItems[0];\n    const filePath: string = isomorphicPath.join(assetItem.path, assetItem.name);\n    return filePath;\n  }\n  return '';\n}\n\nexport function getAssetPath(state: BsPpState, assetName: string): string {\n\n  const runtimeEnvironment: RuntimeEnvironment = getRuntimeEnvironment(state);\n  switch (runtimeEnvironment) {\n    case RuntimeEnvironment.BaconPreview:\n      return getPathFromAssetName(state, assetName);\n    case RuntimeEnvironment.Dev:\n      return getPoolFilePath(state, assetName);\n    case RuntimeEnvironment.BrightSign:\n      return getPoolFilePath(state, assetName);\n    default:\n      break;\n  }\n  return '';\n}\n\nfunction getPoolFilePath(state: BsPpState, fileName: string): string {\n  state = bsPpStateFromState(state);\n  return getPoolAssetFiles(state)[fileName];\n}\n\nexport const getSyncSpecFile = (state: BsPpState, fileName: string): Promise<any> => {\n  state = bsPpStateFromState(state);\n\n  const syncSpecFileMap = getSyncSpecFileMap(state);\n  if (isNil(syncSpecFileMap)) {\n    return Promise.reject('No sync spec');\n  }\n\n  if (!(syncSpecFileMap as SyncSpecFileMap).hasOwnProperty(fileName)) {\n    return Promise.reject('file not found');\n  }\n  const syncSpecFile: SyncSpecDownload = (syncSpecFileMap as SyncSpecFileMap)[fileName];\n\n  const rootDirectory = getSrcDirectory(state);\n\n  const filePath: string = isomorphicPath.join(rootDirectory, syncSpecFile.link);\n\n  return fs.readFile(filePath, 'utf8')\n    .then((fileStr: string) => {\n      const file: object = JSON.parse(fileStr);\n      return Promise.resolve(file);\n    });\n};\n\nexport function\n  getSyncSpecReferencedFile(fileName: string, syncSpecFileMap: SyncSpecFileMap, rootPath: string): Promise<object> {\n\n  if (!syncSpecFileMap.hasOwnProperty(fileName)) {\n    return Promise.reject('file not found');\n  }\n  const syncSpecFile: SyncSpecDownload = syncSpecFileMap[fileName];\n\n  // const fileSize = syncSpecFile.size;\n  const filePath: string = isomorphicPath.join(rootPath, syncSpecFile.link);\n\n  return fs.readFile(filePath, 'utf8')\n    .then((fileStr: string) => {\n\n      const file: object = JSON.parse(fileStr);\n\n      // I have commented out the following code to allow hacking of files -\n      // that is, overwriting files in the pool without updating the sync spec with updated sha1\n      // if (fileSize !== fileStr.length) {\n      //   debugger;\n      // }\n      return Promise.resolve(file);\n    });\n}\n\nexport function getFeedPoolDirectory(state: any): string {\n  const rootDirectory = getSrcDirectory(state);\n  return isomorphicPath.join(rootDirectory, 'feedPool');\n}\n\nexport function getFeedPoolFilePath(state: any, hashValue: string): string {\n  const feedPoolDirectory = getFeedPoolDirectory(state);\n  const hashValueLength = hashValue.length;\n  const dir1 = hashValue.substring(hashValueLength - 2, hashValueLength - 1);\n  const dir2 = hashValue.substring(hashValueLength - 1, hashValueLength);\n  // TEDTODO\n  const feedFileName = 'nohash-' + hashValue;\n  return isomorphicPath.join(feedPoolDirectory, dir1, dir2, feedFileName);\n}\n\nexport function feedPoolFileExists(state: any, hashValue: string): string {\n  const feedPoolDirectory = getFeedPoolDirectory(state);\n  const hashValueLength = hashValue.length;\n  const dir1 = hashValue.substring(hashValueLength - 2, hashValueLength - 1);\n  const dir2 = hashValue.substring(hashValueLength - 1, hashValueLength);\n  // TEDTODO\n  const feedFileName = 'nohash-' + hashValue;\n  const feedPoolPath: string = isomorphicPath.join(feedPoolDirectory, dir1, dir2, feedFileName);\n  if (feedPoolPath !== '' && fs.existsSync(feedPoolPath)) {\n    return feedPoolPath;\n  }\n  return '';\n}\n\nexport function getFeedCacheRoot(state: any): string {\n  const rootDirectory = getSrcDirectory(state);\n  return isomorphicPath.join(rootDirectory, 'feed_cache');\n}\n\n// export function getFeedAssetPool(state: any): AssetPool {\n//   const feedPoolDirectory = getFeedPoolDirectory(state);\n//   return new AssetPool(feedPoolDirectory);\n// }\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","import { v4 } from 'uuid';\n\nexport const newBsPpId = () => v4();\n\nexport interface Dimensions {\n  width: number;\n  height: number;\n}\n\nexport const calculateAspectRatioFit = (\n  srcWidth: number,\n  srcHeight: number,\n  maxWidth: number,\n  maxHeight: number): Dimensions => {\n\n  const ratio = Math.min(maxWidth / srcWidth, maxHeight / srcHeight);\n\n  return {\n    width: srcWidth * ratio,\n    height: srcHeight * ratio\n  };\n};\n","import {\n  HStateSpecification,\n  // HStateType,\n  // MediaHState,\n  // MediaHStateParamsData,\n  MediaHStateData\n} from '../../type';\nimport { addHState } from '../../model';\nimport { newBsPpId } from '../../utility';\nimport {\n  BsPpDispatch,\n  BsPpStringThunkAction,\n} from '../../model';\n\nexport const createHState = (\n  hStateSpecification: HStateSpecification,\n  data: MediaHStateData | null = null,\n): BsPpStringThunkAction => {\n  return ((dispatch: BsPpDispatch) => {\n    const id: string = newBsPpId();\n    dispatch(addHState(id, hStateSpecification, data));\n    return id;\n  });\n};\n\nexport const createHStateSpecification = (\n  type: string,\n  hsmId: string,\n  superStateId: string,\n  name: string,\n): HStateSpecification => {\n  const hStateSpecification = {\n    type,\n    hsmId,\n    superStateId,\n    name\n  };\n  return hStateSpecification;\n};\n\n// export const createStateDataForStateType = (\n//   stateType: HStateType,\n//   mediaHState: MediaHState,\n// ): MediaHStateParamsData | null => {\n//   switch (stateType) {\n//     case HStateType.Mrss: {\n//       const mediaStateData: MediaHStateParamsData = {\n//         dataFeedId: mediaHState.data.mediaStateData!.dataFeedId as string,\n//         currentFeedId: null,\n//         pendingFeedId: null,\n//         displayIndex: 0,\n//         firstItemDisplayed: false,\n//         waitForContentTimer: null,\n//       };\n//       return mediaStateData;\n//     }\n//     default: {\n//       break;\n//     }\n//   }\n\n//   return null;\n// };\n","import { createHsm } from './hsm';\nimport { createHState, createHStateSpecification } from './hState';\nimport {\n  HState,\n  HStateType,\n  HsmProperties,\n  HsmType,\n  BsPpState,\n  bsPpStateFromState,\n} from '../../type';\nimport {\n  BsPpStringThunkAction, BsPpDispatch,\n} from '../../model';\n\nimport { isNil } from 'lodash';\nimport { setHsmTop } from '../../model';\nimport { getHStateByName } from '../../selector/hsm';\n\nexport const createZoneHsm = (\n  hsmName: string,\n  hsmType: HsmType,\n  hsmData: HsmProperties\n): BsPpStringThunkAction => {\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n    const hsmId: string = dispatch(createHsm(hsmName, hsmType, hsmData));\n\n    dispatch(createHState(\n      createHStateSpecification(\n        HStateType.Top,\n        hsmId,\n        '',\n        'top',\n      ),\n    ));\n    const stTop: HState | null = getHStateByName(bsPpStateFromState(getState()), 'top');\n    const stTopId: string = isNil(stTop) ? '' : stTop!.id;\n\n    dispatch(setHsmTop(hsmId, stTopId));\n\n    return hsmId;\n  });\n};\n","import { DmMediaState } from '@brightsign/bsdatamodel';\nimport {\n  HState,\n  HStateType,\n  HsmEventType,\n  HSMStateData,\n} from '../../type';\nimport {\n  BsPpDispatch,\n  BsPpVoidThunkAction,\n  BsPpStringThunkAction,\n} from '../../model';\nimport { launchTimer, mediaHStateExitHandler, mediaHStateEventHandler } from '.';\nimport { createHState, createHStateSpecification } from './hState';\n\nexport const createImageState = (\n  hsmId: string,\n  mediaState: DmMediaState,\n  superStateId: string,\n): BsPpStringThunkAction => {\n  return ((dispatch: BsPpDispatch) => {\n    const imageStateId: string = dispatch(createHState(\n      createHStateSpecification(\n        HStateType.Image,\n        hsmId,\n        superStateId,\n        '',\n      ),\n      {\n        mediaStateId: mediaState.id,\n      },\n    ));\n    return imageStateId;\n  });\n};\n\nexport const STImageStateEventHandler = (\n  hState: HState,\n  event: HsmEventType,\n  stateData: HSMStateData\n): BsPpVoidThunkAction => {\n  return (dispatch: BsPpDispatch) => {\n    if (event.EventType === 'ENTRY_SIGNAL') {\n      // console.log('STImageStateEventHandler: entry signal');\n      dispatch(launchTimer(hState));\n      return 'HANDLED';\n    } else if (event.EventType === 'EXIT_SIGNAL') {\n      dispatch(mediaHStateExitHandler(hState.id));\n      stateData.nextStateId = hState.superStateId;\n      return 'SUPER';\n    } else {\n      return dispatch(mediaHStateEventHandler(hState, event, stateData));\n    }\n  };\n};\n","import { DmMediaState } from '@brightsign/bsdatamodel';\nimport {\n  HState,\n  HStateType,\n  HsmEventType,\n  HSMStateData,\n} from '../../type';\nimport {\n  BsPpDispatch,\n  BsPpVoidThunkAction,\n  BsPpStringThunkAction,\n} from '../../model';\nimport { launchTimer, mediaHStateExitHandler, mediaHStateEventHandler } from '.';\nimport { createHState, createHStateSpecification } from './hState';\n\nexport const createVideoState = (\n  hsmId: string,\n  mediaState: DmMediaState,\n  superStateId: string,\n): BsPpStringThunkAction => {\n  return ((dispatch: BsPpDispatch) => {\n    const videoStateId: string = dispatch(createHState(\n      createHStateSpecification(\n        HStateType.Video,\n        hsmId,\n        superStateId,\n        '',\n      ),\n      {\n        mediaStateId: mediaState.id,\n      },\n    ));\n    return videoStateId;\n  });\n};\n\nexport const STVideoStateEventHandler = (\n  hState: HState,\n  event: HsmEventType,\n  stateData: HSMStateData\n): BsPpVoidThunkAction => {\n  return (dispatch: BsPpDispatch) => {\n    if (event.EventType === 'ENTRY_SIGNAL') {\n      // console.log('STVideoStateEventHandler: entry signal');\n      dispatch(launchTimer(hState));\n      return 'HANDLED';\n    } else if (event.EventType === 'EXIT_SIGNAL') {\n      dispatch(mediaHStateExitHandler(hState.id));\n      stateData.nextStateId = hState.superStateId;\n      return 'SUPER';\n    } else {\n      return dispatch(mediaHStateEventHandler(hState, event, stateData));\n    }\n  };\n};\n","import { createZoneHsm } from './zoneHsm';\nimport {\n  DmZone,\n  dmGetMediaStateIdsForZone,\n  dmFilterDmState,\n  DmState,\n  DmMediaState,\n  dmGetMediaStateById,\n  BsDmId,\n  dmGetInitialMediaStateIdForZone,\n  // dmGetContainedMediaStateIdsForMediaState,\n  // DmDataFeedContentItem,\n  // DmcDataFeed,\n  // dmGetDataFeedById,\n} from '@brightsign/bsdatamodel';\nimport {\n  MediaZoneHsmProperties,\n  HState,\n  HsmType,\n  LUT,\n  BsPpState,\n  bsPpStateFromState,\n} from '../../type';\nimport {\n  BsPpVoidThunkAction, BsPpAnyPromiseThunkAction, BsPpStringThunkAction, updateHsmProperties, BsPpDispatch,\n} from '../../model';\nimport { ContentItemType } from '@brightsign/bscore';\nimport { createImageState } from './imageState';\nimport { createVideoState } from './videoState';\n// import { createSuperState } from './superState';\nimport { isNil, cloneDeep } from 'lodash';\nimport { Hsm } from '../../type';\n// import { getHsmById, getHStateById, getHStateByMediaStateId } from '../../selector/hsm';\nimport {\n  setActiveHState,\n  // setHsmData\n} from '../../model';\nimport { getHsmById, getHStateById, getHStateByMediaStateId } from '../../selector';\n// import { createMrssState } from './mrssState';\n\nexport const createMediaZoneHsm = (hsmName: string, hsmType: HsmType, bsdmZone: DmZone): BsPpVoidThunkAction => {\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n    const hsmData: MediaZoneHsmProperties = {\n      zoneId: bsdmZone.id,\n      x: bsdmZone.position.x,\n      y: bsdmZone.position.y,\n      height: bsdmZone.position.height,\n      width: bsdmZone.position.width,\n      initialMediaStateId: bsdmZone.initialMediaStateId,\n      mediaStateIdToHState: {},\n    };\n\n    const hsmId: string = dispatch(createZoneHsm(hsmName, hsmType, hsmData));\n    const hsm: Hsm = getHsmById(bsPpStateFromState(getState()), hsmId);\n\n    const bsdm: DmState = dmFilterDmState(bsPpStateFromState(getState()));\n\n    const mediaStateIds = dmGetMediaStateIdsForZone(bsdm, { id: bsdmZone.id });\n    for (const mediaStateId of mediaStateIds) {\n      const bsdmMediaState: DmMediaState = dmGetMediaStateById(bsdm, { id: mediaStateId }) as DmMediaState;\n      dispatch(createMediaHState(hsmId, bsdmMediaState, hsm.topStateId));\n    }\n  });\n};\n\nconst createMediaHState = (\n  hsmId: string,\n  bsdmMediaState: DmMediaState,\n  superStateId: string\n): BsPpStringThunkAction => {\n\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n    const hsm: Hsm = getHsmById(bsPpStateFromState(getState()), hsmId);\n    if (!isNil(hsm)) {\n      const contentItemType = bsdmMediaState.contentItem.type;\n      switch (contentItemType) {\n        case ContentItemType.Image:\n          const imageHStateId: string = dispatch(createImageState(hsmId, bsdmMediaState, superStateId));\n          const imageHState: HState | null = getHStateById(bsPpStateFromState(getState()), imageHStateId);\n          const imageStateIdToHState: LUT = cloneDeep(hsm.properties as MediaZoneHsmProperties).mediaStateIdToHState;\n          imageStateIdToHState[bsdmMediaState.id] = imageHState;\n          dispatch(updateHsmProperties({ id: hsmId, mediaStateIdToHState: imageStateIdToHState }));\n          return imageHStateId;\n        case ContentItemType.Video:\n          const videoHStateId: string = dispatch(createVideoState(hsmId, bsdmMediaState, superStateId));\n          const videoHState: HState | null = getHStateById(bsPpStateFromState(getState()), videoHStateId);\n          const videoStateIdToHState: LUT = cloneDeep(hsm.properties as MediaZoneHsmProperties).mediaStateIdToHState;\n          videoStateIdToHState[bsdmMediaState.id] = videoHState;\n          dispatch(updateHsmProperties({ id: hsmId, mediaStateIdToHState: videoStateIdToHState }));\n          return videoHStateId;\n        // case ContentItemType.MrssFeed:\n        //   const dataFeedContentItem: DmDataFeedContentItem = bsdmMediaState.contentItem as DmDataFeedContentItem;\n        //   const dataFeedId: BsDmId = dataFeedContentItem.dataFeedId;\n        //   const dataFeed: DmcDataFeed | null =\n        //     dmGetDataFeedById(dmFilterDmState(bsPpStateFromState(getState())), { id: dataFeedId });\n        //   if (!isNil(dataFeed)) {\n        //     const mrssHStateId: string = dispatch(createMrssState(hsmId, bsdmMediaState, dataFeed.id, superStateId));\n        //     const mrssHState: HState | null = getHStateById(bsPpStateFromState(getState()), mrssHStateId);\n        //     const mrssStateIdToHState: LUT = cloneDeep(hsm.properties as MediaZoneHsmProperties).mediaStateIdToHState;\n        //     mrssStateIdToHState[bsdmMediaState.id] = mrssHState;\n        //     dispatch(updateHsmProperties({ id: hsmId, mediaStateIdToHState: mrssStateIdToHState }));\n        //   }\n          break;\n        // case ContentItemType.SuperState:\n        //   const superStateHStateId: string = dispatch(createSuperState(hsmId, bsdmMediaState, superStateId));\n        //   const superStateHState: HState | null =\n        //     getHStateById(bsPpStateFromState(getState()), superStateHStateId) as HState;\n        //   const superStateStateIdToHState: LUT =\n        //     cloneDeep(hsm.properties as MediaZoneHsmProperties).mediaStateIdToHState;\n        //   superStateStateIdToHState[bsdmMediaState.id] = superStateHState;\n        //   dispatch(updateHsmProperties({ id: hsmId, mediaStateIdToHState: superStateStateIdToHState }));\n        //   dispatch(addSuperStateContent(\n        //     dmFilterDmState(bsPpStateFromState(getState())), superStateHState, bsdmMediaState));\n        //   return superStateHStateId;\n        default:\n          return '';\n      }\n    }\n    return '';\n  });\n};\n\n// const addSuperStateContent = (bsdm: DmState, superHState: HState, superStateMediaState: DmMediaState): any => {\n\n//   return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n\n//     const superStateId: BsDmId = superStateMediaState.id;\n//     const mediaStateIds: BsDmId[] = dmGetContainedMediaStateIdsForMediaState(bsdm, { id: superStateId });\n\n//     for (const mediaStateId of mediaStateIds) {\n//       const mediaState: DmMediaState = dmGetMediaStateById(bsdm, { id: mediaStateId }) as DmMediaState;\n//       dispatch(createMediaHState(superHState.hsmId, mediaState, superHState.id));\n//     }\n//   });\n// };\n\nexport const initializeVideoOrImagesZoneHsm = (hsmId: string): BsPpVoidThunkAction => {\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n\n    // get the initial media state for the zone\n    const bsdm: DmState = dmFilterDmState(bsPpStateFromState(getState()));\n    const hsm: Hsm = getHsmById(bsPpStateFromState(getState()), hsmId);\n    if (hsm.type === HsmType.VideoOrImages) {\n\n      const properties: MediaZoneHsmProperties = hsm.properties as MediaZoneHsmProperties;\n\n      let activeState: HState | null = null;\n      const initialMediaStateId: BsDmId | null =\n        dmGetInitialMediaStateIdForZone(bsdm, { id: properties.zoneId });\n      if (!isNil(initialMediaStateId)) {\n        const initialMediaState: DmMediaState = dmGetMediaStateById(bsdm, { id: initialMediaStateId! }) as DmMediaState;\n        activeState = getHStateByMediaStateId(bsPpStateFromState(getState()), hsm.id, initialMediaState.id);\n      }\n\n      dispatch(setActiveHState(hsmId, activeState));\n    }\n  });\n};\n\nexport const videoOrImagesZoneHsmGetInitialState = (hsmId: string): BsPpAnyPromiseThunkAction => {\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n    // console.log('videoOrImagesZoneGetInitialState');\n    // console.log(bsPpStateFromState(getState()));\n    const hsm: Hsm = getHsmById(bsPpStateFromState(getState()), hsmId);\n    // console.log(bsPpStateFromState(getState()));\n    const initialState = getHStateById(bsPpStateFromState(getState()), hsm.activeStateId);\n    return Promise.resolve(initialState);\n  });\n};\n","\nimport {\n  createHsm,\n  initializeHsm,\n} from './hsm';\nimport { createHState, createHStateSpecification } from './hState';\nimport {\n  getHsmByName,\n  getHStateByName,\n} from '../../selector/hsm';\nimport {\n  HState,\n  HsmType,\n  HStateType,\n  HsmEventType,\n  HSMStateData,\n  bsPpStateFromState,\n} from '../../type';\nimport {\n  BsPpAnyPromiseThunkAction,\n} from '../../model';\nimport {\n  isNil,\n  //  isString\n} from 'lodash';\nimport { setHsmTop } from '../../model';\n\nimport {\n  BsPpState,\n  // PpSchedule,\n} from '../../type';\nimport {\n  BsPpDispatch,\n  BsPpVoidThunkAction,\n  BsPpVoidPromiseThunkAction,\n} from '../../model';\n\nimport {\n  // getAutoschedule,\n  // getSyncSpecFileMap,\n  // getSrcDirectory,\n  getZoneHsmList,\n  // getDataFeedById,\n  // getSyncSpecReferencedFile,\n} from '../../selector';\nimport {\n  BsDmId,\n  // DmSignState,\n  // dmOpenSign,\n  DmState,\n  dmGetZoneById,\n  DmZone,\n  dmGetZonesForSign,\n  // dmFilterDmState,\n} from '@brightsign/bsdatamodel';\nimport { hsmConstructorFunction } from '../hsm/eventHandler';\nimport { createMediaZoneHsm } from './mediaZoneHsm';\nimport { getIsHsmInitialized } from '../../selector';\nimport { addHsmEvent } from '../hsmController';\nimport { openSign } from '../appController';\n// import {\n//   DmDataFeedSource,\n//   dmGetDataFeedIdsForSign,\n//   DmcDataFeed,\n//   dmGetDataFeedById,\n//   dmGetDataFeedSourceForFeedId\n// } from '@brightsign/bsdatamodel';\n// import {\n//   downloadMRSSFeedContent,\n//   retrieveDataFeed,\n//   readCachedFeed,\n//   downloadContentFeedContent,\n//   processFeed\n// } from '../dataFeed';\n// import { DataFeedUsageType } from '@brightsign/bscore';\n// import { ArContentFeed, ArMrssFeed, ArDataFeed } from '../../type/dataFeed';\n\nexport const createPlayerHsm = (): any => {\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n    // console.log('invoke createPlayerHsm');\n    const playerHsmId: string = dispatch(createHsm('player', HsmType.Player, {}));\n\n    const stTopId = dispatch(createHState(\n      createHStateSpecification(\n        HStateType.Top,\n        playerHsmId,\n        '',\n        'top',\n      ),\n    ));\n\n    dispatch(setHsmTop(playerHsmId, stTopId));\n\n    const stPlayerId = dispatch(createHState(\n      createHStateSpecification(\n        HStateType.Player,\n        playerHsmId,\n        stTopId,\n        'player',\n      ),\n    ));\n\n    // const stPlayerId = dispatch(createHState(\n    //   HStateType.Player, playerHsmId, stTopId, 'player'));\n\n    // dispatch(createHState(HStateType.Playing, playerHsmId, stPlayerId, 'playing'));\n    dispatch(createHState(\n      createHStateSpecification(\n        HStateType.Playing,\n        playerHsmId,\n        stPlayerId,\n        'playing',\n      ),\n    ));\n\n    // dispatch(createHState(HStateType.Waiting, playerHsmId, stPlayerId, 'waiting'));\n    dispatch(createHState(\n      createHStateSpecification(\n        HStateType.Waiting,\n        playerHsmId,\n        stPlayerId,\n        'waiting',\n      ),\n    ));\n  });\n};\n\nexport const initializePlayerHsm = (): any => {\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n    // console.log('invoke initializePlayerHsm');\n    const playerHsm = getHsmByName(bsPpStateFromState(getState()), 'player');\n    if (!isNil(playerHsm)) {\n      dispatch(initializeHsm(playerHsm!.id));\n    }\n  });\n};\n\nexport const playerHsmGetInitialState = (): BsPpAnyPromiseThunkAction => {\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n    // console.log('invoke playerHsmGetInitialState');\n    return dispatch(launchSchedulePlayback(''))\n      .then(() => {\n        // console.log('return from invoking playerHsmGetInitialState restartPlayback');\n        const hState = getHStateByName(bsPpStateFromState(getState()), 'playing');\n        return Promise.resolve(hState);\n      });\n  });\n};\n\nexport const STPlayerEventHandler = (\n  hState: HState,\n  event: HsmEventType,\n  stateData: HSMStateData\n): any => {\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n    stateData.nextStateId = hState.superStateId;\n\n    // console.log('***** - STPlayerEventHandler, event type ' + event.EventType);\n\n    return 'SUPER';\n  });\n};\n\nexport const STPlayingEventHandler = (\n  hState: HState,\n  event: HsmEventType,\n  stateData: HSMStateData\n): any => {\n\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n    stateData.nextStateId = null;\n\n    // console.log('***** - STPlayingEventHandler, event type ' + event.EventType);\n\n    if (event.EventType && event.EventType === 'ENTRY_SIGNAL') {\n\n      // console.log(hState.id + ': entry signal');\n\n      // const readStoredFeedsAction: any = readCachedFeeds();\n      // dispatch(readStoredFeedsAction)\n      //   .then(() => {\n      //     dispatch(fetchFeeds());\n      //     const action: any = launchPresentationPlayback();\n      //     dispatch(action);\n      //     return 'HANDLED';\n      //   });\n\n      const action: any = launchPresentationPlayback();\n      dispatch(action);\n\n      return 'HANDLED';\n\n      // } else if (isString(event.EventType) && (event.EventType === 'MRSS_DATA_FEED_LOADED') || (event.EventType === 'CONTENT_DATA_FEED_LOADED') || (event.EventType === 'CONTENT_DATA_FEED_UNCHANGED')) {\n\n      //   dispatch(advanceToNextDataFeedInQueue());\n      //   return 'HANDLED';\n    }\n\n    stateData.nextStateId = hState.superStateId;\n    return 'SUPER';\n  });\n};\n\nexport const STWaitingEventHandler = (\n  hState: HState,\n  event: HsmEventType,\n  stateData: HSMStateData\n): any => {\n\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n    stateData.nextStateId = null;\n\n    if (event.EventType && event.EventType === 'ENTRY_SIGNAL') {\n      // console.log(hState.id + ': entry signal');\n      return 'HANDLED';\n    } else if (event.EventType && event.EventType === 'TRANSITION_TO_PLAYING') {\n      // console.log(hState.id + ': TRANSITION_TO_PLAYING event received');\n      // const hsmId: string = hState.hsmId;\n      // const hsm: PpHsm = getHsmById(bsPpStateFromBaApUiState(getState()), hsmId);\n      const stPlayingState: HState | null = getHStateByName(bsPpStateFromState(getState()), 'Playing');\n      if (!isNil(stPlayingState)) {\n        stateData.nextStateId = stPlayingState!.id;\n        return 'TRANSITION';\n      }\n      debugger;\n    }\n\n    stateData.nextStateId = hState.superStateId;\n    return 'SUPER';\n  });\n};\n\nexport const launchSchedulePlayback = (presentationName: string): BsPpVoidPromiseThunkAction => {\n  // console.log('invoke restartPlayback');\n\n  return (dispatch: BsPpDispatch, getState: () => BsPpState) => {\n    const action = openSign(presentationName);\n    const promise = dispatch(action as any);\n    return promise;\n\n    // const autoSchedule: PpSchedule | null = getAutoschedule(bsPpStateFromState(getState()));\n    // if (!isNil(autoSchedule)) {\n    //   //  - only a single scheduled item is currently supported\n    //   const scheduledPresentation = autoSchedule!.scheduledPresentations[0];\n    //   const presentationToSchedule = scheduledPresentation.presentationToSchedule;\n    //   presentationName = presentationToSchedule.name;\n    //   const autoplayFileName = presentationName + '.bml';\n\n    //   const syncSpecFileMap = getSyncSpecFileMap(bsPpStateFromState(getState()));\n    //   if (!isNil(syncSpecFileMap)) {\n    //     return getSyncSpecReferencedFile(autoplayFileName, syncSpecFileMap!,\n    // getSrcDirectory(bsPpStateFromState(getState())))\n    //       .then((bpfxState: any) => {\n    //         const autoPlay: any = bpfxState.bsdm;\n    //         const signState = autoPlay as DmSignState;\n    //         dispatch(dmOpenSign(signState));\n    //       });\n    //   }\n    //   return Promise.resolve();\n    // } else {\n    //   return Promise.resolve();\n    // }\n  };\n};\n\nexport const launchPresentationPlayback = (): BsPpVoidThunkAction => {\n  // console.log('invoke startPlayback');\n\n  return (dispatch: BsPpDispatch, getState: () => BsPpState) => {\n\n    const bsdm: DmState = bsPpStateFromState(getState()).bsdm;\n    // console.log('startPlayback');\n    // console.log(bsdm);\n\n    const zoneIds: BsDmId[] = dmGetZonesForSign(bsdm);\n    zoneIds.forEach((zoneId: BsDmId) => {\n      const bsdmZone: DmZone = dmGetZoneById(bsdm, { id: zoneId }) as DmZone;\n      console.log(bsdmZone);\n      dispatch(createMediaZoneHsm(zoneId, bsdmZone.type.toString(), bsdmZone));\n    });\n\n    const promises: Array<Promise<void>> = [];\n\n    const zoneHsmList = getZoneHsmList(bsPpStateFromState(getState()));\n    for (const zoneHsm of zoneHsmList) {\n      dispatch(hsmConstructorFunction(zoneHsm.id));\n      const action: BsPpVoidPromiseThunkAction = initializeHsm(zoneHsm.id);\n      promises.push(dispatch(action));\n    }\n\n    Promise.all(promises).then(() => {\n      // console.log('startPlayback nearly complete');\n      // console.log('wait for HSM initialization complete');\n      const hsmInitializationComplete = getIsHsmInitialized(bsPpStateFromState(getState()));\n      if (hsmInitializationComplete) {\n        const event: HsmEventType = {\n          EventType: 'NOP',\n        };\n        dispatch(addHsmEvent(event));\n      }\n    });\n\n  };\n};\n\n// ids of dataFeeds to download\n// const bsdmDataFeedIdsToDownload: BsDmId[] = [];\n\n// export const advanceToNextDataFeedInQueue = () => {\n//   return (dispatch: any, getState: any) => {\n//     bsdmDataFeedIdsToDownload.shift();\n\n//     if (bsdmDataFeedIdsToDownload.length > 0) {\n//       const bsdmDataFeedId = bsdmDataFeedIdsToDownload[0];\n//       dispatch(retrieveAndProcessDataFeed(bsdmDataFeedId));\n//     }\n//   };\n// };\n\n// export const queueRetrieveDataFeed = (bsdmDataFeedId: BsDmId) => {\n//   return (dispatch: any, getState: any) => {\n//     const bsdm: DmState = dmFilterDmState(bsPpStateFromState(getState()));\n//     const bsdmDataFeed: DmcDataFeed | null = dmGetDataFeedById(bsdm, { id: bsdmDataFeedId }) as DmcDataFeed;\n//     if (!isNil(bsdmDataFeed)) {\n//       if (bsdmDataFeed.usage === DataFeedUsageType.Text) {\n//         dispatch(retrieveAndProcessDataFeed(bsdmDataFeedId));\n//       } else {\n//         bsdmDataFeedIdsToDownload.push(bsdmDataFeedId);\n//         if (bsdmDataFeedIdsToDownload.length === 1) {\n//           dispatch(retrieveAndProcessDataFeed(bsdmDataFeedId));\n//         }\n//       }\n//     }\n//   };\n// };\n\n// interface DataFeedTimeoutEventCallbackParams {\n//   dispatch: BsPpDispatch;\n//   dataFeedId: string;\n// }\n\n// export const launchRetrieveFeedTimer = (dataFeedId: BsDmId): any => {\n//   return (dispatch: any, getState: any) => {\n//     const bsdm: DmState = dmFilterDmState(bsPpStateFromState(getState()));\n//     const dataFeedSource = dmGetDataFeedSourceForFeedId(bsdm, { id: dataFeedId }) as DmDataFeedSource;\n//     let updateInterval = dataFeedSource.updateInterval;\n\n//     // test\n//     updateInterval = 60;\n\n//     const dataFeedTimeoutEventCallbackParams: DataFeedTimeoutEventCallbackParams = {\n//       dispatch,\n//       dataFeedId,\n//     };\n//     // console.log('launchRetrieveFeedTimer');\n//     // console.log(updateInterval);\n//     setTimeout(retrieveFeedTimeoutHandler, updateInterval * 1000, dataFeedTimeoutEventCallbackParams);\n//   };\n// };\n\n// const retrieveFeedTimeoutHandler = (callbackParams: DataFeedTimeoutEventCallbackParams): void => {\n//   // console.log(callbackParams);\n//   callbackParams.dispatch(queueRetrieveDataFeed(callbackParams.dataFeedId));\n// };\n\n// const readCachedFeeds = () => {\n\n//   return (dispatch: any, getState: any) => {\n\n//     const bsdm: DmState = dmFilterDmState(bsPpStateFromState(getState()));\n\n//     const bsdmDataFeedIds: BsDmId[] = dmGetDataFeedIdsForSign(bsdm);\n\n//     const readNextCachedFeed = (index: number): Promise<void> => {\n\n//       if (index >= bsdmDataFeedIds.length) {\n//         return Promise.resolve();\n//       }\n\n//       const bsdmDataFeedId = bsdmDataFeedIds[index];\n//       const bsdmDataFeed: DmcDataFeed | null = dmGetDataFeedById(bsdm, { id: bsdmDataFeedId }) as DmcDataFeed;\n//       return (readCachedFeed(getState(), bsdmDataFeed))\n//         .then((rawFeed: any) => {\n//           if (!isNil(rawFeed)) {\n//             // const promise = dispatch(processFeed(bsdmDataFeed, rawFeed));\n//             dispatch(processFeed(bsdmDataFeed, rawFeed));\n//             // TODO - wait for promise to get resolved before starting next one?\n//           }\n//           return readNextCachedFeed(index + 1);\n//         }).catch((error: Error) => {\n//           console.log(error);\n//           debugger;\n//         });\n//     };\n\n//     return readNextCachedFeed(0);\n//   };\n// };\n\n// const fetchFeeds = () => {\n//   return (dispatch: any, getState: any) => {\n//     const bsdm: DmState = dmFilterDmState(bsPpStateFromState(getState()));\n//     const bsdmDataFeedIds: BsDmId[] = dmGetDataFeedIdsForSign(bsdm);\n//     for (const bsdmDataFeedId of bsdmDataFeedIds) {\n//       dispatch(queueRetrieveDataFeed(bsdmDataFeedId));\n//     }\n//   };\n// };\n\n// function retrieveAndProcessDataFeed(bsdmDataFeedId: BsDmId) {\n//   return (dispatch: any, getState: any) => {\n//     const bsdm: DmState = dmFilterDmState(bsPpStateFromState(getState()));\n//     const bsdmDataFeed: DmcDataFeed | null = dmGetDataFeedById(bsdm, { id: bsdmDataFeedId }) as DmcDataFeed;\n//     // const feedFileName: string = getFeedCacheRoot() + bsdmDataFeed.id + '.xml';\n//     retrieveDataFeed(getState(), bsdm, bsdmDataFeed)\n//       .then((rawFeed) => {\n//         dispatch(processFeed(bsdmDataFeed, rawFeed))\n//           .then(() => {\n//             // TYPESCRIPT issues\n//             const arDataFeed = getDataFeedById(getState(), bsdmDataFeed.id) as ArDataFeed;\n//             if (arDataFeed.type === 'content') {\n//               dispatch(downloadContentFeedContent(arDataFeed as ArContentFeed));\n//             } else if (arDataFeed.type === 'mrss') {\n//               dispatch(downloadMRSSFeedContent(arDataFeed as ArMrssFeed));\n//             } else if (arDataFeed.type === 'text') {\n//               // console.log('text feed: return from processFeed - no content to download');\n//             } else {\n//               debugger;\n//             }\n\n//             const event: HsmEventType = {\n//               EventType: 'LIVE_DATA_FEED_UPDATE',\n//               EventData: bsdmDataFeedId,\n//             };\n\n//             dispatch(addHsmEvent(event));\n\n//             dispatch(launchRetrieveFeedTimer(bsdmDataFeedId));\n\n//           }).catch((err: any) => {\n//             console.log(err);\n//           });\n//       });\n//   };\n// }\n","import {\n  BsPpState,\n  HsmEventType,\n  HSMStateData,\n  HState,\n  HStateType,\n  HsmType,\n  bsPpStateFromState,\n  // HsmState,\n} from '../../type';\nimport { isNil } from 'lodash';\nimport {\n  STPlayerEventHandler,\n  STPlayingEventHandler,\n  STWaitingEventHandler,\n  playerHsmGetInitialState,\n} from './playerHsm';\nimport { initializeVideoOrImagesZoneHsm, videoOrImagesZoneHsmGetInitialState } from './mediaZoneHsm';\nimport {\n  getHsmById,\n  // getActiveHStateIdByHsmId\n} from '../../selector';\nimport {\n  BsPpDispatch, BsPpVoidThunkAction,\n} from '../../model';\nimport { STVideoStateEventHandler } from './videoState';\nimport { STImageStateEventHandler } from './imageState';\n// import { STSuperStateEventHandler } from './superState';\n// import { STMrssStateEventHandler } from './mrssState';\n// import { logHsmEvent } from '../../utility/logger';\n\nexport const hsmConstructorFunction = (hsmId: string): BsPpVoidThunkAction => {\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n    const hsm = getHsmById(bsPpStateFromState(getState()), hsmId);\n    if (!isNil(hsm)) {\n      switch (hsm.type) {\n        case HsmType.Player:\n          break;\n        case HsmType.VideoOrImages: {\n          return dispatch(initializeVideoOrImagesZoneHsm(hsmId));\n        }\n        default:\n          debugger;\n      }\n    }\n    return;\n  });\n};\n\nexport const hsmInitialPseudoStateHandler = (hsmId: string) => {\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n    const hsm = getHsmById(bsPpStateFromState(getState()), hsmId);\n    switch (hsm.type) {\n      case HsmType.Player:\n        const playerHsmAction = playerHsmGetInitialState();\n        return dispatch(playerHsmAction);\n      case HsmType.VideoOrImages:\n        const videoOrImagesZoneHsmAction = videoOrImagesZoneHsmGetInitialState(hsmId);\n        return dispatch(videoOrImagesZoneHsmAction);\n      default:\n        // TEDTODO\n        debugger;\n    }\n    return;\n  });\n};\n\nexport const HStateEventHandler = (\n  hState: HState,\n  event: HsmEventType,\n  stateData: HSMStateData\n): any => {\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n\n    // const hsmStateBefore: HsmState = getState().bsPlayer.hsmState;\n\n    let retVal: any = null;\n\n    if (!isNil(hState)) {\n      switch (hState.type) {\n        case HStateType.Top:\n          retVal = dispatch(STTopEventHandler(hState, event, stateData) as any);\n          break;\n        case HStateType.Player:\n          retVal = dispatch(STPlayerEventHandler(hState, event, stateData));\n          break;\n        case HStateType.Playing:\n          retVal = dispatch(STPlayingEventHandler(hState, event, stateData));\n          break;\n        case HStateType.Waiting:\n          retVal = dispatch(STWaitingEventHandler(hState, event, stateData));\n          break;\n        case HStateType.Image:\n          retVal = dispatch(STImageStateEventHandler(hState, event, stateData));\n          break;\n        case HStateType.Video:\n          retVal = dispatch(STVideoStateEventHandler(hState, event, stateData));\n          break;\n        // case HStateType.SuperState:\n        //   retVal = dispatch(STSuperStateEventHandler(hState, event, stateData));\n        //   break;\n        // case HStateType.Mrss:\n        //   retVal = dispatch(STMrssStateEventHandler(hState, event, stateData));\n        //   break;\n        default:\n          debugger;\n          break;\n      }\n    }\n\n    // console.log('** HStateEventHandler');\n    // console.log(hState.type);\n    // console.log(event.EventType);\n    // console.log(event.EventData);\n    // console.log('bsPlayerState before:');\n    // console.log(hsmStateBefore);\n\n    // const hStateAfter: HState = getActiveHStateIdByHsmId(getState(), hState.hsmId) as HState;\n    // const hsmStateAfter: HsmState = getState().bsPlayer.hsmState;\n    // console.log('hsmState after:');\n    // console.log(hsmStateAfter);\n\n    // logHsmEvent(getState(), hState, hsmStateBefore, event, hStateAfter, hsmStateAfter);\n\n    return retVal;\n  });\n};\n\nconst STTopEventHandler = (hState: HState, _: HsmEventType, stateData: HSMStateData) => {\n  return ((dispatch: BsPpDispatch) => {\n    stateData.nextStateId = null;\n    return 'IGNORED';\n  });\n};\n","import {\n  Hsm,\n  HsmProperties,\n  HSMStateData,\n  HState,\n  HsmType,\n  bsPpStateFromState,\n} from '../../type';\nimport { isNil } from 'lodash';\nimport {\n  HsmEventType,\n  BsPpState,\n} from '../../type';\nimport {\n  BsPpVoidPromiseThunkAction,\n  BsPpDispatch,\n  BsPpStringThunkAction,\n  BsPpVoidThunkAction,\n} from '../../model';\n\nimport { addHsm } from '../../model/hsm';\nimport {\n  setActiveHState,\n  setHsmInitialized\n} from '../../model';\nimport {\n  hsmInitialPseudoStateHandler,\n  HStateEventHandler\n} from './eventHandler';\nimport { newBsPpId } from '../../utility';\nimport { getHsmById, getHStateById, getHsmInitialized } from '../../selector';\n\nexport const createHsm = (\n  name: string,\n  type: HsmType,\n  properties: HsmProperties,\n): BsPpStringThunkAction => {\n  return ((dispatch: BsPpDispatch) => {\n    // console.log('***** HSM.ts#createHsm');\n    const hsmId: string = newBsPpId();\n    dispatch(addHsm({\n      id: hsmId,\n      name,\n      type,\n      initialized: false,\n      topStateId: '',\n      activeStateId: null,\n      properties,\n    }));\n    return hsmId;\n  });\n};\n\nexport function initializeHsm(\n  hsmId: string,\n): BsPpVoidPromiseThunkAction {\n\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n\n    // console.log('***** HSM.ts#initializeHsm');\n\n    // is there a reason why the following call is necessary? It causes breakage....\n    // dispatch(setActiveHState(hsmId, null));\n\n    // execute initial transition\n    const action = hsmInitialPseudoStateHandler(hsmId) as any;\n    if (!isNil(action)) {\n      return dispatch(action).\n        then((activeState: HState) => {\n          dispatch(setActiveHState(hsmId, activeState));\n          dispatch(completeHsmInitialization(hsmId));\n          // const hsmInitializationComplete = getHsmInitialized(bsPpStateFromState(getState()), hsmId);\n          getHsmInitialized(bsPpStateFromState(getState()), hsmId);\n          // console.log('69 - end of hsmInitialize-0, hsmInitializationComplete: ' + hsmInitializationComplete);\n          return Promise.resolve();\n        });\n    }\n    return Promise.resolve();\n  });\n}\n\n// TEDTODO - complete analysis to determine if tmpActiveState and activeState are both required.\nfunction completeHsmInitialization(\n  hsmId: string,\n): BsPpVoidThunkAction {\n\n  let action: any;\n  let status: any;\n\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState): void => {\n\n    const hsm: Hsm = getHsmById(bsPpStateFromState(getState()), hsmId);\n    let activeState: HState | null = getHStateById(bsPpStateFromState(getState()), hsm.activeStateId);\n    const topState: HState | null = getHStateById(bsPpStateFromState(getState()), hsm.topStateId);\n\n    const stateData: HSMStateData = { nextStateId: null };\n\n    // empty event used to get super states\n    const emptyEvent: HsmEventType = { EventType: 'EMPTY_SIGNAL' };\n\n    // entry event\n    const entryEvent: HsmEventType = { EventType: 'ENTRY_SIGNAL' };\n\n    // init event\n    const initEvent: HsmEventType = { EventType: 'INIT_SIGNAL' };\n\n    // if there is no activeState, the playlist is empty\n    if (isNil(activeState)) {\n      dispatch(setActiveHState(hsmId, null));\n      // console.log('***** return from HSM.ts#completeHsmInitialization');\n      dispatch(setHsmInitialized(hsmId, true));\n      return;\n    }\n\n    if (!isNil(activeState)) {\n      let tmpActiveState: HState = activeState!;\n\n      // start at the top state\n      if (isNil(topState)) {\n        debugger;\n      }\n      let sourceState = topState;\n\n      while (true) {\n\n        const entryStates: any[] = [];\n        let entryStateIndex = 0;\n\n        // target of the initial transition\n        entryStates[0] = tmpActiveState;\n\n        // send an empty event to get the super state\n        action = HStateEventHandler((activeState as HState), emptyEvent, stateData);\n        status = dispatch(action);\n\n        tmpActiveState = getHStateById(bsPpStateFromState(getState()), stateData.nextStateId) as HState;\n        activeState = tmpActiveState;\n\n        // walk up the tree until the current source state is hit\n        while (tmpActiveState.id !== (sourceState as HState).id) {\n          entryStateIndex = entryStateIndex + 1;\n          entryStates[entryStateIndex] = tmpActiveState;\n          action = HStateEventHandler((activeState as HState), emptyEvent, stateData);\n          status = dispatch(action);\n          tmpActiveState = getHStateById(bsPpStateFromState(getState()), stateData.nextStateId) as HState;\n          activeState = tmpActiveState;\n        }\n\n        // retrace the entry path in reverse (desired) order\n        while (entryStateIndex >= 0) {\n          const entryState = entryStates[entryStateIndex];\n          action = HStateEventHandler((entryState as HState), entryEvent, stateData);\n          status = dispatch(action);\n          entryStateIndex = entryStateIndex - 1;\n        }\n\n        // new source state is the current state\n        sourceState = entryStates[0];\n\n        action = HStateEventHandler((sourceState as HState), initEvent, stateData);\n        status = dispatch(action);\n        if (status !== 'TRANSITION') {\n          activeState = sourceState;\n          dispatch(setActiveHState(hsmId, activeState));\n          // console.log('***** return from HSM.ts#completeHsmInitialization');\n          dispatch(setHsmInitialized(hsmId, true));\n          return;\n        }\n\n        tmpActiveState = getHStateById(bsPpStateFromState(getState()), stateData.nextStateId) as HState;\n        activeState = tmpActiveState;\n      }\n    }\n  });\n}\n\nexport function constructorFunction(constructorHandler: () => void): void {\n  if (!isNil(constructorHandler)) {\n    constructorHandler();\n  }\n}\n\nexport function hsmDispatch(\n  event: HsmEventType,\n  hsmId: string,\n  activeStateId: string | null,\n) {\n  let action: any;\n  let status: string;\n\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n\n    let activeState = getHStateById(bsPpStateFromState(getState()), activeStateId);\n\n    // console.log('***** HSM.ts#Dispatch');\n    // console.log(event.EventType);\n\n    // if there is no activeState, the playlist is empty\n    if (isNil(activeState)) {\n      dispatch(setActiveHState(hsmId, null));\n      return;\n    }\n\n    const stateData: HSMStateData = { nextStateId: null };\n\n    // empty event used to get super states\n    const emptyEvent: HsmEventType = { EventType: 'EMPTY_SIGNAL' };\n\n    // entry event\n    const entryEvent: HsmEventType = { EventType: 'ENTRY_SIGNAL' };\n\n    // init event\n    const initEvent: HsmEventType = { EventType: 'INIT_SIGNAL' };\n\n    // exit event\n    const exitEvent: HsmEventType = { EventType: 'EXIT_SIGNAL' };\n\n    let t = activeState;                                                      // save the current state\n\n    status = 'SUPER';\n    let s: HState = activeState as HState; // TODO - initialized to reduce ts errors. TEDTODO - legit?\n    while (status === 'SUPER') {                                                 // process the event hierarchically\n      s = activeState as HState;\n      action = HStateEventHandler((s as HState), event, stateData);\n      status = dispatch(action);\n      activeState = getHStateById(bsPpStateFromState(getState()), stateData.nextStateId);\n    }\n\n    if (status === 'TRANSITION') {\n      const path: any[] = [];\n\n      path[0] = activeState;                                                // save the target of the transition\n      path[1] = t;                                                            // save the current state\n\n      // exit from the current state to the transition s\n      while (t!.id !== s.id) {\n        action = HStateEventHandler((t as HState), exitEvent, stateData);\n        status = dispatch(action);\n        if (status === 'HANDLED') {\n          action = HStateEventHandler((t as HState), emptyEvent, stateData);\n          status = dispatch(action);\n        }\n        t = getHStateById(bsPpStateFromState(getState()), stateData.nextStateId) as HState;\n      }\n\n      t = path[0] as HState;                                                            // target of the transition\n\n      // s is the source of the transition\n      let ip: number = -1; // TEDTODO - initialization legit?\n      // check source == target (transition to self)\n      if (s.id === t.id) {\n        action = HStateEventHandler((s as HState), exitEvent, stateData);                // exit the source\n        status = dispatch(action);\n        ip = 0;\n      } else {\n        action = HStateEventHandler((t as HState), emptyEvent, stateData);               // superstate of target\n        status = dispatch(action);\n        t = getHStateById(bsPpStateFromState(getState()), stateData.nextStateId) as HState;\n        if (s.id === t.id) {                                                 // check source == target->super\n          ip = 0;                                                         // enter the target\n        } else {\n          action = HStateEventHandler((s as HState), emptyEvent, stateData);           // superstate of source\n          status = dispatch(action);\n\n          // check source->super == target->super\n          if ((getHStateById(bsPpStateFromState(getState()), stateData.nextStateId) as HState).id === t.id) {\n            action = HStateEventHandler((s as HState), exitEvent, stateData);        // exit the source\n            status = dispatch(action);\n            ip = 0;                                                     // enter the target\n          } else {\n            if ((getHStateById(bsPpStateFromState(\n              getState()), stateData.nextStateId) as HState).id === (path as HState[])[0].id) {\n              // check source->super == target\n              action = HStateEventHandler((s as HState), exitEvent, stateData);    // exit the source\n              status = dispatch(action);\n            } else {\n              let iq = 0;                                             // indicate LCA not found\n              ip = 1;                                                 // enter target and its superstate\n              path[1] = t;                                            // save the superstate of the target\n              t = getHStateById(bsPpStateFromState(\n                getState()), stateData.nextStateId) as HState;       // save source->super\n              // get target->super->super\n              const aState: HState = (path as HState[])[1];\n              action = HStateEventHandler(aState, emptyEvent, stateData);\n              status = dispatch(action);\n              while (status === 'SUPER') {\n                ip = ip + 1;\n                path[ip] = getHStateById(\n                  bsPpStateFromState(getState()), stateData.nextStateId);                     // store the entry path\n                if ((getHStateById(bsPpStateFromState(getState()),\n                    stateData.nextStateId) as HState).id === s.id) { // is it the source?\n                  iq = 1;                                         // indicate that LCA found\n                  ip = ip - 1;                                    // do not enter the source\n                  status = 'HANDLED';                             // terminate the loop\n                } else {                                              // it is not the source; keep going up\n                  const bState: HState =\n                    (getHStateById(bsPpStateFromState(getState()), stateData.nextStateId) as HState);\n                  action = HStateEventHandler(bState, emptyEvent, stateData);\n                  status = dispatch(action);\n                }\n              }\n\n              if (iq === 0) {                                           // LCA not found yet\n                action = HStateEventHandler((s as HState), exitEvent, stateData); // exit the source\n                status = dispatch(action);\n\n                // check the rest of source->super == target->super->super...\n                iq = ip;\n                status = 'IGNORED';                                 // indicate LCA not found\n                while (iq >= 0) {\n                  if (t.id === (path as HState[])[iq].id) {                      // is this the LCA?\n                    status = 'HANDLED';                         // indicate LCA found\n                    ip = iq - 1;                                // do not enter LCA\n                    iq = -1;                                    // terminate the loop\n                  } else {\n                    iq = iq - 1;                                 // try lower superstate of target\n                  }\n                }\n\n                if (status !== 'HANDLED') {                          // LCA not found yet?\n\n                  // check each source->super->... for each target->super...\n                  status = 'IGNORED';                             // keep looping\n                  while (status !== 'HANDLED') {\n                    action = HStateEventHandler((t as HState), exitEvent, stateData);\n                    status = dispatch(action);\n                    if (status === 'HANDLED') {\n                      action = HStateEventHandler((t as HState), emptyEvent, stateData);\n                      status = dispatch(action);\n                    }\n                    t = getHStateById(bsPpStateFromState(\n                      getState()), stateData.nextStateId) as HState;    // set to super of t\n                    iq = ip;\n                    while (iq > 0) {\n                      if (t.id === (path as HState[])[iq].id) {              // is this the LCA?\n                        ip = iq - 1;                        // do not enter LCA\n                        iq = -1;                            // break inner\n                        status = 'HANDLED';                 // break outer\n                      } else {\n                        iq = iq - 1;\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n\n      // retrace the entry path in reverse (desired) order...\n      while (ip >= 0) {\n        const cState: any = (path as HState[])[ip];\n        action = HStateEventHandler((cState as HState), entryEvent, stateData);        // enter path[ip]\n        status = dispatch(action);\n        ip = ip - 1;\n      }\n\n      // stick the target into register */\n      t = (path as HState[])[0];\n      activeState = t;                                                   // update the current state */\n\n      // console.log('HSM.ts#Dispatch: invoke handler with initEvent');\n\n      // drill into the target hierarchy...\n      action = HStateEventHandler((t as HState), initEvent, stateData);\n      status = dispatch(action);\n      activeState = getHStateById(bsPpStateFromState(getState()), stateData.nextStateId);\n\n      while (status === 'TRANSITION') {\n        ip = 0;\n        path[0] = activeState;\n        action =\n          HStateEventHandler((activeState as HState as HState), emptyEvent, stateData); // find superstate\n        status = dispatch(action);\n        activeState = getHStateById(bsPpStateFromState(getState()), stateData.nextStateId);\n        while ((activeState as HState).id !== t.id) {\n          ip = ip + 1;\n          path[ip] = activeState;\n          action =\n            HStateEventHandler((activeState as HState as HState), emptyEvent, stateData); // find superstate\n          status = dispatch(action);\n          activeState = getHStateById(bsPpStateFromState(getState()), stateData.nextStateId);\n        }\n        activeState = path[0];\n\n        while (ip >= 0) {\n          const dState: any = (path as HState[])[ip];\n          action = HStateEventHandler(dState, entryEvent, stateData);\n          status = dispatch(action);\n          ip = ip - 1;\n        }\n\n        t = (path as HState[])[0];\n\n        action = HStateEventHandler((t as HState), initEvent, stateData);\n        status = dispatch(action);\n      }\n    }\n\n    // set the new state or restore the current state\n    activeState = t;\n\n    dispatch(setActiveHState(hsmId, activeState));\n  });\n}\n","import {\n  BsPpState,\n  HsmEventType,\n  HSMStateData,\n  // MediaHState,\n  Hsm,\n  MediaZoneHsmProperties,\n  bsPpStateFromState,\n  MediaHState,\n  HsmTimerType,\n} from '../../type';\nimport {\n  BsPpDispatch,\n  BsPpVoidThunkAction,\n  setMediaHStateTimeoutId,\n} from '../../model';\nimport {\n  DmState,\n  dmGetEventIdsForMediaState,\n  BsDmId,\n  dmGetEventStateById,\n  DmEvent,\n  DmTimer,\n  DmMediaState,\n  DmcEvent,\n  DmcMediaState,\n  dmGetMediaStateById,\n  dmFilterDmState,\n  DmcTransition,\n  DmSuperStateContentItem,\n} from '@brightsign/bsdatamodel';\nimport {\n  HState,\n} from '../../type';\nimport { EventType, EventIntrinsicAction, ContentItemType } from '@brightsign/bscore';\nimport {\n  getHsmById, getHStateById,\n} from '../../selector';\nimport { isNil, isNumber } from 'lodash';\nimport {\n  // _bsPpStore,\n  addHsmEvent,\n} from '../hsmController';\n\nexport const mediaHStateEventHandler = (\n  hState: HState,\n  event: HsmEventType,\n  stateData: HSMStateData\n): BsPpVoidThunkAction => {\n\n  return (dispatch: BsPpDispatch, getState: () => any) => {\n\n    // console.log('mediaHStateEventHandler');\n\n    const dmState: DmState = dmFilterDmState(bsPpStateFromState(getState()));\n    const mediaState: DmMediaState = dmGetMediaStateById(\n      dmState,\n      { id: (hState as MediaHState).data.mediaStateId }) as DmMediaState;\n    if (isNil(mediaState)) {\n      debugger;\n    }\n\n    const matchedEvent: DmcEvent | null = getMatchedEvent(mediaState, event);\n\n    if (!isNil(matchedEvent)) {\n      return executeEventMatchAction(bsPpStateFromState(getState()), hState, matchedEvent!, stateData);\n    }\n\n    stateData.nextStateId = hState.superStateId;\n    return 'SUPER';\n  };\n};\n\nconst executeEventMatchAction = (\n  state: BsPpState,\n  hState: HState,\n  event: DmcEvent,\n  stateData: HSMStateData\n): string => {\n  if (isNil(event.transitionList) || event.transitionList.length === 0) {\n    switch (event.action) {\n      case EventIntrinsicAction.None: {\n        // console.log('remain on current state, playContinuous');\n        return 'HANDLED';\n      }\n      case EventIntrinsicAction.ReturnToPriorState: {\n        // console.log('return prior state');\n        return 'HANDLED';\n      }\n      // case EventIntrinsicAction.StopPlayback: {\n      //   console.log('remain on current state, stopPlayback');\n      //   tmpGetVideoElementRef().pause();\n      //   return 'HANDLED';\n      // }\n      // case EventIntrinsicAction.StopPlaybackAndClearScreen: {\n      //   console.log('remain on current state, stopPlaybackClearScreen');\n      //   // videoPlayer.StopClear()\n      //   // imagePlayer.StopDisplay()\n      //   tmpGetVideoElementRef().pause();\n      //   return 'HANDLED';\n      // }\n      default: {\n        // AUTOTRONTODO\n        debugger;\n      }\n    }\n  } else {\n    const transition: DmcTransition = event.transitionList[0]; // AUTOTRONTODO - or event.defaultTransition?\n    const targetMediaStateId: BsDmId = transition.targetMediaStateId;\n    const hsmId: string = hState.hsmId;\n    const zoneHsm: Hsm = getHsmById(state, hsmId);\n\n    const mediaZoneHsmData: MediaZoneHsmProperties = zoneHsm.properties as MediaZoneHsmProperties;\n\n    let targetHState: HState = mediaZoneHsmData.mediaStateIdToHState[targetMediaStateId];\n    if (!isNil(targetHState)) {\n\n      // check to see if target of transition is a superState\n      const targetMediaState: DmMediaState | null = dmGetMediaStateById(\n        dmFilterDmState(state),\n        {\n          id: (targetHState as MediaHState).data.mediaStateId,\n        }\n      );\n      if (!isNil(targetMediaState)) {\n        if (targetMediaState!.contentItem.type === ContentItemType.SuperState) {\n          const superStateContentItem = targetMediaState!.contentItem as DmSuperStateContentItem;\n          const initialMediaStateId = superStateContentItem.initialMediaStateId;\n          targetHState = mediaZoneHsmData.mediaStateIdToHState[initialMediaStateId];\n        }\n      } else {\n        debugger;\n      }\n\n      stateData.nextStateId! = targetHState.id;\n      return 'TRANSITION';\n    }\n  }\n  // TEDTODO - should it ever reach here?\n  stateData.nextStateId = hState.superStateId;\n  return 'SUPER';\n};\n\nconst eventDataMatches = (matchedEvent: DmcEvent, dispatchedEvent: HsmEventType): boolean => {\n  return true;\n};\n\nconst getMatchedEvent = (mediaState: DmMediaState, dispatchedEvent: HsmEventType): DmcEvent | null => {\n  const mediaStateEvents: DmcEvent[] = (mediaState as DmcMediaState).eventList;\n  for (const mediaStateEvent of mediaStateEvents) {\n    if (mediaStateEvent.type === dispatchedEvent.EventType) {\n      if (eventDataMatches(mediaStateEvent, dispatchedEvent)) {\n        return mediaStateEvent;\n      }\n    }\n  }\n  return null;\n};\n\n// const executePauseVideoCommand = (): void => {\n//   console.log('pause video');\n//   tmpGetVideoElementRef().pause();\n\n//   // const videoElementRef = tmpGetVideoElementRef();\n//   // // videoElementRef.setAttribute('src', null);\n//   // videoElementRef.removeAttribute('src');\n// }\n\n// const executeResumeVideoCommand = (): void => {\n//   tmpGetVideoElementRef().play();\n// }\n\nexport const mediaHStateExitHandler = (\n  hStateId: string,\n): BsPpVoidThunkAction => {\n  return (dispatch: BsPpDispatch, getState: () => BsPpState) => {\n    // console.log('mediaHStateExitHandler');\n    const hState: HState | null = getHStateById(bsPpStateFromState(getState()), hStateId);\n    if (!isNil(hState)) {\n      const mediaHState: MediaHState = hState as MediaHState;\n      if (!isNil(mediaHState.data.mediaStateData)) {\n        if (isNumber(mediaHState.data.mediaStateData.timeoutId)) {\n          clearTimeout(mediaHState.data.mediaStateData.timeoutId);\n          // TEDTODO - is it okay to dispatching an action inside of a whatever\n          dispatch(setMediaHStateTimeoutId(hStateId, 0));\n        }\n        }\n    }\n  };\n};\n\ninterface TimeoutEventCallbackParams {\n  dispatch: BsPpDispatch;\n  hState: HState;\n}\n\nexport const launchTimer = (\n  hState: HState,\n): BsPpVoidThunkAction => {\n\n  return (dispatch: BsPpDispatch, getState: () => any) => {\n\n    // at least part of this will move somwhere else\n    const bsdm: DmState = bsPpStateFromState(getState()).bsdm;\n\n    const eventIds: BsDmId[] = dmGetEventIdsForMediaState(\n      bsdm,\n      {\n        id: (hState as MediaHState).data.mediaStateId\n      });\n    for (const eventId of eventIds) {\n      const event: DmEvent = dmGetEventStateById(bsdm, { id: eventId }) as DmEvent;\n      if (event.type === EventType.Timer) {\n        const interval: number = (event.data as DmTimer).interval;\n        if (interval && interval > 0) {\n          const timeoutEventCallbackParams: TimeoutEventCallbackParams = {\n            dispatch,\n            hState,\n          };\n          // console.log('launchTimer');\n          // console.log(interval);\n          const timeoutId: number =\n            setTimeout(timeoutHandler, interval * 1000, timeoutEventCallbackParams) as unknown as number;\n          dispatch(setMediaHStateTimeoutId(hState.id, timeoutId));\n        }\n      }\n    }\n  };\n};\n\nconst timeoutHandler = (callbackParams: TimeoutEventCallbackParams): void => {\n\n  const event: HsmEventType = {\n    EventType: EventType.Timer,\n    EventData: HsmTimerType.MediaHState,\n  };\n\n  // console.log(event);\n  // console.log(callbackParams);\n\n  // const { store } = callbackParams;\n  // const hsmId = hState.hsmId;\n  // const hsm = getHsmById(store.bsPpStateFromBaApUiState(getState()), hsmId);\n  // TEDTODO - circular reference?\n  // _bsPpStore.dispatch(addHsmEvent(event));\n  callbackParams.dispatch(addHsmEvent(event));\n};\n","import { Store } from 'redux';\n\nimport {\n  HsmEventType,\n  Hsm,\n  HState,\n  BsPpState,\n  bsPpStateFromState,\n} from '../type';\nimport {\n  BsPpDispatch, BsPpVoidThunkAction, queueHsmEvent,\n} from '../model';\n\nimport {\n  createPlayerHsm,\n  initializePlayerHsm,\n  hsmDispatch,\n} from './hsm';\n\nimport {\n  HsmMap,\n} from '../type';\nimport {\n  dequeueHsmEvent,\n} from '../model';\n\nimport {\n  getHsmMap,\n  getActiveHStateIdByHsmId,\n  getHsmByName,\n  getIsHsmInitialized,\n  getEvents,\n} from '../selector';\nimport { isNil } from 'lodash';\n\nexport let _bsPpStore: Store<BsPpState>;\n\n/** @internal */\n/** @private */\nexport function initPlayer(store: Store<BsPpState>) {\n  _bsPpStore = store;\n  return ((dispatch: BsPpDispatch) => {\n    // dispatch(launchHSM());\n  });\n}\n\n/** @internal */\n/** @private */\nexport function launchHsm() {\n  return ((dispatch: BsPpDispatch) => {\n    dispatch(createPlayerHsm());\n    dispatch(initializePlayerHsm());\n  });\n}\n\nexport const addHsmEvent = (event: HsmEventType): BsPpVoidThunkAction => {\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n    if (event.EventType !== 'NOP') {\n      dispatch(queueHsmEvent(event));\n    }\n    if (getIsHsmInitialized(bsPpStateFromState(getState()))) {\n      let events: HsmEventType[] = getEvents(bsPpStateFromState(getState()));\n\n      while (events.length > 0) {\n        dispatch(dispatchHsmEvent(events[0]));\n        dispatch(dequeueHsmEvent());\n        events = getEvents(bsPpStateFromState(getState()));\n      }\n    }\n  });\n};\n\nfunction dispatchHsmEvent(\n  event: HsmEventType\n): BsPpVoidThunkAction {\n\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n\n    // console.log('dispatchHsmEvent:');\n    // console.log(event.EventType);\n\n    const state: BsPpState = bsPpStateFromState(getState());\n\n    const playerHsm: Hsm | null = getHsmByName(state, 'player');\n    if (!isNil(playerHsm)) {\n      dispatch(hsmDispatch(event, playerHsm!.id, playerHsm!.activeStateId) as any);\n      const hsmMap: HsmMap = getHsmMap(state);\n      for (const hsmId in hsmMap) {\n        if (hsmId !== playerHsm!.id) {\n          const activeState: HState | null = getActiveHStateIdByHsmId(state, hsmId);\n          if (!isNil(activeState)) {\n            dispatch(hsmDispatch(event, hsmId, activeState!.id) as any);\n          } else {\n            debugger;\n          }\n        }\n      }\n    }\n  });\n}\n","import { isNil } from 'lodash';\nimport isomorphicPath from 'isomorphic-path';\nimport * as fs from 'fs-extra';\n\nimport {\n  BsPpState, bsPpStateFromState,\n  RawSyncSpec,\n  PpSchedule,\n  SyncSpecFileMap,\n  //   bsPpStateFromState,\n  //   RuntimeEnvironment,\n} from '../type';\nimport {\n  BsPpDispatch,\n  BsPpVoidPromiseThunkAction,\n  BsPpVoidThunkAction,\n  updatePresentationSrcDirectory,\n  updateRuntimeEnvironment,\n  updateScreenDimensions,\n} from '../model';\nimport { RuntimeEnvironment } from '../type';\n\nimport {\n  updatePresentationAutoschedule,\n  //   updateRuntimeEnvironment,\n  //   updatePresentationSrcDirectory,\n  updatePresentationSyncSpecFileMap,\n  //   updatePresentationAutoschedule,\n  //   updateScreenDimensions\n} from '../model/presentation';\nimport {\n  getRuntimeEnvironment,\n  getSrcDirectory,\n  getSyncSpecFile,\n    getAutoschedule,\n    getSyncSpecFileMap,\n    getSyncSpecReferencedFile\n} from '../selector';\nimport { launchHsm } from './hsmController';\nimport { DmSignState, dmOpenSign } from '@brightsign/bsdatamodel';\n// import { baCmGetPresentationLocator } from '@brightsign/ba-context-model';\n// import { BsAssetLocator } from '@brightsign/bscore';\n\nexport const initPresentation = (): BsPpVoidThunkAction => {\n  return ((dispatch: BsPpDispatch) => {\n    dispatch(loadPresentationData()).then(() => {\n      dispatch(launchHsm() as any);\n    });\n  });\n};\n\nconst loadPresentationData = (): BsPpVoidPromiseThunkAction => {\n  return ((dispatch: BsPpDispatch) => {\n    dispatch(setRuntimeEnvironment());\n    dispatch(setSrcDirectory());\n    return dispatch(setSyncSpec())\n      .then(() => {\n        return dispatch(setAutoschedule());\n      });\n  });\n};\n\nconst setRuntimeEnvironment = (): BsPpVoidThunkAction => {\n  return ((dispatch: BsPpDispatch) => {\n    // const runtimeEnvironment: RuntimeEnvironment = RuntimeEnvironment.BaconPreview;\n    let runtimeEnvironment: RuntimeEnvironment = RuntimeEnvironment.Dev;\n    // try {\n    //   const gpio = new BSControlPort('BrightSign') as BSControlPort;\n    //   console.log('create controlPort: ');\n    //   console.log(gpio);\n    //   runtimeEnvironment = RuntimeEnvironment.BrightSign;\n    // } catch (e) {\n    //   // runtimeEnvironment = 'Desktop';\n    //   console.log('failed to create controlPort: ');\n    // }\n    dispatch(updateRuntimeEnvironment(runtimeEnvironment));\n  });\n};\n\nconst setSrcDirectory = (): BsPpVoidThunkAction => {\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n\n    const process = require('process');\n\n    const bsPpState: BsPpState = bsPpStateFromState(getState());\n    const runtimeEnvironment: RuntimeEnvironment = getRuntimeEnvironment(bsPpState);\n    let srcDirectory = '';\n    if (runtimeEnvironment === RuntimeEnvironment.Dev) {\n      require('dotenv').config();\n\n      dispatch(updateScreenDimensions({\n        width: process.env.SCREEN_WIDTH,\n        height: process.env.SCREEN_HEIGHT,\n      }));\n\n      srcDirectory = process.env.SOURCE_DIRECTORY;\n    } else if (runtimeEnvironment === RuntimeEnvironment.BaconPreview) {\n      srcDirectory = '/Users/tedshaffer/Desktop/autotron-2020';\n    } else {\n      process.chdir('/storage/sd');\n    }\n    dispatch(updatePresentationSrcDirectory(srcDirectory));\n  });\n};\n\n\n\nconst setSyncSpec = (): BsPpVoidPromiseThunkAction => {\n  return ((dispatch: BsPpDispatch, getState: () => any) => {\n    const bsPpState: BsPpState = bsPpStateFromState(getState());\n    const srcDirectory = getSrcDirectory(bsPpState);\n    return getSyncSpec(srcDirectory)\n      .then((syncSpec) => {\n        const syncSpecFileMap: SyncSpecFileMap = {};\n        for (const syncSpecDownload of syncSpec.files.download) {\n          syncSpecFileMap[syncSpecDownload.name] = syncSpecDownload;\n        }\n        dispatch(updatePresentationSyncSpecFileMap(syncSpecFileMap));\n        return Promise.resolve();\n      });\n  });\n};\n\nconst setAutoschedule = (): BsPpVoidPromiseThunkAction => {\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n    return new Promise((resolve, reject) => {\n      const bsPpState: BsPpState = bsPpStateFromState(getState());\n      getSyncSpecFile(bsPpState, 'autoschedule.json')\n        .then((autoSchedule: PpSchedule) => {\n          dispatch(updatePresentationAutoschedule(autoSchedule));\n          return resolve(null);\n        });\n    });\n  });\n};\n\nfunction getSyncSpec(rootDirectory: string): Promise<RawSyncSpec> {\n  return getSyncSpecFilePath(rootDirectory)\n    .then((syncSpecFilePath: string | null) => {\n      if (!syncSpecFilePath) {\n        // TEDTODO - error object\n        return Promise.reject('no sync spec found');\n      } else {\n        return Promise.resolve(readSyncSpec(syncSpecFilePath));\n      }\n    });\n}\n\nfunction getSyncSpecFilePath(rootDirectory: string): Promise<string | null> {\n  return getLocalSyncSpec(rootDirectory)\n    .then((localSyncSpecFilePath) => {\n      if (isNil(localSyncSpecFilePath)) {\n        return getNetworkedSyncSpec(rootDirectory);\n      } else {\n        return Promise.resolve(localSyncSpecFilePath);\n      }\n    });\n}\n\nfunction getNetworkedSyncSpec(rootDirectory: string): Promise<string | null> {\n  const filePath: string = getNetworkedSyncSpecFilePath(rootDirectory);\n  return fs.pathExists(filePath)\n    .then((exists: boolean) => {\n      if (exists) {\n        return Promise.resolve(filePath);\n      } else {\n        return Promise.resolve(null);\n      }\n    });\n}\n\nfunction getLocalSyncSpec(rootDirectory: string): Promise<string | null> {\n  const filePath: string = getLocalSyncSpecFilePath(rootDirectory);\n  return fs.pathExists(filePath)\n    .then((exists: boolean) => {\n      if (exists) {\n        return Promise.resolve(filePath);\n      } else {\n        return Promise.resolve(null);\n      }\n    });\n}\n\nfunction getLocalSyncSpecFilePath(rootDirectory: string): string {\n  return isomorphicPath.join(rootDirectory, 'local-sync.json');\n}\n\nfunction getNetworkedSyncSpecFilePath(rootDirectory: string): string {\n  return isomorphicPath.join(rootDirectory, 'current-sync.json');\n}\n\nfunction readSyncSpec(syncSpecFilePath: string): Promise<RawSyncSpec> {\n  return fs.readFile(syncSpecFilePath, 'utf8')\n    .then((syncSpecStr: string) => {\n      const syncSpec: RawSyncSpec = JSON.parse(syncSpecStr);\n      return Promise.resolve(syncSpec);\n    });\n}\n\nconst openSignDev = (presentationName: string) => {\n\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n\n    const autoSchedule: PpSchedule | null = getAutoschedule(bsPpStateFromState(getState()));\n    if (!isNil(autoSchedule)) {\n      //  - only a single scheduled item is currently supported\n      const scheduledPresentation = autoSchedule!.scheduledPresentations[0];\n      const presentationToSchedule = scheduledPresentation.presentationToSchedule;\n      presentationName = presentationToSchedule.name;\n      const autoplayFileName = presentationName + '.bml';\n\n      const syncSpecFileMap = getSyncSpecFileMap(bsPpStateFromState(getState()));\n      if (!isNil(syncSpecFileMap)) {\n        return getSyncSpecReferencedFile(\n          autoplayFileName,\n          syncSpecFileMap!,\n          getSrcDirectory(bsPpStateFromState(getState())))\n          .then((bpfxState: any) => {\n            const autoPlay: any = bpfxState.bsdm;\n            const signState = autoPlay as DmSignState;\n            dispatch(dmOpenSign(signState));\n          });\n      }\n      return Promise.resolve();\n    } else {\n      return Promise.resolve();\n    }\n  });\n};\n\n// const openSignBaconPreview = (presentationName: string) => {\n//   return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n//     const state = getState();\n//     const presentationLocator: BsAssetLocator | null = baCmGetPresentationLocator(state);\n//     if (!isNil(presentationLocator)) {\n//       const filePath: string = isomorphicPath.join(presentationLocator.path, presentationLocator.name);\n//       return fs.readFile(filePath, 'utf8')\n//         .then((fileStr: string) => {\n//           const file: any = JSON.parse(fileStr);\n//           dispatch(dmOpenSign(file.bsdm));\n//           return Promise.resolve();\n//         });\n\n//     } else {\n//       debugger;\n//       return Promise.resolve();\n//     }\n//   });\n// };\n\n// const openSignBrightSign = (presentationName: string) => {\n//   return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n\n//     const autoSchedule: PpSchedule | null = getAutoschedule(bsPpStateFromState(getState()));\n//     if (!isNil(autoSchedule)) {\n\n//       //  - only a single scheduled item is currently supported\n//       const scheduledPresentation = autoSchedule!.scheduledPresentations[0];\n//       const presentationToSchedule = scheduledPresentation.presentationToSchedule;\n//       presentationName = presentationToSchedule.name;\n//       const autoplayFileName = presentationName + '.bml';\n\n//       const syncSpecFileMap = getSyncSpecFileMap(bsPpStateFromState(getState()));\n//       if (!isNil(syncSpecFileMap)) {\n//         return getSyncSpecReferencedFile(\n//           autoplayFileName,\n//           syncSpecFileMap!,\n//           getSrcDirectory(bsPpStateFromState(getState())))\n//           .then((bpfxState: any) => {\n//             const autoPlay: any = bpfxState.bsdm;\n//             const signState = autoPlay as DmSignState;\n//             dispatch(dmOpenSign(signState));\n//           });\n//       }\n//       return Promise.resolve();\n//     } else {\n//       return Promise.resolve();\n//     }\n//   });\n// };\n\nexport const openSign = (presentationName: string) => {\n\n  return ((dispatch: BsPpDispatch, getState: () => BsPpState) => {\n\n    const runtimeEnvironment: RuntimeEnvironment = getRuntimeEnvironment(getState());\n\n    if (runtimeEnvironment === RuntimeEnvironment.BaconPreview) {\n      // const action = openSignBaconPreview(presentationName);\n      // const promise = dispatch(action as any);\n      // return promise;\n    } else if (runtimeEnvironment === RuntimeEnvironment.Dev) {\n      const action = openSignDev(presentationName);\n      const promise = dispatch(action as any);\n      return promise;\n    } else {\n      // const action = openSignBrightSign(presentationName);\n      // const promise = dispatch(action as any);\n      // return promise;\n    }\n  });\n};\n","import * as React from 'react';\nimport { isNil } from 'lodash';\nimport isomorphicPath from 'isomorphic-path';\n\nimport { connect } from 'react-redux';\nimport { getAssetPath } from '../selector';\nimport { BsPpState, bsPpStateFromState } from '../type';\nimport * as sizeOf from 'image-size';\nimport { calculateAspectRatioFit, Dimensions } from '../utility';\n\n// -----------------------------------------------------------------------\n// Types\n// -----------------------------------------------------------------------\n\nexport interface ImagePropsFromParent {\n  assetName: string;\n  zoneWidth: number;\n  zoneHeight: number;\n  screenDimensions: Dimensions;\n}\n\nexport interface ImageProps extends ImagePropsFromParent {\n  filePath: string;\n}\n\n// -----------------------------------------------------------------------\n// Component\n// -----------------------------------------------------------------------\n\nexport class ImageComponent extends React.Component<ImageProps> {\n\n  render() {\n\n    const src: string = isomorphicPath.join('file://', this.props.filePath);\n\n    // console.log(this.props.filePath);\n\n    const dimensions = sizeOf(this.props.filePath);\n    if (isNil(dimensions)) {\n      return null;\n    }\n\n    const scaledDimensions = calculateAspectRatioFit(\n      dimensions.width,\n      dimensions.height,\n      this.props.zoneWidth,\n      this.props.zoneHeight);\n\n    const left = (this.props.screenDimensions.width - scaledDimensions.width) / 2;\n    const top = (this.props.screenDimensions.height - scaledDimensions.height) / 2;\n\n    return (\n      <img\n        style={{\n          position: 'absolute',\n          left,\n          top,\n        }}\n        src={src}\n        width={scaledDimensions.width.toString()}\n        height={scaledDimensions.height.toString()}\n        alt=''\n      />\n    );\n  }\n}\n\n// -----------------------------------------------------------------------\n// Container\n// -----------------------------------------------------------------------\n\nconst mapStateToProps = (state: BsPpState, ownProps: ImagePropsFromParent): Partial<ImageProps> => {\n  state = bsPpStateFromState(state);\n  return {\n    filePath: getAssetPath(state, ownProps.assetName),\n    zoneWidth: ownProps.zoneWidth,\n    zoneHeight: ownProps.zoneHeight,\n    assetName: ownProps.assetName,\n  };\n};\n\nexport const Image = connect(mapStateToProps)(ImageComponent);\n","import { EventType } from '@brightsign/bscore';\nimport { HsmEventType } from '../../type';\nimport { addHsmEvent } from '../hsmController';\n\n// -----------------------------------------------------------------------\n// Controller Methods\n// -----------------------------------------------------------------------\n\n/** @internal */\n/** @private */\nexport const postVideoEnd = (): any => {\n  return (dispatch: any, getState: () => any) => {\n    // console.log('postMediaEndEvent');\n    const event: HsmEventType = {\n      EventType: EventType.MediaEnd,\n    };\n    dispatch(addHsmEvent(event));\n  };\n};\n","import * as React from 'react';\nimport { Dispatch } from 'redux';\nimport { bindActionCreators } from 'redux';\n\nimport isomorphicPath from 'isomorphic-path';\n\nimport { connect } from 'react-redux';\nimport { getAssetPath } from '../selector';\nimport { bsPpStateFromState } from '../type';\nimport { postVideoEnd } from '../controller';\nimport { setVideoElementRef } from '../model/playback';\n\n// -----------------------------------------------------------------------\n// Types\n// -----------------------------------------------------------------------\n\nexport interface VideoPropsFromParent {\n  assetName: string;\n  zoneWidth: number;\n  zoneHeight: number;\n}\n\nexport interface VideoProps extends VideoPropsFromParent {\n  filePath: string;\n  onVideoEnd: () => any;\n  onSetVideoElementRef: (videoElementRef: any) => any;\n}\n\n// -----------------------------------------------------------------------\n// Component\n// -----------------------------------------------------------------------\n\n// TEDTODO - VideoProps didn't work, so put in any\nexport class VideoComponent extends React.Component<any> {\n\n  videoElementRef: HTMLVideoElement | null;\n\n  handleSetVideoElementRef(videoElementRef: HTMLVideoElement | null) {\n    this.videoElementRef = videoElementRef;\n    this.props.onSetVideoElementRef(videoElementRef);\n  }\n\n  render() {\n\n    const src: string = isomorphicPath.join('file://', this.props.filePath);\n\n    const self = this;\n\n    return (\n      <video\n        src={src}\n        width={this.props.zoneWidth.toString()}\n        height={this.props.zoneHeight.toString()}\n        autoPlay={true}\n        ref={(videoElementRef) => {\n          // console.log('videoElementRef retrieved');\n          self.handleSetVideoElementRef(videoElementRef);\n        }}\n        onEnded={() => {\n          // console.log('**** - videoEnd');\n          self.props.onVideoEnd();\n        }}\n      />\n    );\n  }\n}\n\n// -----------------------------------------------------------------------\n// Container\n// -----------------------------------------------------------------------\n\n// TEDTODO - real return value didn't work, so put in any\nconst mapStateToProps = (state: any, ownProps: VideoPropsFromParent): any => {\n  state = bsPpStateFromState(state);\n  return {\n    filePath: getAssetPath(state, ownProps.assetName),\n    width: ownProps.zoneWidth,\n    height: ownProps.zoneHeight,\n    assetName: ownProps.assetName,\n  };\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch<any>): any => {\n  return bindActionCreators({\n    onVideoEnd: postVideoEnd,\n    onSetVideoElementRef: setVideoElementRef,\n  }, dispatch);\n};\n\nexport const Video = connect(mapStateToProps, mapDispatchToProps)(VideoComponent);\n","import * as React from 'react';\nimport { connect } from 'react-redux';\n\nimport { isString } from 'lodash';\n\nimport { ContentItemType } from '@brightsign/bscore';\n\nimport { BsDmId } from '@brightsign/bsdatamodel';\nimport { DmMediaState } from '@brightsign/bsdatamodel';\nimport { DmState } from '@brightsign/bsdatamodel';\nimport { DmZone } from '@brightsign/bsdatamodel';\nimport { DmEvent } from '@brightsign/bsdatamodel';\nimport { DmMediaContentItem } from '@brightsign/bsdatamodel';\nimport {\n  DmDerivedContentItem,\n  dmGetMediaStateById,\n  dmGetEventIdsForMediaState,\n  dmGetEventById,\n  DmcEvent,\n} from '@brightsign/bsdatamodel';\n\nimport { bsPpStateFromState } from '../type';\nimport { getActiveMediaStateId, getActiveMrssDisplayIndex } from '../selector';\nimport { Image } from './image';\nimport { Video } from './video';\nimport { calculateAspectRatioFit, Dimensions } from '../utility';\n// import { Mrss } from './mrssItem';\n\n// -----------------------------------------------------------------------\n// Types\n// -----------------------------------------------------------------------\n\nexport interface MediaZonePropsFromParent {\n  bsdm: DmState;\n  zone: DmZone;\n  zoneWidth: number;\n  zoneHeight: number;\n  screenDimensions: Dimensions;\n}\n\nexport interface MediaZoneProps extends MediaZonePropsFromParent {\n  mediaStateId: string;\n  mrssDisplayIndex: number;\n}\n\n// -----------------------------------------------------------------------\n// Component\n// -----------------------------------------------------------------------\nexport default class MediaZoneComponent extends React.Component<MediaZoneProps> {\n\n  // constructor(props: MediaZoneProps) {\n  //   super(props);\n  // }\n\n  renderMediaItem(mediaState: DmMediaState, contentItem: DmDerivedContentItem) {\n\n    const mediaContentItem: DmMediaContentItem = contentItem as DmMediaContentItem;\n\n    const mediaType: ContentItemType = mediaContentItem.type;\n\n    const scaledDimensions = calculateAspectRatioFit(\n      this.props.zoneWidth,\n      this.props.zoneHeight,\n      this.props.screenDimensions.width,\n      this.props.screenDimensions.height,\n    );\n\n    switch (mediaType) {\n      case ContentItemType.Image: {\n        return (\n          <Image\n            assetName={mediaState.name}\n            zoneWidth={scaledDimensions.width}\n            zoneHeight={scaledDimensions.height}\n            screenDimensions={this.props.screenDimensions}\n          />\n        );\n      }\n      case ContentItemType.Video: {\n        return (\n          <Video\n            assetName={mediaState.name}\n            zoneWidth={scaledDimensions.width}\n            zoneHeight={scaledDimensions.height}\n          />\n        );\n      }\n      default:\n        debugger;\n    }\n\n    return null;\n  }\n\n  // renderMrssDisplayItem(mediaState: DmMediaState,\n  //   contentItem: DmDerivedContentItem,\n  //   mrssDisplayIndex: number) {\n\n  //   const scaledDimensions = calculateAspectRatioFit(\n  //     this.props.zoneWidth,\n  //     this.props.zoneHeight,\n  //     this.props.screenDimensions.width,\n  //     this.props.screenDimensions.height,\n  //   );\n\n  //   return (\n  //     <Mrss\n  //       mediaStateId={mediaState.id}\n  //       assetName={mediaState.name}\n  //       zoneWidth={scaledDimensions.width}\n  //       zoneHeight={scaledDimensions.height}\n  //       screenDimensions={this.props.screenDimensions}\n  //     />\n  //   );\n  // }\n\n  getEvents(bsdm: DmState, mediaStateId: string): DmEvent[] {\n\n    let events: DmEvent[] = [];\n\n    const eventIds: BsDmId[] = dmGetEventIdsForMediaState(bsdm, { id: mediaStateId });\n\n    events = eventIds.map((eventId) => {\n      return dmGetEventById(bsdm, { id: eventId }) as DmcEvent;\n    });\n\n    return events;\n  }\n\n  render() {\n\n    if (!isString(this.props.mediaStateId) || this.props.mediaStateId.length === 0) {\n      return null;\n    }\n\n    const mediaState: DmMediaState =\n      dmGetMediaStateById(this.props.bsdm, { id: this.props.mediaStateId }) as DmMediaState;\n    const contentItem: DmDerivedContentItem = mediaState.contentItem;\n\n    // console.log('contentItemType:');\n    // console.log(contentItem.type);\n\n    switch (contentItem.type) {\n      case ContentItemType.Image:\n      case ContentItemType.Video: {\n        return this.renderMediaItem(mediaState, contentItem as DmMediaContentItem);\n      }\n      // case ContentItemType.MrssFeed: {\n      //   return this.renderMrssDisplayItem(mediaState,\n      //     contentItem as DmMediaContentItem,\n      //     this.props.mrssDisplayIndex,\n      //   );\n      // }\n      default: {\n        break;\n      }\n    }\n\n    return null;\n  }\n}\n\n// -----------------------------------------------------------------------\n// Container\n// -----------------------------------------------------------------------\n\nconst mapStateToProps = (\n  state: any,\n  ownProps: MediaZonePropsFromParent\n): Partial<MediaZoneProps> => {\n  state = bsPpStateFromState(state);\n  return {\n    bsdm: ownProps.bsdm,\n    zone: ownProps.zone,\n    zoneWidth: ownProps.zoneWidth,\n    zoneHeight: ownProps.zoneHeight,\n    mediaStateId: getActiveMediaStateId(state, ownProps.zone.id),\n    mrssDisplayIndex: getActiveMrssDisplayIndex(state, ownProps.zone.id),\n  };\n};\n\nexport const MediaZone = connect(mapStateToProps)(MediaZoneComponent);\n","import * as React from 'react';\nimport { connect } from 'react-redux';\n\nimport { DmState } from '@brightsign/bsdatamodel';\n\nimport {\n  DmcZone,\n  dmGetZoneById,\n  dmGetZonesForSign,\n} from '@brightsign/bsdatamodel';\nimport { MediaZone } from './mediaZone';\nimport { bsPpStateFromState } from '../type';\nimport { calculateAspectRatioFit, Dimensions } from '../utility';\nimport { getScreenDimensions } from '../selector';\n\n// -----------------------------------------------------------------------\n// Types\n// -----------------------------------------------------------------------\n\nexport interface SignProps {\n  bsdm: DmState;\n  screenDimensions: Dimensions;\n}\n\n// -----------------------------------------------------------------------\n// Component\n// -----------------------------------------------------------------------\n\nclass SignComponent extends React.Component<SignProps> {\n\n  // constructor(props: SignProps) {\n  //   super(props);\n  // }\n\n  renderMediaZone(zone: DmcZone): object {\n\n    const scaledDimensions = calculateAspectRatioFit(\n      zone.absolutePosition.width,\n      zone.absolutePosition.height,\n      this.props.screenDimensions.width,\n      this.props.screenDimensions.height,\n    );\n\n    return (\n      <div\n        key={zone.id}\n        style={{\n          position: 'absolute',\n          left: zone.absolutePosition.x,\n          top: zone.absolutePosition.y,\n          width: scaledDimensions.width,\n          height: scaledDimensions.height,\n        }}\n      >\n        <MediaZone\n          key={zone.id}\n          bsdm={this.props.bsdm}\n          zone={zone}\n          zoneWidth={Number(zone.absolutePosition.width)}\n          zoneHeight={Number(zone.absolutePosition.height)}\n          screenDimensions={this.props.screenDimensions}\n        />\n      </div>\n    );\n  }\n\n  renderTickerZone(zone: DmcZone): object {\n\n    return (\n      <div\n        key={zone.id}\n        style={{\n          position: 'absolute',\n          left: zone.absolutePosition.x,\n          top: zone.absolutePosition.y,\n          width: zone.absolutePosition.width,\n          height: zone.absolutePosition.height,\n        }}\n      >\n        <div>\n          Pizza\n        </div>\n      </div>\n    );\n  }\n\n  renderZone(zoneId: string): object | null {\n\n    const zone: DmcZone = dmGetZoneById(this.props.bsdm, { id: zoneId }) as DmcZone;\n\n    switch (zone.type) {\n      case 'VideoOrImages': {\n        return this.renderMediaZone(zone);\n      }\n      case 'Ticker': {\n        return this.renderTickerZone(zone);\n      }\n      default: {\n        debugger;\n      }\n    }\n\n    return null;\n  }\n\n  render() {\n\n    const zoneIds: string[] = dmGetZonesForSign(this.props.bsdm);\n\n    return (\n      <div>\n        {\n          zoneIds.map((zoneId) =>\n            this.renderZone(zoneId),\n          )\n        }\n      </div>\n    );\n  }\n}\n\n// -----------------------------------------------------------------------\n// Container\n// -----------------------------------------------------------------------\n\nconst mapStateToProps = (state: any): Partial<SignProps> => {\n  state = bsPpStateFromState(state);\n  return {\n    bsdm: state.bsdm,\n    screenDimensions: getScreenDimensions(state),\n  };\n};\n\nexport const Sign = connect(mapStateToProps)(SignComponent);\n","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport { Dispatch, bindActionCreators } from 'redux';\n\nimport { DmState } from '@brightsign/bsdatamodel';\nimport {\n  initPresentation,\n} from '../controller/appController';\nimport {\n  PpSchedule,\n  HsmMap,\n  BsPpState,\n  bsPpStateFromState,\n} from '../type';\nimport { getAutoschedule, getHsmMap } from '../selector';\nimport { Sign } from './sign';\nimport {\n  BsPpVoidThunkAction,\n} from '../model';\n\n// -----------------------------------------------------------------------\n// Types\n// -----------------------------------------------------------------------\n\n/** @internal */\n/** @private */\nexport interface BsPpProps {\n  autoschedule: PpSchedule | null;\n  bsdm: DmState;\n  hsmMap: HsmMap;\n  onInitPresentation: () => BsPpVoidThunkAction;\n}\n\n// -----------------------------------------------------------------------\n// Styles\n// -----------------------------------------------------------------------\n\n// -----------------------------------------------------------------------\n// Component\n// -----------------------------------------------------------------------\n\n// class BsPpComponent extends React.Component<BsPpProps> {\nclass BsPpComponent extends React.Component<any> {\n  componentDidMount() {\n    this.props.onInitPresentation();\n  }\n\n  render() {\n\n    let initializationComplete = true;\n\n    if (this.props.bsdm.zones.allZones.length === 0 ||\n      Object.keys(this.props.hsmMap).length === 0) {\n      initializationComplete = false;\n    }\n\n    for (const hsmId in this.props.hsmMap) {\n      if (this.props.hsmMap.hasOwnProperty(hsmId)) {\n        const hsm = this.props.hsmMap[hsmId];\n        if (!hsm.initialized) {\n          initializationComplete = false;\n        }\n      }\n    }\n\n    if (initializationComplete) {\n      return (\n        <Sign />\n      );\n    } else {\n      return (\n        <div>\n          Waiting for the presentation to be loaded...\n        </div>\n      );\n    }\n  }\n}\n\n// -----------------------------------------------------------------------\n// Container\n// -----------------------------------------------------------------------\n\nfunction mapStateToProps(state: BsPpState): Partial<BsPpProps> {\n\n  const bsPpState: BsPpState = bsPpStateFromState(state);\n\n  return {\n    bsdm: state.bsdm,\n    autoschedule: getAutoschedule(bsPpState),\n    hsmMap: getHsmMap(bsPpState),\n  };\n}\n\nconst mapDispatchToProps = (dispatch: Dispatch<any>): any => {\n  return bindActionCreators({\n    onInitPresentation: initPresentation,\n  }, dispatch);\n};\n\nexport const BsPp = connect(mapStateToProps, mapDispatchToProps)(BsPpComponent);"],"sourceRoot":""}